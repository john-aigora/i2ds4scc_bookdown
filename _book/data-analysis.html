<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Data Analysis | Data Science for Sensory and Consumer Scientists</title>
  <meta name="description" content="Open development of data science book for sensory and consumer scientists." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Data Analysis | Data Science for Sensory and Consumer Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Open development of data science book for sensory and consumer scientists." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Data Analysis | Data Science for Sensory and Consumer Scientists" />
  
  <meta name="twitter:description" content="Open development of data science book for sensory and consumer scientists." />
  

<meta name="author" content="John Ennis, Julien Delarue, and Thierry Worch" />


<meta name="date" content="2021-05-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-prep.html"/>
<link rel="next" href="value-delivery.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science for Sensory and Consumer Scientists</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-should-read-this-book"><i class="fa fa-check"></i>Who Should Read This Book?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i>How to Use This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cautions-dont-that-everybody-does"><i class="fa fa-check"></i>Cautions: Don’t that Everybody Does</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contact-us"><i class="fa fa-check"></i>How to Contact Us</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="bienvenue.html"><a href="bienvenue.html"><i class="fa fa-check"></i><b>1</b> Bienvenue!</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#why-data-science-for-sensory-and-consumer-science"><i class="fa fa-check"></i>Why Data Science for Sensory and Consumer Science?</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#core-principles-in-sensory-and-consumer-science"><i class="fa fa-check"></i>Core principles in Sensory and Consumer Science</a></li>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#measuring-and-analyzing-human-responses"><i class="fa fa-check"></i>Measuring and analyzing human responses</a></li>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#computational-sensory-science"><i class="fa fa-check"></i>Computational Sensory Science</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Hors d’Oeuvres</b></span></li>
<li class="chapter" data-level="2" data-path="data-science.html"><a href="data-science.html"><i class="fa fa-check"></i><b>2</b> Why Data Science?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-science.html"><a href="data-science.html#history-and-definition"><i class="fa fa-check"></i><b>2.1</b> History and Definition</a></li>
<li class="chapter" data-level="2.2" data-path="data-science.html"><a href="data-science.html#benefits-of-data-science"><i class="fa fa-check"></i><b>2.2</b> Benefits of Data Science</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-science.html"><a href="data-science.html#reproducible-research"><i class="fa fa-check"></i><b>2.2.1</b> Reproducible Research</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-science.html"><a href="data-science.html#standardized-reporting"><i class="fa fa-check"></i><b>2.2.2</b> Standardized Reporting</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-science.html"><a href="data-science.html#data-scientific-workflow"><i class="fa fa-check"></i><b>2.3</b> Data Scientific Workflow</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-science.html"><a href="data-science.html#data-collection2"><i class="fa fa-check"></i><b>2.3.1</b> Data Collection</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-science.html"><a href="data-science.html#data-preparation"><i class="fa fa-check"></i><b>2.3.2</b> Data Preparation</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-science.html"><a href="data-science.html#data-analysis2"><i class="fa fa-check"></i><b>2.3.3</b> Data Analysis</a></li>
<li class="chapter" data-level="2.3.4" data-path="data-science.html"><a href="data-science.html#value-delivery2"><i class="fa fa-check"></i><b>2.3.4</b> Value Delivery</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-science.html"><a href="data-science.html#reproducible-research-1"><i class="fa fa-check"></i><b>2.4</b> Reproducible Research</a></li>
<li class="chapter" data-level="2.5" data-path="data-science.html"><a href="data-science.html#how-to-learn-data-science"><i class="fa fa-check"></i><b>2.5</b> How to Learn Data Science</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidy-thoughts.html"><a href="tidy-thoughts.html"><i class="fa fa-check"></i><b>3</b> Tidy Thinking</a></li>
<li class="chapter" data-level="4" data-path="data-manip.html"><a href="data-manip.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manip.html"><a href="data-manip.html#tidying-data"><i class="fa fa-check"></i><b>4.1</b> Tidying Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manip.html"><a href="data-manip.html#simple-manipulations"><i class="fa fa-check"></i><b>4.1.1</b> Simple Manipulations</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-manip.html"><a href="data-manip.html#reshaping-the-data"><i class="fa fa-check"></i><b>4.1.2</b> Reshaping the Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-manip.html"><a href="data-manip.html#transformation-that-alters-the-data"><i class="fa fa-check"></i><b>4.1.3</b> Transformation that Alters the Data</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-manip.html"><a href="data-manip.html#combining-data-from-different-sources"><i class="fa fa-check"></i><b>4.1.4</b> Combining Data from Different Sources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-viz.html"><a href="data-viz.html"><i class="fa fa-check"></i><b>5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-viz.html"><a href="data-viz.html#design-principles"><i class="fa fa-check"></i><b>5.1</b> Design Principles</a></li>
<li class="chapter" data-level="5.2" data-path="data-viz.html"><a href="data-viz.html#table-making"><i class="fa fa-check"></i><b>5.2</b> Table Making</a></li>
<li class="chapter" data-level="5.3" data-path="data-viz.html"><a href="data-viz.html#chart-making"><i class="fa fa-check"></i><b>5.3</b> Chart Making</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-viz.html"><a href="data-viz.html#philosophy-of-ggplot2"><i class="fa fa-check"></i><b>5.3.1</b> Philosophy of ggplot2</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-viz.html"><a href="data-viz.html#common-charts"><i class="fa fa-check"></i><b>5.3.2</b> Common Charts</a></li>
<li class="chapter" data-level="5.3.3" data-path="data-viz.html"><a href="data-viz.html#additional-topics"><i class="fa fa-check"></i><b>5.3.3</b> Additional Topics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="auto-report.html"><a href="auto-report.html"><i class="fa fa-check"></i><b>6</b> Automated Reporting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="auto-report.html"><a href="auto-report.html#what-is-automated-reporting"><i class="fa fa-check"></i><b>6.1</b> What is Automated Reporting?</a></li>
<li class="chapter" data-level="6.2" data-path="auto-report.html"><a href="auto-report.html#excel"><i class="fa fa-check"></i><b>6.2</b> Excel</a></li>
<li class="chapter" data-level="6.3" data-path="auto-report.html"><a href="auto-report.html#powerpoint"><i class="fa fa-check"></i><b>6.3</b> PowerPoint</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="auto-report.html"><a href="auto-report.html#powerpoint-formatting"><i class="fa fa-check"></i><b>6.3.1</b> PowerPoint Formatting</a></li>
<li class="chapter" data-level="6.3.2" data-path="auto-report.html"><a href="auto-report.html#placeholders"><i class="fa fa-check"></i><b>6.3.2</b> Placeholders</a></li>
<li class="chapter" data-level="6.3.3" data-path="auto-report.html"><a href="auto-report.html#text-1"><i class="fa fa-check"></i><b>6.3.3</b> Text</a></li>
<li class="chapter" data-level="6.3.4" data-path="auto-report.html"><a href="auto-report.html#tables"><i class="fa fa-check"></i><b>6.3.4</b> Tables</a></li>
<li class="chapter" data-level="6.3.5" data-path="auto-report.html"><a href="auto-report.html#charts"><i class="fa fa-check"></i><b>6.3.5</b> Charts</a></li>
<li class="chapter" data-level="6.3.6" data-path="auto-report.html"><a href="auto-report.html#mschart-package"><i class="fa fa-check"></i><b>6.3.6</b> mschart Package</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="auto-report.html"><a href="auto-report.html#word"><i class="fa fa-check"></i><b>6.4</b> Word</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="auto-report.html"><a href="auto-report.html#word-documents"><i class="fa fa-check"></i><b>6.4.1</b> Word documents</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Bon Appétit</b></span></li>
<li class="chapter" data-level="7" data-path="example-projects.html"><a href="example-projects.html"><i class="fa fa-check"></i><b>7</b> Example Project: the biscuit study</a>
<ul>
<li class="chapter" data-level="7.1" data-path="example-projects.html"><a href="example-projects.html#products"><i class="fa fa-check"></i><b>7.1</b> Products</a></li>
<li class="chapter" data-level="7.2" data-path="example-projects.html"><a href="example-projects.html#participants"><i class="fa fa-check"></i><b>7.2</b> Participants</a></li>
<li class="chapter" data-level="7.3" data-path="example-projects.html"><a href="example-projects.html#design-of-the-consumer-test"><i class="fa fa-check"></i><b>7.3</b> Design of the consumer test</a></li>
<li class="chapter" data-level="7.4" data-path="example-projects.html"><a href="example-projects.html#sensory-descriptive-analysis-data"><i class="fa fa-check"></i><b>7.4</b> Sensory descriptive analysis data</a></li>
<li class="chapter" data-level="7.5" data-path="example-projects.html"><a href="example-projects.html#summary-of-the-datasets"><i class="fa fa-check"></i><b>7.5</b> Summary of the datasets</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-collection.html"><a href="data-collection.html"><i class="fa fa-check"></i><b>8</b> Data Collection</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-collection.html"><a href="data-collection.html#design-1"><i class="fa fa-check"></i><b>8.1</b> Design</a></li>
<li class="chapter" data-level="8.2" data-path="data-collection.html"><a href="data-collection.html#execute-1"><i class="fa fa-check"></i><b>8.2</b> Execute</a></li>
<li class="chapter" data-level="8.3" data-path="data-collection.html"><a href="data-collection.html#import-1"><i class="fa fa-check"></i><b>8.3</b> Import</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-collection.html"><a href="data-collection.html#importing-structured-excel-file"><i class="fa fa-check"></i><b>8.3.1</b> Importing Structured Excel File</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-collection.html"><a href="data-collection.html#importing-unstructured-excel-file"><i class="fa fa-check"></i><b>8.3.2</b> Importing Unstructured Excel File</a></li>
<li class="chapter" data-level="8.3.3" data-path="data-collection.html"><a href="data-collection.html#import-mult-sheet"><i class="fa fa-check"></i><b>8.3.3</b> Importing Data Stored in Multiple Sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-prep.html"><a href="data-prep.html"><i class="fa fa-check"></i><b>9</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data-prep.html"><a href="data-prep.html#inspect-1"><i class="fa fa-check"></i><b>9.1</b> Inspect</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="data-prep.html"><a href="data-prep.html#data-inspection"><i class="fa fa-check"></i><b>9.1.1</b> Data Inspection</a></li>
<li class="chapter" data-level="9.1.2" data-path="data-prep.html"><a href="data-prep.html#design-inspection"><i class="fa fa-check"></i><b>9.1.2</b> Design Inspection</a></li>
<li class="chapter" data-level="9.1.3" data-path="data-prep.html"><a href="data-prep.html#missing-data-inspection"><i class="fa fa-check"></i><b>9.1.3</b> Missing Data Inspection</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="data-prep.html"><a href="data-prep.html#clean-1"><i class="fa fa-check"></i><b>9.2</b> Clean</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="data-prep.html"><a href="data-prep.html#renaming-variables-1"><i class="fa fa-check"></i><b>9.2.1</b> Renaming Variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="data-prep.html"><a href="data-prep.html#handling-data-type"><i class="fa fa-check"></i><b>9.2.2</b> Handling Data Type</a></li>
<li class="chapter" data-level="9.2.3" data-path="data-prep.html"><a href="data-prep.html#converting-between-types"><i class="fa fa-check"></i><b>9.2.3</b> Converting between Types</a></li>
<li class="chapter" data-level="9.2.4" data-path="data-prep.html"><a href="data-prep.html#handling-missing-values"><i class="fa fa-check"></i><b>9.2.4</b> Handling Missing Values</a></li>
<li class="chapter" data-level="9.2.5" data-path="data-prep.html"><a href="data-prep.html#restructuring-data"><i class="fa fa-check"></i><b>9.2.5</b> Restructuring Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>10</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-analysis.html"><a href="data-analysis.html#sensory-data"><i class="fa fa-check"></i><b>10.1</b> Sensory Data</a></li>
<li class="chapter" data-level="10.2" data-path="data-analysis.html"><a href="data-analysis.html#demographic-and-tfeq-data"><i class="fa fa-check"></i><b>10.2</b> Demographic and TFEQ Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-analysis.html"><a href="data-analysis.html#demographic-data-frequency-and-proportion"><i class="fa fa-check"></i><b>10.2.1</b> Demographic Data: Frequency and Proportion</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-analysis.html"><a href="data-analysis.html#behavioral-data-tfeq-traits"><i class="fa fa-check"></i><b>10.2.2</b> Behavioral Data: TFEQ Traits</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="value-delivery.html"><a href="value-delivery.html"><i class="fa fa-check"></i><b>11</b> Value Delivery</a>
<ul>
<li class="chapter" data-level="11.1" data-path="value-delivery.html"><a href="value-delivery.html#communicate-1"><i class="fa fa-check"></i><b>11.1</b> Communicate</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="value-delivery.html"><a href="value-delivery.html#know-your-audience"><i class="fa fa-check"></i><b>11.1.1</b> Know Your Audience</a></li>
<li class="chapter" data-level="11.1.2" data-path="value-delivery.html"><a href="value-delivery.html#pick-the-correct-format"><i class="fa fa-check"></i><b>11.1.2</b> Pick the Correct Format</a></li>
<li class="chapter" data-level="11.1.3" data-path="value-delivery.html"><a href="value-delivery.html#storytelling"><i class="fa fa-check"></i><b>11.1.3</b> Storytelling</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="value-delivery.html"><a href="value-delivery.html#reformulate-1"><i class="fa fa-check"></i><b>11.2</b> Reformulate</a></li>
</ul></li>
<li class="part"><span><b>Haute Cuisine</b></span></li>
<li class="chapter" data-level="12" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>12</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="machine-learning.html"><a href="machine-learning.html#overview"><i class="fa fa-check"></i><b>12.1</b> Overview</a></li>
<li class="chapter" data-level="12.2" data-path="machine-learning.html"><a href="machine-learning.html#key-topics"><i class="fa fa-check"></i><b>12.2</b> Key Topics</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="machine-learning.html"><a href="machine-learning.html#model-validation"><i class="fa fa-check"></i><b>12.2.1</b> Model Validation</a></li>
<li class="chapter" data-level="12.2.2" data-path="machine-learning.html"><a href="machine-learning.html#unsupervised-learning"><i class="fa fa-check"></i><b>12.2.2</b> Unsupervised learning</a></li>
<li class="chapter" data-level="12.2.3" data-path="machine-learning.html"><a href="machine-learning.html#semisupervised-learning"><i class="fa fa-check"></i><b>12.2.3</b> Semisupervised learning</a></li>
<li class="chapter" data-level="12.2.4" data-path="machine-learning.html"><a href="machine-learning.html#supervised-learning"><i class="fa fa-check"></i><b>12.2.4</b> Supervised learning</a></li>
<li class="chapter" data-level="12.2.5" data-path="machine-learning.html"><a href="machine-learning.html#interpretability"><i class="fa fa-check"></i><b>12.2.5</b> Interpretability</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="machine-learning.html"><a href="machine-learning.html#common-applications"><i class="fa fa-check"></i><b>12.3</b> Common Applications</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="machine-learning.html"><a href="machine-learning.html#predicting-sensory-profiles-from-instrumental-data"><i class="fa fa-check"></i><b>12.3.1</b> Predicting sensory profiles from instrumental data</a></li>
<li class="chapter" data-level="12.3.2" data-path="machine-learning.html"><a href="machine-learning.html#predicting-consumer-response-from-sensory-profiles"><i class="fa fa-check"></i><b>12.3.2</b> Predicting consumer response from sensory profiles</a></li>
<li class="chapter" data-level="12.3.3" data-path="machine-learning.html"><a href="machine-learning.html#characterizing-consumer-clusters"><i class="fa fa-check"></i><b>12.3.3</b> Characterizing consumer clusters</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="machine-learning.html"><a href="machine-learning.html#code-examples"><i class="fa fa-check"></i><b>12.4</b> Code Examples</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="machine-learning.html"><a href="machine-learning.html#data-prep-1"><i class="fa fa-check"></i><b>12.4.1</b> Data Prep</a></li>
<li class="chapter" data-level="12.4.2" data-path="machine-learning.html"><a href="machine-learning.html#classification-code"><i class="fa fa-check"></i><b>12.4.2</b> Classification Code</a></li>
<li class="chapter" data-level="12.4.3" data-path="machine-learning.html"><a href="machine-learning.html#regression-code"><i class="fa fa-check"></i><b>12.4.3</b> Regression Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>13</b> Text Analysis</a>
<ul>
<li class="chapter" data-level="13.1" data-path="text-analysis.html"><a href="text-analysis.html#overview-1"><i class="fa fa-check"></i><b>13.1</b> Overview</a></li>
<li class="chapter" data-level="13.2" data-path="text-analysis.html"><a href="text-analysis.html#key-topics-1"><i class="fa fa-check"></i><b>13.2</b> Key Topics</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="text-analysis.html"><a href="text-analysis.html#data-sources"><i class="fa fa-check"></i><b>13.2.1</b> Data Sources</a></li>
<li class="chapter" data-level="13.2.2" data-path="text-analysis.html"><a href="text-analysis.html#working-with-strings"><i class="fa fa-check"></i><b>13.2.2</b> Working with Strings</a></li>
<li class="chapter" data-level="13.2.3" data-path="text-analysis.html"><a href="text-analysis.html#tokenizing"><i class="fa fa-check"></i><b>13.2.3</b> Tokenizing</a></li>
<li class="chapter" data-level="13.2.4" data-path="text-analysis.html"><a href="text-analysis.html#lemmatization-stemming-and-stop-word-removal"><i class="fa fa-check"></i><b>13.2.4</b> Lemmatization, stemming, and stop word removal</a></li>
<li class="chapter" data-level="13.2.5" data-path="text-analysis.html"><a href="text-analysis.html#part-of-speech-tagging"><i class="fa fa-check"></i><b>13.2.5</b> Part of Speech Tagging</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="text-analysis.html"><a href="text-analysis.html#common-applications-1"><i class="fa fa-check"></i><b>13.3</b> Common Applications</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="text-analysis.html"><a href="text-analysis.html#frequency-counts-and-summary-statistics"><i class="fa fa-check"></i><b>13.3.1</b> Frequency counts and summary statistics</a></li>
<li class="chapter" data-level="13.3.2" data-path="text-analysis.html"><a href="text-analysis.html#word-clouds"><i class="fa fa-check"></i><b>13.3.2</b> Word clouds</a></li>
<li class="chapter" data-level="13.3.3" data-path="text-analysis.html"><a href="text-analysis.html#contrast-plots"><i class="fa fa-check"></i><b>13.3.3</b> Contrast plots</a></li>
<li class="chapter" data-level="13.3.4" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis"><i class="fa fa-check"></i><b>13.3.4</b> Sentiment analysis</a></li>
<li class="chapter" data-level="13.3.5" data-path="text-analysis.html"><a href="text-analysis.html#topic-modeling"><i class="fa fa-check"></i><b>13.3.5</b> Topic Modeling</a></li>
<li class="chapter" data-level="13.3.6" data-path="text-analysis.html"><a href="text-analysis.html#bigrams-and-word-graphs"><i class="fa fa-check"></i><b>13.3.6</b> Bigrams and word graphs</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="text-analysis.html"><a href="text-analysis.html#code-examples-1"><i class="fa fa-check"></i><b>13.4</b> Code Examples</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="text-analysis.html"><a href="text-analysis.html#statistical-entities"><i class="fa fa-check"></i><b>13.4.1</b> Statistical entities</a></li>
<li class="chapter" data-level="13.4.2" data-path="text-analysis.html"><a href="text-analysis.html#analysis-of-frequencies-and-term-frequency-document"><i class="fa fa-check"></i><b>13.4.2</b> Analysis of Frequencies and term-frequency document</a></li>
<li class="chapter" data-level="13.4.3" data-path="text-analysis.html"><a href="text-analysis.html#futher-analysis-of-the-words"><i class="fa fa-check"></i><b>13.4.3</b> Futher Analysis of the words</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="linear-programming.html"><a href="linear-programming.html"><i class="fa fa-check"></i><b>14</b> Linear Programming</a>
<ul>
<li class="chapter" data-level="14.1" data-path="linear-programming.html"><a href="linear-programming.html#overview-2"><i class="fa fa-check"></i><b>14.1</b> Overview</a></li>
<li class="chapter" data-level="14.2" data-path="linear-programming.html"><a href="linear-programming.html#common-applications-2"><i class="fa fa-check"></i><b>14.2</b> Common Applications</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="linear-programming.html"><a href="linear-programming.html#experimental-design"><i class="fa fa-check"></i><b>14.2.1</b> Experimental Design</a></li>
<li class="chapter" data-level="14.2.2" data-path="linear-programming.html"><a href="linear-programming.html#sample-selection"><i class="fa fa-check"></i><b>14.2.2</b> Sample Selection</a></li>
<li class="chapter" data-level="14.2.3" data-path="linear-programming.html"><a href="linear-programming.html#compact-letter-displays"><i class="fa fa-check"></i><b>14.2.3</b> Compact Letter Displays</a></li>
<li class="chapter" data-level="14.2.4" data-path="linear-programming.html"><a href="linear-programming.html#turf-analysis"><i class="fa fa-check"></i><b>14.2.4</b> TURF Analysis</a></li>
<li class="chapter" data-level="14.2.5" data-path="linear-programming.html"><a href="linear-programming.html#bundle-optimization"><i class="fa fa-check"></i><b>14.2.5</b> Bundle Optimization</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="linear-programming.html"><a href="linear-programming.html#code-examples-2"><i class="fa fa-check"></i><b>14.3</b> Code Examples</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="pipelines.html"><a href="pipelines.html"><i class="fa fa-check"></i><b>15</b> Pipelines</a></li>
<li class="chapter" data-level="16" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i><b>16</b> Dashboards</a></li>
<li class="chapter" data-level="17" data-path="graph-db.html"><a href="graph-db.html"><i class="fa fa-check"></i><b>17</b> Graph Databases</a></li>
<li class="appendix"><span><b>À la Carte</b></span></li>
<li class="chapter" data-level="A" data-path="start-R.html"><a href="start-R.html"><i class="fa fa-check"></i><b>A</b> Apéritifs (Getting Started)</a>
<ul>
<li class="chapter" data-level="A.1" data-path="start-R.html"><a href="start-R.html#r"><i class="fa fa-check"></i><b>A.1</b> R</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="start-R.html"><a href="start-R.html#why-learn-a-programming-language"><i class="fa fa-check"></i><b>A.1.1</b> Why Learn a Programming Language?</a></li>
<li class="chapter" data-level="A.1.2" data-path="start-R.html"><a href="start-R.html#why-r"><i class="fa fa-check"></i><b>A.1.2</b> Why R?</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="start-R.html"><a href="start-R.html#why-r-1"><i class="fa fa-check"></i><b>A.2</b> Why R?</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="start-R.html"><a href="start-R.html#steps-to-install-r"><i class="fa fa-check"></i><b>A.2.1</b> Steps to Install R</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="start-R.html"><a href="start-R.html#rstudio"><i class="fa fa-check"></i><b>A.3</b> RStudio</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="start-R.html"><a href="start-R.html#steps-to-install-rstudio"><i class="fa fa-check"></i><b>A.3.1</b> Steps to Install RStudio</a></li>
<li class="chapter" data-level="A.3.2" data-path="start-R.html"><a href="start-R.html#create-a-local-project"><i class="fa fa-check"></i><b>A.3.2</b> Create a Local Project</a></li>
<li class="chapter" data-level="A.3.3" data-path="start-R.html"><a href="start-R.html#install-and-load-packages"><i class="fa fa-check"></i><b>A.3.3</b> Install and Load Packages</a></li>
<li class="chapter" data-level="A.3.4" data-path="start-R.html"><a href="start-R.html#run-sample-code"><i class="fa fa-check"></i><b>A.3.4</b> Run Sample Code</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="start-R.html"><a href="start-R.html#git-and-github"><i class="fa fa-check"></i><b>A.4</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="start-R.html"><a href="start-R.html#git"><i class="fa fa-check"></i><b>A.4.1</b> Git</a></li>
<li class="chapter" data-level="A.4.2" data-path="start-R.html"><a href="start-R.html#github"><i class="fa fa-check"></i><b>A.4.2</b> GitHub</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="start-R.html"><a href="start-R.html#raw-material"><i class="fa fa-check"></i><b>A.5</b> RAW MATERIAL</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="start-R.html"><a href="start-R.html#principles"><i class="fa fa-check"></i><b>A.5.1</b> Principles</a></li>
<li class="chapter" data-level="A.5.2" data-path="start-R.html"><a href="start-R.html#tools"><i class="fa fa-check"></i><b>A.5.2</b> Tools</a></li>
<li class="chapter" data-level="A.5.3" data-path="start-R.html"><a href="start-R.html#documentation"><i class="fa fa-check"></i><b>A.5.3</b> Documentation</a></li>
<li class="chapter" data-level="A.5.4" data-path="start-R.html"><a href="start-R.html#version-control"><i class="fa fa-check"></i><b>A.5.4</b> Version control</a></li>
<li class="chapter" data-level="A.5.5" data-path="start-R.html"><a href="start-R.html#online-repositories-for-team-collaboration"><i class="fa fa-check"></i><b>A.5.5</b> Online repositories for team collaboration</a></li>
<li class="chapter" data-level="A.5.6" data-path="start-R.html"><a href="start-R.html#building-a-code-base"><i class="fa fa-check"></i><b>A.5.6</b> Building a code base</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>B</b> Digestifs (Next Steps)</a>
<ul>
<li class="chapter" data-level="B.1" data-path="next-steps.html"><a href="next-steps.html#sensory-analysis-in-r"><i class="fa fa-check"></i><b>B.1</b> Sensory Analysis in R</a></li>
<li class="chapter" data-level="B.2" data-path="next-steps.html"><a href="next-steps.html#other-recommended-resources"><i class="fa fa-check"></i><b>B.2</b> Other Recommended Resources</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="next-steps.html"><a href="next-steps.html#r-for-data-science"><i class="fa fa-check"></i><b>B.2.1</b> R for Data Science</a></li>
<li class="chapter" data-level="B.2.2" data-path="next-steps.html"><a href="next-steps.html#hands-on-machine-learning-with-r"><i class="fa fa-check"></i><b>B.2.2</b> Hands-On Machine Learning with R</a></li>
<li class="chapter" data-level="B.2.3" data-path="next-steps.html"><a href="next-steps.html#factoextra"><i class="fa fa-check"></i><b>B.2.3</b> FactoExtra</a></li>
<li class="chapter" data-level="B.2.4" data-path="next-steps.html"><a href="next-steps.html#r-graphics-cookbook"><i class="fa fa-check"></i><b>B.2.4</b> R Graphics Cookbook</a></li>
<li class="chapter" data-level="B.2.5" data-path="next-steps.html"><a href="next-steps.html#storytelling-with-data"><i class="fa fa-check"></i><b>B.2.5</b> Storytelling with Data</a></li>
<li class="chapter" data-level="B.2.6" data-path="next-steps.html"><a href="next-steps.html#text-mining-wtih-r"><i class="fa fa-check"></i><b>B.2.6</b> Text Mining wtih R</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="next-steps.html"><a href="next-steps.html#python-and-other-languages"><i class="fa fa-check"></i><b>B.3</b> Python and Other Languages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for Sensory and Consumer Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-analysis" class="section level1" number="10">
<h1><span class="header-section-number">Chapter 10</span> Data Analysis</h1>
<p>In this chapter, the different techniques presented in <a href="data-manip.html#data-manip">4</a> will be applied to our biscuit data.
The analyses presented are non-exhaustive, but tackle some well-known analyses often used in sensory and consumer science.</p>
<p>The following sections are divided based on the type of data to consider and their corresponding analysis.</p>
<div id="sensory-data" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Sensory Data</h2>
<p>Let’s start with the analysis of our sensory data. If not done already, import the file <em>Sensory Profile.xlsx</em>.
To do so, we need the <code>{here}</code> and <code>{readxl}</code> packages. Since most of the analyses we are going to perform require tools from the <code>{tidyverse}</code>, we also load this group of packages.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-analysis.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb79-2"><a href="data-analysis.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb79-3"><a href="data-analysis.html#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb79-4"><a href="data-analysis.html#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="data-analysis.html#cb79-5" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;Sensory Profile.xlsx&quot;</span>) </span>
<span id="cb79-6"><a href="data-analysis.html#cb79-6" aria-hidden="true" tabindex="-1"></a>p_info <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet =</span> <span class="st">&quot;Product Info&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-7"><a href="data-analysis.html#cb79-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Type)</span>
<span id="cb79-8"><a href="data-analysis.html#cb79-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-9"><a href="data-analysis.html#cb79-9" aria-hidden="true" tabindex="-1"></a>sensory <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Data&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-10"><a href="data-analysis.html#cb79-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(p_info, <span class="at">by=</span><span class="st">&quot;Product&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-11"><a href="data-analysis.html#cb79-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Protein<span class="sc">:</span>Fiber, <span class="at">.after=</span>Product)</span></code></pre></div>
<p>The first analysis often done consists in evaluate whether there are differences between samples for the different attributes. This is done through Analysis of Variance (ANOVA) and can be done using the <code>lm()</code> or <code>aov()</code> functions.
If we would want to run the ANOVA for <code>Shiny</code>, the code would look like this (here we consider the 2-way ANOVA evaluating the Product and Assessor effects):</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-analysis.html#cb80-1" aria-hidden="true" tabindex="-1"></a>shiny_aov <span class="ot">&lt;-</span> <span class="fu">lm</span>(Shiny <span class="sc">~</span> Product <span class="sc">+</span> Judge, <span class="at">data=</span>sensory)</span>
<span id="cb80-2"><a href="data-analysis.html#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(shiny_aov)</span></code></pre></div>
<p>We could duplicate this code for each single attributes, but 1. this would be quite tedious if the number of attributes increase, 2. it is sensitive to the way the variables are being called, meaning that 3. it would usually not be applicable to other dataset. Instead, we propose two solutions, one using <code>split()</code> combined with <code>map()</code> and one involving <code>nest_by()</code> to run this analysis automatically.</p>
<p>For both these solutions, the dataset should be in the long and short form, which can be obtained using <code>pivot_longer()</code>:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-analysis.html#cb81-1" aria-hidden="true" tabindex="-1"></a>senso_aov_data <span class="ot">&lt;-</span> sensory <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="data-analysis.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(Shiny<span class="sc">:</span>Melting, <span class="at">names_to=</span><span class="st">&quot;Attribute&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;Score&quot;</span>)</span></code></pre></div>
<p>From this structure, the first approach consists in splitting the data by attribute. Once done, we run for each sub-data the ANOVA (the model is then defined as <code>Score ~ Product + Judge</code>), and we extract the results of interest using the <code>{broom}</code> package<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>
Ultimately, the results can be combined again using <code>enframe()</code> and <code>unnest()</code>.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="data-analysis.html#cb82-1" aria-hidden="true" tabindex="-1"></a>senso_aov1 <span class="ot">&lt;-</span> senso_aov_data <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="data-analysis.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Attribute) <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="data-analysis.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(data){</span>
<span id="cb82-4"><a href="data-analysis.html#cb82-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-5"><a href="data-analysis.html#cb82-5" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="fu">anova</span>(<span class="fu">lm</span>(Score <span class="sc">~</span> Product <span class="sc">+</span> Judge, <span class="at">data=</span>data)))</span>
<span id="cb82-6"><a href="data-analysis.html#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(res)</span>
<span id="cb82-7"><a href="data-analysis.html#cb82-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-8"><a href="data-analysis.html#cb82-8" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span> </span>
<span id="cb82-9"><a href="data-analysis.html#cb82-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name=</span><span class="st">&quot;Attribute&quot;</span>, <span class="at">value=</span><span class="st">&quot;res&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb82-10"><a href="data-analysis.html#cb82-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(res)</span></code></pre></div>
<p>The second approach nests the analysis by attribute (meaning the analysis is done for each attribute separately, a bit like <code>group_by()</code>): in this case, we create a new variable called <code>mod</code> which takes the results of the ANOVA.
Once the analysis is done, we summarize the info stored in <code>mod</code> by converting into a tibble using <code>{broom}</code>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-analysis.html#cb83-1" aria-hidden="true" tabindex="-1"></a>senso_aov2 <span class="ot">&lt;-</span> senso_aov_data <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="data-analysis.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest_by</span>(Attribute) <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="data-analysis.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mod =</span> <span class="fu">list</span>(<span class="fu">lm</span>(Score <span class="sc">~</span> Product <span class="sc">+</span> Judge, <span class="at">data=</span>data))) <span class="sc">%&gt;%</span> </span>
<span id="cb83-4"><a href="data-analysis.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="fu">anova</span>(mod))) <span class="sc">%&gt;%</span> </span>
<span id="cb83-5"><a href="data-analysis.html#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>The two approaches return the exact same results. Let’s dig into the results by checking for which attributes there are no significant differences at 5%. Since the <code>tidy()</code> function from <code>{broom}</code> tidies the data, all the usual data transformation can be performed. Let’s filter only the <code>Product</code> effect under <code>term</code>, and let’s order decreasingly the <code>p.value</code>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-analysis.html#cb84-1" aria-hidden="true" tabindex="-1"></a>senso_aov1 <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="data-analysis.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">&quot;Product&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a href="data-analysis.html#cb84-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Attribute, statistic, p.value) <span class="sc">%&gt;%</span> </span>
<span id="cb84-4"><a href="data-analysis.html#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(p.value)) <span class="sc">%&gt;%</span> </span>
<span id="cb84-5"><a href="data-analysis.html#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p.value =</span> <span class="fu">round</span>(p.value, <span class="dv">3</span>))</span></code></pre></div>
<p>As can be seen, the products do not show any significant differences at 5% for 4 attributes: <code>Cereal flavor</code> (p=0.294), <code>Roasted odor</code> (p=0.193), <code>Astrigent</code> (p=0.116), and <code>Sticky</code> (p=0.101).</p>
<p>To visualize graphically the results of the ANOVA, a barchart representing the F-value can be generated. We recommend to order the attributes based on their decreasing F-values, and by colour-coding them based on their significance:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-analysis.html#cb85-1" aria-hidden="true" tabindex="-1"></a>senso_aov1 <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="data-analysis.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">&quot;Product&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb85-3"><a href="data-analysis.html#cb85-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Attribute, statistic, p.value) <span class="sc">%&gt;%</span> </span>
<span id="cb85-4"><a href="data-analysis.html#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Signif =</span> <span class="fu">ifelse</span>(p.value <span class="sc">&lt;=</span> <span class="fl">0.05</span>, <span class="st">&quot;Signif.&quot;</span>, <span class="st">&quot;Not Signif.&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb85-5"><a href="data-analysis.html#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Signif =</span> <span class="fu">factor</span>(Signif, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Signif.&quot;</span>, <span class="st">&quot;Not Signif.&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb85-6"><a href="data-analysis.html#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Attribute, statistic), <span class="at">y=</span>statistic, <span class="at">fill=</span>Signif))<span class="sc">+</span></span>
<span id="cb85-7"><a href="data-analysis.html#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb85-8"><a href="data-analysis.html#cb85-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;Signif.&quot;</span><span class="ot">=</span><span class="st">&quot;forestgreen&quot;</span>, <span class="st">&quot;Not Signif.&quot;</span><span class="ot">=</span><span class="st">&quot;orangered2&quot;</span>))<span class="sc">+</span></span>
<span id="cb85-9"><a href="data-analysis.html#cb85-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Sensory Attriubtes&quot;</span>,<span class="st">&quot;(The attributes are sorted according to the F-values)&quot;</span>)<span class="sc">+</span></span>
<span id="cb85-10"><a href="data-analysis.html#cb85-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb85-11"><a href="data-analysis.html#cb85-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb85-12"><a href="data-analysis.html#cb85-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;F-values&quot;</span>)<span class="sc">+</span></span>
<span id="cb85-13"><a href="data-analysis.html#cb85-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p>It appears that the different biscuits differ the most (top 5) for <code>Initial hardness</code>, <code>Shiny</code>, <code>Dairy flavor</code>, <code>External color intensity</code>, and <code>Thickness</code>.</p>
<p>Note that as an alternative, we could use the <code>decat()</code> function from the <code>{SensoMineR}</code> package. This function performs ANOVA on a set of attributes (presented in subsequent columns), followed by some t-test that highlights which samples are significantly more (or less) intense than average for each attribute.</p>
<p>Once the significant differences have been checked, a follow-up analysis consists in visualizing these differences. Such visualization is often done through Principal Component Analysis (PCA).</p>
<p>In practice, PCA is performed on the mean table crossing the products in rows, and the sensory attributes in columns. In <a href="data-manip.html#data-manip">4</a>, many different approaches to generate such table have been proposed:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-analysis.html#cb86-1" aria-hidden="true" tabindex="-1"></a>senso_mean <span class="ot">&lt;-</span> sensory <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="data-analysis.html#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(Shiny<span class="sc">:</span>Melting, <span class="at">names_to=</span><span class="st">&quot;Attribute&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;Score&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="data-analysis.html#cb86-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Judge) <span class="sc">%&gt;%</span> </span>
<span id="cb86-4"><a href="data-analysis.html#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>Attribute, <span class="at">values_from=</span>Score, <span class="at">values_fn=</span>mean)</span></code></pre></div>
<p>Such table can be submitted to PCA. To do so, the <code>PCA()</code> function from the <code>{FactoMineR}</code> is used.
Few important remarks: The <code>PCA()</code> function usually contains only numerical data, the product names being often set as row names in a data frame. This is something that can easily be taken care of through the <code>column_to_rownames()</code> function from the <code>{tibble}</code> package. Additionally, one might notice that we still have two qualitative variables: <code>Protein</code> and <code>Fiber</code>. These 2 variables can either be removed prior to running the analysis, or better, projected as supplementary variables through the <code>quali.sup</code> parameter from <code>PCA()</code>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-analysis.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb87-2"><a href="data-analysis.html#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="data-analysis.html#cb87-3" aria-hidden="true" tabindex="-1"></a>senso_pca <span class="ot">&lt;-</span> senso_mean <span class="sc">%&gt;%</span> </span>
<span id="cb87-4"><a href="data-analysis.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb87-5"><a href="data-analysis.html#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="at">var=</span><span class="st">&quot;Product&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb87-6"><a href="data-analysis.html#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">PCA</span>(., <span class="at">quali.sup=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">graph=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>The <code>PCA()</code> function can generate the plots either in <code>{base}</code> R language, or in <code>{ggplot2}</code>. However, we like to use a complementary package called <code>{factoextra}</code> which re-creates any plot from <code>{FactoMineR}</code> (and more) as a <code>ggplot()</code> object. for <code>PCA()</code>, the main function used to re-create the plots are <code>fviz_pca_ind()</code> for the products’ map, <code>fviz_pca_var()</code> for the variables’ representation, and <code>fviz_pca_biplot()</code> for the biplot combining both.
Since we have two qualitative variables, let’s take advantage of them by coloring for each of them the products based on their content. This can easily be done through the <code>habillage</code> parameter from <code>fviz_pca_ind()</code>, which can either take a numerical value (position) of the name of the qualitative variable.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="data-analysis.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb88-2"><a href="data-analysis.html#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="data-analysis.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_ind</span>(senso_pca, <span class="at">habillage=</span><span class="st">&quot;Protein&quot;</span>, <span class="at">repel=</span><span class="cn">TRUE</span>)</span>
<span id="cb88-4"><a href="data-analysis.html#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_ind</span>(senso_pca, <span class="at">habillage=</span><span class="dv">2</span>, <span class="at">repel=</span><span class="cn">TRUE</span>)</span>
<span id="cb88-5"><a href="data-analysis.html#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_var</span>(senso_pca)</span>
<span id="cb88-6"><a href="data-analysis.html#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_biplot</span>(senso_pca)</span></code></pre></div>
<p>On the first dimension, <code>P10</code> is opposed to <code>P09</code> and <code>P03</code> as it is more intense for attributes such as <code>Sweet</code>, and <code>Dairy flavor</code> for example, and less intense for attributes such as <code>Dry in mouth</code> and <code>External color intensity</code>. On the second dimension, <code>P08</code>, <code>P06</code>, and <code>POpt</code> are opposed to <code>P02</code> and <code>P07</code> as they score higher for <code>Qty of inclusions</code>, and <code>Initial hardness</code>, and score lower for <code>RawDough flavor</code> and <code>Shiny</code>.</p>
</div>
<div id="demographic-and-tfeq-data" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Demographic and TFEQ Data</h2>
<p>In the <em>TFEQ.xlsx</em> file, descriptive (e.g. demographic) and behavioral (e.g. TFEQ) information regarding the consumers is being stored.</p>
<p>A quick look at this file shows that it contains three tabs denoted as <em>Data</em>, <em>Variables</em>, and <em>Levels</em>:</p>
<ul>
<li><em>Data</em> contains the data, coded;</li>
<li><em>Variables</em> provides information (e.g. name, information) related to the different variables present in Data;</li>
<li><em>Levels</em> provides information about the different levels each variable can take.</li>
</ul>
<p>Let’s start with importing this data set. The importation is done in multiple step as following:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-analysis.html#cb89-1" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>, <span class="st">&quot;TFEQ.xlsx&quot;</span>)</span>
<span id="cb89-2"><a href="data-analysis.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">excel_sheets</span>(file_path)</span>
<span id="cb89-3"><a href="data-analysis.html#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="data-analysis.html#cb89-4" aria-hidden="true" tabindex="-1"></a>demo_var <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Variables&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-5"><a href="data-analysis.html#cb89-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Code, Name)</span>
<span id="cb89-6"><a href="data-analysis.html#cb89-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-7"><a href="data-analysis.html#cb89-7" aria-hidden="true" tabindex="-1"></a>demo_lev <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Levels&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-8"><a href="data-analysis.html#cb89-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Question, Code, Levels) <span class="sc">%&gt;%</span> </span>
<span id="cb89-9"><a href="data-analysis.html#cb89-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(demo_var, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;Question&quot;</span><span class="ot">=</span><span class="st">&quot;Code&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-10"><a href="data-analysis.html#cb89-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Question)</span>
<span id="cb89-11"><a href="data-analysis.html#cb89-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-12"><a href="data-analysis.html#cb89-12" aria-hidden="true" tabindex="-1"></a>demographic <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Data&quot;</span>, <span class="at">skip=</span><span class="dv">1</span>, <span class="at">col_names=</span><span class="fu">unlist</span>(demo_var<span class="sc">$</span>Name))</span></code></pre></div>
<div id="demographic-data-frequency-and-proportion" class="section level3" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Demographic Data: Frequency and Proportion</h3>
<p>For this demographic data file, we are interested to see the partition of consumers for each of the descriptive variables. More precisely, we would like to know the frequency and proportion (in percentage) attached to each level of <code>Living area</code>, <code>Housing</code>, <code>Income range</code>, and <code>Occupation</code>.</p>
<p>To obtain such table, let’s start by only selecting these particular columns together with <code>Judge</code>.
Since the data is coded, let’s decode it using the information stored in <code>demo_lev</code>: we could automatically recode each variable using <code>mutate()</code> and <code>factor()</code>. However, we prefer here to use <code>pivot_longer()</code> to create a long thin tibble, and then to merge this table with <code>demo_lev</code> by <code>Question</code> and <code>Response</code> using <code>inner_join()</code> instead. Once done, we can aggregate the results by <code>Question</code> and <code>Levels</code> (since we want to use the level information, not their code) and compute the frequency (<code>n()</code>) and the proportion (<code>N/sum(N)</code>)<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="data-analysis.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(formattable)</span>
<span id="cb90-2"><a href="data-analysis.html#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="data-analysis.html#cb90-3" aria-hidden="true" tabindex="-1"></a>demog_reduced <span class="ot">&lt;-</span> demographic <span class="sc">%&gt;%</span> </span>
<span id="cb90-4"><a href="data-analysis.html#cb90-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Judge, <span class="st">`</span><span class="at">Living area</span><span class="st">`</span>, Housing, <span class="st">`</span><span class="at">Income range</span><span class="st">`</span>, <span class="st">`</span><span class="at">Occupation</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb90-5"><a href="data-analysis.html#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>Judge, <span class="at">names_to=</span><span class="st">&quot;Question&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;Response&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb90-6"><a href="data-analysis.html#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(demo_lev, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;Question&quot;</span><span class="ot">=</span><span class="st">&quot;Name&quot;</span>, <span class="st">&quot;Response&quot;</span><span class="ot">=</span><span class="st">&quot;Code&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb90-7"><a href="data-analysis.html#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Question, Levels) <span class="sc">%&gt;%</span> </span>
<span id="cb90-8"><a href="data-analysis.html#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb90-9"><a href="data-analysis.html#cb90-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Pct =</span> <span class="fu">percent</span>(N<span class="sc">/</span><span class="fu">sum</span>(N), <span class="at">digits=</span>1L)) <span class="sc">%&gt;%</span> </span>
<span id="cb90-10"><a href="data-analysis.html#cb90-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>To better visualize these different proportions, histograms are often considered. Such histograms can be obtained by splitting <code>demog_reduced</code> by <code>Question</code> and by creating in each case an histogram using either <code>N</code> or <code>Pct</code> (we are using <code>Pct</code>)<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>. Of course, we automate this across all questions using <code>map()</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data-analysis.html#cb91-1" aria-hidden="true" tabindex="-1"></a>demog_reduced <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="data-analysis.html#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Question) <span class="sc">%&gt;%</span> </span>
<span id="cb91-3"><a href="data-analysis.html#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(data){</span>
<span id="cb91-4"><a href="data-analysis.html#cb91-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-5"><a href="data-analysis.html#cb91-5" aria-hidden="true" tabindex="-1"></a>    var <span class="ot">=</span> <span class="fu">as.character</span>(<span class="fu">unlist</span>(data<span class="sc">$</span>Question))</span>
<span id="cb91-6"><a href="data-analysis.html#cb91-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-7"><a href="data-analysis.html#cb91-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Levels, Pct), <span class="at">y=</span>Pct, <span class="at">label=</span>Pct))<span class="sc">+</span></span>
<span id="cb91-8"><a href="data-analysis.html#cb91-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="st">&quot;grey50&quot;</span>)<span class="sc">+</span></span>
<span id="cb91-9"><a href="data-analysis.html#cb91-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> Pct<span class="sc">/</span><span class="dv">2</span>), <span class="at">colour=</span><span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb91-10"><a href="data-analysis.html#cb91-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb91-11"><a href="data-analysis.html#cb91-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ylab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb91-12"><a href="data-analysis.html#cb91-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggtitle</span>(var)<span class="sc">+</span></span>
<span id="cb91-13"><a href="data-analysis.html#cb91-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb91-14"><a href="data-analysis.html#cb91-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>()</span>
<span id="cb91-15"><a href="data-analysis.html#cb91-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-16"><a href="data-analysis.html#cb91-16" aria-hidden="true" tabindex="-1"></a>  })</span></code></pre></div>
</div>
<div id="behavioral-data-tfeq-traits" class="section level3" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> Behavioral Data: TFEQ Traits</h3>
<p>In the same data set, consumers also answered some behavioral questions that reflects on their relation to food. These questions can be categorized into three groups: Disinhibitor (variables starting with <code>D</code>), Restriction (variables starting with <code>R</code>), and Hunger (variables starting with <code>H</code>).</p>
<p>Let’s start by selecting all these variables. We could use <code>select()</code> combined with <code>starts_with("D")</code>, <code>starts_with("R")</code>, and <code>starts_with("H")</code>, but this solution is not satisfying since it can also seelct other variables that would start with any of these letters (e.g. Housing). Since the variables are all well structured (the all start with the letters D, R, or H, followed by a number), the use of a regular expression is more appropriate.</p>
<p>In practice, generating regular expression can be quite complex as it is an abstract concept which follow very specific rules. Fortunately, the package <code>{RVerbalExpression}</code> is a great assistant as it generates the regular expression for you thanks to understandable functions. First, we initiate the regular expression by calling the function <code>rx()</code> to which we add that we first want any variables that start with any of the letter R, D, or H, followed by a number (or more, as values go from 1 to 21). This can be done using the following code:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-analysis.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RVerbalExpressions)</span>
<span id="cb92-2"><a href="data-analysis.html#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="data-analysis.html#cb92-3" aria-hidden="true" tabindex="-1"></a>rdh <span class="ot">&lt;-</span> <span class="fu">rx</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb92-4"><a href="data-analysis.html#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rx_either_of</span>(<span class="fu">c</span>(<span class="st">&quot;R&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;H&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb92-5"><a href="data-analysis.html#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rx_digit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb92-6"><a href="data-analysis.html#cb92-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rx_one_or_more</span>()</span>
<span id="cb92-7"><a href="data-analysis.html#cb92-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-8"><a href="data-analysis.html#cb92-8" aria-hidden="true" tabindex="-1"></a>rdh</span></code></pre></div>
<p><code>rdh</code> contains the regular expression that we need. We can then <code>dplyr::select()</code> any variable that fits our regular expression by using the function <code>matches()</code>.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-analysis.html#cb93-1" aria-hidden="true" tabindex="-1"></a>demographic <span class="sc">%&gt;%</span> </span>
<span id="cb93-2"><a href="data-analysis.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">matches</span>(rdh))</span></code></pre></div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="9">
<li id="fn9"><p>The <code>{broom}</code> package is a very useful package that convert statistical objects into tidy tables.<a href="data-analysis.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>We use the package <code>{formattable}</code> to print the results in percentage using one decimal. As an alternative, we could have used <code>percent()</code> from the <code>{scales}</code> package.<a href="data-analysis.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>Here, the histograms are ordered decreasingly (<code>reorder</code>) and are represented horizontally (<code>coord_flip()</code>).<a href="data-analysis.html#fnref11" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-prep.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="value-delivery.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["i2ds4scc_bookdown.pdf", "i2ds4scc_bookdown.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
