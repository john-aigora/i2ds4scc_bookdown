<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Data Visualization | Data Science for Sensory and Consumer Scientists</title>
  <meta name="description" content="Open development of data science book for sensory and consumer scientists." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Data Visualization | Data Science for Sensory and Consumer Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Open development of data science book for sensory and consumer scientists." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Data Visualization | Data Science for Sensory and Consumer Scientists" />
  
  <meta name="twitter:description" content="Open development of data science book for sensory and consumer scientists." />
  

<meta name="author" content="John Ennis, Julien Delarue, and Thierry Worch" />


<meta name="date" content="2022-01-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-manip.html"/>
<link rel="next" href="auto-report.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science for Sensory and Consumer Scientists</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-should-read-this-book"><i class="fa fa-check"></i>Who Should Read This Book?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i>How to Use This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="bienvenue.html"><a href="bienvenue.html"><i class="fa fa-check"></i><b>1</b> Bienvenue!</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#why-data-science-for-sensory-and-consumer-science"><i class="fa fa-check"></i>Why Data Science for Sensory and Consumer Science?</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#core-principles-in-sensory-and-consumer-science"><i class="fa fa-check"></i>Core principles in Sensory and Consumer Science</a></li>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#computational-sensory-science"><i class="fa fa-check"></i>Computational Sensory Science</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Apéritifs</b></span></li>
<li class="chapter" data-level="2" data-path="start-R.html"><a href="start-R.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="start-R.html"><a href="start-R.html#r"><i class="fa fa-check"></i><b>2.1</b> R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="start-R.html"><a href="start-R.html#why-learn-a-programming-language"><i class="fa fa-check"></i><b>2.1.1</b> Why Learn a Programming Language?</a></li>
<li class="chapter" data-level="2.1.2" data-path="start-R.html"><a href="start-R.html#why-r"><i class="fa fa-check"></i><b>2.1.2</b> Why R?</a></li>
<li class="chapter" data-level="2.1.3" data-path="start-R.html"><a href="start-R.html#steps-to-install-r"><i class="fa fa-check"></i><b>2.1.3</b> Steps to Install R</a></li>
<li class="chapter" data-level="2.1.4" data-path="start-R.html"><a href="start-R.html#introduction-to-the-magrittr-and-the-notion-of-pipes"><i class="fa fa-check"></i><b>2.1.4</b> Introduction to the <code>{magrittr}</code> and the notion of <em>pipes</em></a></li>
<li class="chapter" data-level="2.1.5" data-path="start-R.html"><a href="start-R.html#tips-on-how-to-read-this-book"><i class="fa fa-check"></i><b>2.1.5</b> Tips on <em>how to read this book?</em></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="start-R.html"><a href="start-R.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="start-R.html"><a href="start-R.html#steps-to-install-rstudio"><i class="fa fa-check"></i><b>2.2.1</b> Steps to Install RStudio</a></li>
<li class="chapter" data-level="2.2.2" data-path="start-R.html"><a href="start-R.html#create-a-local-project"><i class="fa fa-check"></i><b>2.2.2</b> Create a Local Project</a></li>
<li class="chapter" data-level="2.2.3" data-path="start-R.html"><a href="start-R.html#install-and-load-packages"><i class="fa fa-check"></i><b>2.2.3</b> Install and Load Packages</a></li>
<li class="chapter" data-level="2.2.4" data-path="start-R.html"><a href="start-R.html#run-sample-code"><i class="fa fa-check"></i><b>2.2.4</b> Run Sample Code</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="start-R.html"><a href="start-R.html#git-and-github"><i class="fa fa-check"></i><b>2.3</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="start-R.html"><a href="start-R.html#git"><i class="fa fa-check"></i><b>2.3.1</b> Git</a></li>
<li class="chapter" data-level="2.3.2" data-path="start-R.html"><a href="start-R.html#github"><i class="fa fa-check"></i><b>2.3.2</b> GitHub</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="start-R.html"><a href="start-R.html#raw-material"><i class="fa fa-check"></i><b>2.4</b> RAW MATERIAL</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="start-R.html"><a href="start-R.html#principles"><i class="fa fa-check"></i><b>2.4.1</b> Principles</a></li>
<li class="chapter" data-level="2.4.2" data-path="start-R.html"><a href="start-R.html#tools"><i class="fa fa-check"></i><b>2.4.2</b> Tools</a></li>
<li class="chapter" data-level="2.4.3" data-path="start-R.html"><a href="start-R.html#documentation"><i class="fa fa-check"></i><b>2.4.3</b> Documentation</a></li>
<li class="chapter" data-level="2.4.4" data-path="start-R.html"><a href="start-R.html#version-control"><i class="fa fa-check"></i><b>2.4.4</b> Version control</a></li>
<li class="chapter" data-level="2.4.5" data-path="start-R.html"><a href="start-R.html#online-repositories-for-team-collaboration"><i class="fa fa-check"></i><b>2.4.5</b> Online repositories for team collaboration</a></li>
<li class="chapter" data-level="2.4.6" data-path="start-R.html"><a href="start-R.html#building-a-code-base"><i class="fa fa-check"></i><b>2.4.6</b> Building a code base</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Hors d’Oeuvres</b></span></li>
<li class="chapter" data-level="3" data-path="data-science.html"><a href="data-science.html"><i class="fa fa-check"></i><b>3</b> Why Data Science?</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-science.html"><a href="data-science.html#history-and-definition"><i class="fa fa-check"></i><b>3.1</b> History and Definition</a></li>
<li class="chapter" data-level="3.2" data-path="data-science.html"><a href="data-science.html#benefits-of-data-science"><i class="fa fa-check"></i><b>3.2</b> Benefits of Data Science</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-science.html"><a href="data-science.html#reproducible-research"><i class="fa fa-check"></i><b>3.2.1</b> Reproducible Research</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-science.html"><a href="data-science.html#standardized-reporting"><i class="fa fa-check"></i><b>3.2.2</b> Standardized Reporting</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-science.html"><a href="data-science.html#data-scientific-workflow"><i class="fa fa-check"></i><b>3.3</b> Data Scientific Workflow</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-science.html"><a href="data-science.html#data-collection2"><i class="fa fa-check"></i><b>3.3.1</b> Data Collection</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-science.html"><a href="data-science.html#data-preparation"><i class="fa fa-check"></i><b>3.3.2</b> Data Preparation</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-science.html"><a href="data-science.html#data-analysis2"><i class="fa fa-check"></i><b>3.3.3</b> Data Analysis</a></li>
<li class="chapter" data-level="3.3.4" data-path="data-science.html"><a href="data-science.html#value-delivery2"><i class="fa fa-check"></i><b>3.3.4</b> Value Delivery</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-science.html"><a href="data-science.html#how-to-learn-data-science"><i class="fa fa-check"></i><b>3.4</b> How to Learn Data Science</a></li>
<li class="chapter" data-level="3.5" data-path="data-science.html"><a href="data-science.html#cautions-dont-that-everybody-does"><i class="fa fa-check"></i><b>3.5</b> Cautions: Don’t that Everybody Does</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manip.html"><a href="data-manip.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manip.html"><a href="data-manip.html#tidy-data"><i class="fa fa-check"></i><b>4.1</b> Tidying Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manip.html"><a href="data-manip.html#simple-manipulations"><i class="fa fa-check"></i><b>4.1.1</b> Simple Manipulations</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-manip.html"><a href="data-manip.html#reshaping-the-data"><i class="fa fa-check"></i><b>4.1.2</b> Reshaping the Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-manip.html"><a href="data-manip.html#transformation-that-alters-the-data"><i class="fa fa-check"></i><b>4.1.3</b> Transformation that Alters the Data</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-manip.html"><a href="data-manip.html#combining-data-from-different-sources"><i class="fa fa-check"></i><b>4.1.4</b> Combining Data from Different Sources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-viz.html"><a href="data-viz.html"><i class="fa fa-check"></i><b>5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-viz.html"><a href="data-viz.html#design-principles"><i class="fa fa-check"></i><b>5.1</b> Design Principles</a></li>
<li class="chapter" data-level="5.2" data-path="data-viz.html"><a href="data-viz.html#table-making"><i class="fa fa-check"></i><b>5.2</b> Table Making</a></li>
<li class="chapter" data-level="5.3" data-path="data-viz.html"><a href="data-viz.html#chart-making"><i class="fa fa-check"></i><b>5.3</b> Chart Making</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-viz.html"><a href="data-viz.html#philosophy-of-ggplot2"><i class="fa fa-check"></i><b>5.3.1</b> Philosophy of <code>{ggplot2}</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="data-viz.html"><a href="data-viz.html#getting-started-with-ggplot2"><i class="fa fa-check"></i><b>5.3.2</b> Getting started with <code>{ggplot2}</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="data-viz.html"><a href="data-viz.html#common-charts"><i class="fa fa-check"></i><b>5.3.3</b> Common Charts</a></li>
<li class="chapter" data-level="5.3.4" data-path="data-viz.html"><a href="data-viz.html#miscealleneous"><i class="fa fa-check"></i><b>5.3.4</b> Miscealleneous</a></li>
<li class="chapter" data-level="5.3.5" data-path="data-viz.html"><a href="data-viz.html#few-tips-and-tricks"><i class="fa fa-check"></i><b>5.3.5</b> Few Tips and Tricks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="auto-report.html"><a href="auto-report.html"><i class="fa fa-check"></i><b>6</b> Automated Reporting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="auto-report.html"><a href="auto-report.html#what-and-why-automated-reporting"><i class="fa fa-check"></i><b>6.1</b> What and why Automated Reporting?</a></li>
<li class="chapter" data-level="6.2" data-path="auto-report.html"><a href="auto-report.html#integrating-reports-within-analyses-scripts"><i class="fa fa-check"></i><b>6.2</b> Integrating reports within analyses scripts</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="auto-report.html"><a href="auto-report.html#excel"><i class="fa fa-check"></i><b>6.2.1</b> Excel</a></li>
<li class="chapter" data-level="6.2.2" data-path="auto-report.html"><a href="auto-report.html#powerpoint"><i class="fa fa-check"></i><b>6.2.2</b> PowerPoint</a></li>
<li class="chapter" data-level="6.2.3" data-path="auto-report.html"><a href="auto-report.html#word"><i class="fa fa-check"></i><b>6.2.3</b> Word</a></li>
<li class="chapter" data-level="6.2.4" data-path="auto-report.html"><a href="auto-report.html#notes-on-applying-corporate-branding"><i class="fa fa-check"></i><b>6.2.4</b> Notes on applying corporate branding</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="auto-report.html"><a href="auto-report.html#integrating-analyses-scripts-within-your-reporting-tool"><i class="fa fa-check"></i><b>6.3</b> Integrating analyses scripts within your reporting tool</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="auto-report.html"><a href="auto-report.html#what-is-rmarkdown"><i class="fa fa-check"></i><b>6.3.1</b> What is <code>{rmarkdown}</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="auto-report.html"><a href="auto-report.html#starting-with-rmarkdown"><i class="fa fa-check"></i><b>6.3.2</b> Starting with {rmarkdown}</a></li>
<li class="chapter" data-level="6.3.3" data-path="auto-report.html"><a href="auto-report.html#rmarkdown-through-a-simple-example"><i class="fa fa-check"></i><b>6.3.3</b> <code>{rmarkdown}</code> through a Simple Example</a></li>
<li class="chapter" data-level="6.3.4" data-path="auto-report.html"><a href="auto-report.html#creating-a-document-using-knitr"><i class="fa fa-check"></i><b>6.3.4</b> Creating a document using <code>{knitr}</code></a></li>
<li class="chapter" data-level="6.3.5" data-path="auto-report.html"><a href="auto-report.html#example-of-applications"><i class="fa fa-check"></i><b>6.3.5</b> Example of applications</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="auto-report.html"><a href="auto-report.html#to-go-further"><i class="fa fa-check"></i><b>6.4</b> To go further…</a></li>
</ul></li>
<li class="part"><span><b>Bon Appétit</b></span></li>
<li class="chapter" data-level="7" data-path="example-projects.html"><a href="example-projects.html"><i class="fa fa-check"></i><b>7</b> Example Project: The Biscuit Study</a>
<ul>
<li class="chapter" data-level="7.1" data-path="example-projects.html"><a href="example-projects.html#products"><i class="fa fa-check"></i><b>7.1</b> Products</a></li>
<li class="chapter" data-level="7.2" data-path="example-projects.html"><a href="example-projects.html#consumer-test"><i class="fa fa-check"></i><b>7.2</b> Consumer test</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="example-projects.html"><a href="example-projects.html#participants"><i class="fa fa-check"></i><b>7.2.1</b> Participants</a></li>
<li class="chapter" data-level="7.2.2" data-path="example-projects.html"><a href="example-projects.html#test-design"><i class="fa fa-check"></i><b>7.2.2</b> Test design</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="example-projects.html"><a href="example-projects.html#sensory-descriptive-analysis-data"><i class="fa fa-check"></i><b>7.3</b> Sensory descriptive analysis data</a></li>
<li class="chapter" data-level="7.4" data-path="example-projects.html"><a href="example-projects.html#summary-of-the-datasets"><i class="fa fa-check"></i><b>7.4</b> Summary of the datasets</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-collection.html"><a href="data-collection.html"><i class="fa fa-check"></i><b>8</b> Data Collection</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-collection.html"><a href="data-collection.html#design-1"><i class="fa fa-check"></i><b>8.1</b> Design</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="data-collection.html"><a href="data-collection.html#designs-of-sensory-experiments"><i class="fa fa-check"></i><b>8.1.1</b> Designs of sensory experiments</a></li>
<li class="chapter" data-level="8.1.2" data-path="data-collection.html"><a href="data-collection.html#product-related-design"><i class="fa fa-check"></i><b>8.1.2</b> Product-related design</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="data-collection.html"><a href="data-collection.html#execute-1"><i class="fa fa-check"></i><b>8.2</b> Execute</a></li>
<li class="chapter" data-level="8.3" data-path="data-collection.html"><a href="data-collection.html#data-import"><i class="fa fa-check"></i><b>8.3</b> Import</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-collection.html"><a href="data-collection.html#importing-structured-excel-file"><i class="fa fa-check"></i><b>8.3.1</b> Importing Structured Excel File</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-collection.html"><a href="data-collection.html#importing-unstructured-excel-file"><i class="fa fa-check"></i><b>8.3.2</b> Importing Unstructured Excel File</a></li>
<li class="chapter" data-level="8.3.3" data-path="data-collection.html"><a href="data-collection.html#import-mult-sheet"><i class="fa fa-check"></i><b>8.3.3</b> Importing Data Stored in Multiple Sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-prep.html"><a href="data-prep.html"><i class="fa fa-check"></i><b>9</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data-prep.html"><a href="data-prep.html#inspect"><i class="fa fa-check"></i><b>9.1</b> Inspect</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="data-prep.html"><a href="data-prep.html#data-inspection"><i class="fa fa-check"></i><b>9.1.1</b> Data Inspection</a></li>
<li class="chapter" data-level="9.1.2" data-path="data-prep.html"><a href="data-prep.html#design-inspection"><i class="fa fa-check"></i><b>9.1.2</b> Design Inspection</a></li>
<li class="chapter" data-level="9.1.3" data-path="data-prep.html"><a href="data-prep.html#missing-data-inspection"><i class="fa fa-check"></i><b>9.1.3</b> Missing Data Inspection</a></li>
<li class="chapter" data-level="9.1.4" data-path="data-prep.html"><a href="data-prep.html#checks-for-consistency-and-reliability"><i class="fa fa-check"></i><b>9.1.4</b> Checks for Consistency and Reliability</a></li>
<li class="chapter" data-level="9.1.5" data-path="data-prep.html"><a href="data-prep.html#preliminary-tables-and-charts"><i class="fa fa-check"></i><b>9.1.5</b> Preliminary Tables and Charts</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="data-prep.html"><a href="data-prep.html#clean"><i class="fa fa-check"></i><b>9.2</b> Clean</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="data-prep.html"><a href="data-prep.html#renaming-variables-1"><i class="fa fa-check"></i><b>9.2.1</b> Renaming Variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="data-prep.html"><a href="data-prep.html#handling-data-type"><i class="fa fa-check"></i><b>9.2.2</b> Handling Data Type</a></li>
<li class="chapter" data-level="9.2.3" data-path="data-prep.html"><a href="data-prep.html#converting-between-types"><i class="fa fa-check"></i><b>9.2.3</b> Converting between Types</a></li>
<li class="chapter" data-level="9.2.4" data-path="data-prep.html"><a href="data-prep.html#handling-missing-values"><i class="fa fa-check"></i><b>9.2.4</b> Handling Missing Values</a></li>
<li class="chapter" data-level="9.2.5" data-path="data-prep.html"><a href="data-prep.html#restructuring-data"><i class="fa fa-check"></i><b>9.2.5</b> Restructuring Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>10</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-analysis.html"><a href="data-analysis.html#sensory-data"><i class="fa fa-check"></i><b>10.1</b> Sensory Data</a></li>
<li class="chapter" data-level="10.2" data-path="data-analysis.html"><a href="data-analysis.html#demographic-and-questionnaire-data"><i class="fa fa-check"></i><b>10.2</b> Demographic and Questionnaire Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-analysis.html"><a href="data-analysis.html#demographic-data-frequency-and-proportion"><i class="fa fa-check"></i><b>10.2.1</b> Demographic Data: Frequency and Proportion</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-analysis.html"><a href="data-analysis.html#personality-traits-and-eating-behavior-tfeq-data"><i class="fa fa-check"></i><b>10.2.2</b> Personality traits and eating behavior: TFEQ data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-analysis.html"><a href="data-analysis.html#consumer-data"><i class="fa fa-check"></i><b>10.3</b> Consumer Data</a></li>
<li class="chapter" data-level="10.4" data-path="data-analysis.html"><a href="data-analysis.html#combining-sensory-and-consumer-data"><i class="fa fa-check"></i><b>10.4</b> Combining Sensory and Consumer Data</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="data-analysis.html"><a href="data-analysis.html#internal-preference-mapping"><i class="fa fa-check"></i><b>10.4.1</b> Internal Preference Mapping</a></li>
<li class="chapter" data-level="10.4.2" data-path="data-analysis.html"><a href="data-analysis.html#consumers-clustering"><i class="fa fa-check"></i><b>10.4.2</b> Consumers Clustering</a></li>
<li class="chapter" data-level="10.4.3" data-path="data-analysis.html"><a href="data-analysis.html#drivers-of-liking"><i class="fa fa-check"></i><b>10.4.3</b> Drivers of Liking</a></li>
<li class="chapter" data-level="10.4.4" data-path="data-analysis.html"><a href="data-analysis.html#external-preference-mapping"><i class="fa fa-check"></i><b>10.4.4</b> External Preference Mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="value-delivery.html"><a href="value-delivery.html"><i class="fa fa-check"></i><b>11</b> Value Delivery</a>
<ul>
<li class="chapter" data-level="11.1" data-path="value-delivery.html"><a href="value-delivery.html#communicate2"><i class="fa fa-check"></i><b>11.1</b> Communicate</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="value-delivery.html"><a href="value-delivery.html#know-your-audience"><i class="fa fa-check"></i><b>11.1.1</b> Know Your Audience</a></li>
<li class="chapter" data-level="11.1.2" data-path="value-delivery.html"><a href="value-delivery.html#pick-the-correct-format"><i class="fa fa-check"></i><b>11.1.2</b> Pick the Correct Format</a></li>
<li class="chapter" data-level="11.1.3" data-path="value-delivery.html"><a href="value-delivery.html#storytelling"><i class="fa fa-check"></i><b>11.1.3</b> Storytelling</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="value-delivery.html"><a href="value-delivery.html#reformulate2"><i class="fa fa-check"></i><b>11.2</b> Reformulate</a></li>
</ul></li>
<li class="part"><span><b>Haute Cuisine</b></span></li>
<li class="chapter" data-level="12" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>12</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="machine-learning.html"><a href="machine-learning.html#overview"><i class="fa fa-check"></i><b>12.1</b> Overview</a></li>
<li class="chapter" data-level="12.2" data-path="machine-learning.html"><a href="machine-learning.html#key-topics"><i class="fa fa-check"></i><b>12.2</b> Key Topics</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="machine-learning.html"><a href="machine-learning.html#model-validation"><i class="fa fa-check"></i><b>12.2.1</b> Model Validation</a></li>
<li class="chapter" data-level="12.2.2" data-path="machine-learning.html"><a href="machine-learning.html#unsupervised-learning"><i class="fa fa-check"></i><b>12.2.2</b> Unsupervised learning</a></li>
<li class="chapter" data-level="12.2.3" data-path="machine-learning.html"><a href="machine-learning.html#semisupervised-learning"><i class="fa fa-check"></i><b>12.2.3</b> Semisupervised learning</a></li>
<li class="chapter" data-level="12.2.4" data-path="machine-learning.html"><a href="machine-learning.html#supervised-learning"><i class="fa fa-check"></i><b>12.2.4</b> Supervised learning</a></li>
<li class="chapter" data-level="12.2.5" data-path="machine-learning.html"><a href="machine-learning.html#interpretability"><i class="fa fa-check"></i><b>12.2.5</b> Interpretability</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="machine-learning.html"><a href="machine-learning.html#common-applications"><i class="fa fa-check"></i><b>12.3</b> Common Applications</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="machine-learning.html"><a href="machine-learning.html#predicting-sensory-profiles-from-instrumental-data"><i class="fa fa-check"></i><b>12.3.1</b> Predicting sensory profiles from instrumental data</a></li>
<li class="chapter" data-level="12.3.2" data-path="machine-learning.html"><a href="machine-learning.html#predicting-consumer-response-from-sensory-profiles"><i class="fa fa-check"></i><b>12.3.2</b> Predicting consumer response from sensory profiles</a></li>
<li class="chapter" data-level="12.3.3" data-path="machine-learning.html"><a href="machine-learning.html#characterizing-consumer-clusters"><i class="fa fa-check"></i><b>12.3.3</b> Characterizing consumer clusters</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="machine-learning.html"><a href="machine-learning.html#code-examples"><i class="fa fa-check"></i><b>12.4</b> Code Examples</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="machine-learning.html"><a href="machine-learning.html#data-prep-1"><i class="fa fa-check"></i><b>12.4.1</b> Data Prep</a></li>
<li class="chapter" data-level="12.4.2" data-path="machine-learning.html"><a href="machine-learning.html#classification-code"><i class="fa fa-check"></i><b>12.4.2</b> Classification Code</a></li>
<li class="chapter" data-level="12.4.3" data-path="machine-learning.html"><a href="machine-learning.html#regression-code"><i class="fa fa-check"></i><b>12.4.3</b> Regression Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>13</b> Text Analysis</a>
<ul>
<li class="chapter" data-level="13.0.1" data-path="text-analysis.html"><a href="text-analysis.html#applicaion-of-text-analysis-in-sensory-and-consumer-science"><i class="fa fa-check"></i><b>13.0.1</b> Applicaion of Text Analysis in Sensory and Consumer Science</a></li>
<li class="chapter" data-level="13.0.2" data-path="text-analysis.html"><a href="text-analysis.html#objectives-of-text-analysis"><i class="fa fa-check"></i><b>13.0.2</b> Objectives of Text Analysis</a></li>
<li class="chapter" data-level="13.0.3" data-path="text-analysis.html"><a href="text-analysis.html#warnings"><i class="fa fa-check"></i><b>13.0.3</b> Warnings</a></li>
<li class="chapter" data-level="13.1" data-path="text-analysis.html"><a href="text-analysis.html#illustration-using-sorting-task-data"><i class="fa fa-check"></i><b>13.1</b> Illustration using Sorting Task Data</a></li>
<li class="chapter" data-level="13.2" data-path="text-analysis.html"><a href="text-analysis.html#data-pre-processing"><i class="fa fa-check"></i><b>13.2</b> Data Pre-processing</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="text-analysis.html"><a href="text-analysis.html#introduction-to-working-with-strings-stringr"><i class="fa fa-check"></i><b>13.2.1</b> Introduction to working with strings (<code>{stringr}</code>)</a></li>
<li class="chapter" data-level="13.2.2" data-path="text-analysis.html"><a href="text-analysis.html#tokenization"><i class="fa fa-check"></i><b>13.2.2</b> Tokenization</a></li>
<li class="chapter" data-level="13.2.3" data-path="text-analysis.html"><a href="text-analysis.html#simple-transformation-lowercase"><i class="fa fa-check"></i><b>13.2.3</b> Simple Transformation (lowercase)</a></li>
<li class="chapter" data-level="13.2.4" data-path="text-analysis.html"><a href="text-analysis.html#stopwords"><i class="fa fa-check"></i><b>13.2.4</b> Stopwords</a></li>
<li class="chapter" data-level="13.2.5" data-path="text-analysis.html"><a href="text-analysis.html#stemming-and-lemmatization"><i class="fa fa-check"></i><b>13.2.5</b> Stemming and Lemmatization</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="text-analysis.html"><a href="text-analysis.html#text-analysis-1"><i class="fa fa-check"></i><b>13.3</b> Text Analysis</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="text-analysis.html"><a href="text-analysis.html#raw-frequencies-and-visualization"><i class="fa fa-check"></i><b>13.3.1</b> Raw Frequencies and Visualization</a></li>
<li class="chapter" data-level="13.3.2" data-path="text-analysis.html"><a href="text-analysis.html#bigrams-n-grams"><i class="fa fa-check"></i><b>13.3.2</b> Bigrams, <em>n</em>-grams</a></li>
<li class="chapter" data-level="13.3.3" data-path="text-analysis.html"><a href="text-analysis.html#word-embedding"><i class="fa fa-check"></i><b>13.3.3</b> Word Embedding</a></li>
<li class="chapter" data-level="13.3.4" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis"><i class="fa fa-check"></i><b>13.3.4</b> Sentiment Analysis</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="text-analysis.html"><a href="text-analysis.html#to-go-further-1"><i class="fa fa-check"></i><b>13.4</b> To go further…</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i><b>14</b> Dashboards</a></li>
<li class="chapter" data-level="" data-path="digestifs.html"><a href="digestifs.html"><i class="fa fa-check"></i>Digestifs</a></li>
<li class="chapter" data-level="15" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>15</b> Next Steps</a>
<ul>
<li class="chapter" data-level="15.1" data-path="next-steps.html"><a href="next-steps.html#sensory-analysis-in-r"><i class="fa fa-check"></i><b>15.1</b> Sensory Analysis in R</a></li>
<li class="chapter" data-level="15.2" data-path="next-steps.html"><a href="next-steps.html#other-recommended-resources"><i class="fa fa-check"></i><b>15.2</b> Other Recommended Resources</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="next-steps.html"><a href="next-steps.html#r-for-data-science"><i class="fa fa-check"></i><b>15.2.1</b> R for Data Science</a></li>
<li class="chapter" data-level="15.2.2" data-path="next-steps.html"><a href="next-steps.html#hands-on-machine-learning-with-r"><i class="fa fa-check"></i><b>15.2.2</b> Hands-On Machine Learning with R</a></li>
<li class="chapter" data-level="15.2.3" data-path="next-steps.html"><a href="next-steps.html#factoextra"><i class="fa fa-check"></i><b>15.2.3</b> FactoExtra</a></li>
<li class="chapter" data-level="15.2.4" data-path="next-steps.html"><a href="next-steps.html#r-graphics-cookbook"><i class="fa fa-check"></i><b>15.2.4</b> R Graphics Cookbook</a></li>
<li class="chapter" data-level="15.2.5" data-path="next-steps.html"><a href="next-steps.html#storytelling-with-data"><i class="fa fa-check"></i><b>15.2.5</b> Storytelling with Data</a></li>
<li class="chapter" data-level="15.2.6" data-path="next-steps.html"><a href="next-steps.html#text-mining-wtih-r"><i class="fa fa-check"></i><b>15.2.6</b> Text Mining wtih R</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="next-steps.html"><a href="next-steps.html#databases-graph-and-otherwise"><i class="fa fa-check"></i><b>15.3</b> Databases (Graph and Otherwise)</a></li>
<li class="chapter" data-level="15.4" data-path="next-steps.html"><a href="next-steps.html#python-and-other-languages"><i class="fa fa-check"></i><b>15.4</b> Python and Other Languages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for Sensory and Consumer Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-viz" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Data Visualization</h1>
<div id="design-principles" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Design Principles</h2>
</div>
<div id="table-making" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Table Making</h2>
</div>
<div id="chart-making" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Chart Making</h2>
<p>“A picture is worth 1000 words.” This saying definitely applies to Statistics as well, since visual representation of data often appears clearer than the values themselves stored in a table. It is hence no surprise that R is a powerful tool for graphics.</p>
<p>In practice, there are various ways to build graphics in R. In fact, R itself comes with a powerful way of building graphs through the <code>plot()</code> function. An extensive description can be found in (<em>R Graphics 2nd edition Paul Murrell CRC Press</em>). Due to its philosophy, its simplicity, and the point of view adopted in this book, we will limit ourselves to graphics built using the <code>{ggplot2}</code> package.</p>
<div id="philosophy-of-ggplot2" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Philosophy of <code>{ggplot2}</code></h3>
<p><code>{ggplot2}</code> belongs to the <code>{tidyverse}</code>, and was developed by H. Wickham and colleagues at RStudio. It is hence no surprise that a lot of the procedures that we’re learning throughout this book also applies to <code>{ggplot2}</code>. More generally, building graphics with <code>{ggplot2}</code> fits very well within the pipes (<code>%&gt;%</code>) system from <code>{magrittr}</code>. As we will see, <code>{ggplot2}</code> also works with a piping system, except that the symbol used is <code>+</code> instead of <code>%&gt;%</code>.</p>
<p><code>{ggplot2}</code> is a multi-layer graphical tools, meaning that the graphics are build by adding layers one at a time to finally build your graphics. This means that <code>ggplot</code> objects can be printed at any time, and yet still be improved by adding other layers if needed. To read more about <code>{gglot2}</code> and its philosophy, please refer to <a href="http://vita.had.co.nz/papers/layered-grammar.pdf" class="uri">http://vita.had.co.nz/papers/layered-grammar.pdf</a><a href="http://vita.had.co.nz/papers/layered-grammar.pdf">link</a>.</p>
<p>Note that since building graphics is limited to one imagination, it is not possible to tackle each and every possibilities offered by <code>{ggplot2}</code> (and its extensions). For that reason, we limit ourselves to describing the principles of how <code>{ggplot2}</code>works. Additionnally, we will provide in this section and throughout the book example of graphics that are useful in Sensory and Consumer research. This should be more than sufficient to get you started, and should cover 90% of the graphics that you would needin your daily work. Still, if that should not be sufficient, we invite you to look into the online documentation or to references such as [REFS].</p>
</div>
<div id="getting-started-with-ggplot2" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Getting started with <code>{ggplot2}</code></h3>
<p>To use <code>{ggplot2}</code>, we need to load this package: this can either be done directly using:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-viz.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>However, if you load the <code>{tidyverse}</code> package, this step can be ignored as <code>{ggplot2}</code> is included within the list of packages it contains:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-viz.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>To illustrate the use of <code>{ggplot2}</code>, we will use both the sensory dataset stored in <em>Sensory Profile.xlsx</em> and the number of biscuit eaten by each respondents and stored in <em>Consumer Test.xlsx</em>.</p>
<!-- What does "here" mean in 'library (here)' and 'here("data","Sensory Profile.xlsx")'? -->
<!-- I guess the file path "data" can be confusing. It depends on the name of the folder of each user. Maybe instead of calling "data" it could be "name of the folder" or something like that? -->
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-viz.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb47-2"><a href="data-viz.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb47-3"><a href="data-viz.html#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="data-viz.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sensory Profiles Data</span></span>
<span id="cb47-5"><a href="data-viz.html#cb47-5" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;Sensory Profile.xlsx&quot;</span>) </span>
<span id="cb47-6"><a href="data-viz.html#cb47-6" aria-hidden="true" tabindex="-1"></a>p_info <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Product Info&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-7"><a href="data-viz.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Type)</span>
<span id="cb47-8"><a href="data-viz.html#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="data-viz.html#cb47-9" aria-hidden="true" tabindex="-1"></a>sensory <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Data&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-10"><a href="data-viz.html#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(p_info, <span class="at">by=</span><span class="st">&quot;Product&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-11"><a href="data-viz.html#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Protein<span class="sc">:</span>Fiber, <span class="at">.after=</span>Product)</span>
<span id="cb47-12"><a href="data-viz.html#cb47-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-13"><a href="data-viz.html#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Biscuits Eaten Data</span></span>
<span id="cb47-14"><a href="data-viz.html#cb47-14" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>,<span class="st">&quot;Consumer Test.xlsx&quot;</span>)</span>
<span id="cb47-15"><a href="data-viz.html#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="data-viz.html#cb47-16" aria-hidden="true" tabindex="-1"></a>Nbiscuit <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Time Consumption&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-17"><a href="data-viz.html#cb47-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Product =</span> <span class="fu">str_c</span>(<span class="st">&quot;P&quot;</span>, Product)) <span class="sc">%&gt;%</span> </span>
<span id="cb47-18"><a href="data-viz.html#cb47-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">N =</span> <span class="st">`</span><span class="at">Nb biscuits</span><span class="st">`</span>)</span></code></pre></div>
<p>To initiate a graph, we start by calling the function <code>ggplot()</code>.
Since the data we want to use is stored in <code>sensory</code>, we apply <code>ggplot()</code> to <code>sensory</code>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-viz.html#cb48-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory)</span></code></pre></div>
<p>If you run this line of code, you’ll notice that p contains an empty graphic. This is because we haven’t added any layer that is relevant for us yet.
So let’s imagine we want to look at the overall relationship between <code>Sticky</code> and <code>Melting</code>. To do so, we want to create a scatter plot with <code>Sticky</code> in the x-axis, and <code>Melting</code> in the y-axis.
To do so, two types of information are required:</p>
<ul>
<li>the type of visual layer we want to add (here a scatter point);</li>
<li>the information regarding the data to plot (what should be in represented).</li>
</ul>
<p>Such information can be provided as such:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-viz.html#cb49-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting))</span></code></pre></div>
<p>As can be seen, we are adding to the already existing graph <code>p</code> a layer that consists of points (defined by <code>geom_point()</code>) in which we specified that the x-axis is <code>Sticky</code> and the y-axis is <code>Melting</code> through aesthetics (or <code>aes()</code>).</p>
<div id="introduction-to-aesthetics" class="section level4" number="5.3.2.1">
<h4><span class="header-section-number">5.3.2.1</span> Introduction to Aesthetics</h4>
<p>In the previous example, one can notice that many points are being printed: this can easily be explained by the fact that the raw sensory data are being used, meaning that there are as many points as there are assessors evaluating products.</p>
<p>Let’s imagine we want to color the points per products to see if we can see any patterns. Since the color code is specific to the data (more precisely to the products), it should be informed within the aesthetics. In this case, we add to the previous code <code>colour=Product</code> with <code>aes()</code>:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data-viz.html#cb50-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">colour=</span>Product))</span></code></pre></div>
<p>As you can see, any parameters provided within <code>aes()</code> may depend on a variable (e.g. <code>colour</code> in the previous example).
If for any reasons, a specific setting should uniformly be applied to all the elements of the graph, then it should be stated outside <code>aes()</code>.</p>
<p>Let’s illustrate this by providing a simple example in which we change the type of the dots from circle to square using <code>pch</code>, and by increasing their size using <code>cex</code>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-viz.html#cb51-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">colour=</span>Product), <span class="at">pch=</span><span class="dv">15</span>, <span class="at">cex=</span><span class="dv">5</span>)</span></code></pre></div>
<p>Depending on the <code>geom_*()</code> considered, different parameters should be informed within <code>aes()</code>. Here is a list of the most common <code>aes()</code> you would use:</p>
<ul>
<li><code>x</code>, <code>y</code>, <code>z</code>, provides the coordinates on the X, Y, Z dimensions respectively;</li>
<li><code>colour</code>/<code>color</code>, <code>fill</code> controls for the color code<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a> that is being applied to the different elements of a graph;</li>
<li><code>group</code> makes the distinction between points that belong to different groups: in fact <code>colour</code> and <code>fill</code> are specific cases of groups as they additionally provide a visual cue on the groups through the color code;</li>
<li><code>text</code>, <code>label</code> prints text on the graph;</li>
<li><code>size</code> controls the size of the element (this should preferably be used with numerical variable).</li>
</ul>
<p>Examples highlighting various types of aesthetics will be presented throughout the book.</p>
</div>
<div id="introduction-to-geom_-functions" class="section level4" number="5.3.2.2">
<h4><span class="header-section-number">5.3.2.2</span> Introduction to <code>geom_*()</code> functions</h4>
<p>Since <code>{ggplot2}</code> is a multi-layer graph, let’s add another layer. Here we propose to add the name of the panelists that is associated to each point.</p>
<p>To do so, we need to consider another <code>geom_*()</code> function: <code>geom_text()</code><a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a> which requires in <code>aes()</code> the position of the labels (<code>x</code> and <code>y</code>) as well as the <code>label</code> itself.
To avoid having the label overlapping with the point, we propose to shift slightly all the text vertically using <code>nudge_y</code>:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-viz.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sensory)<span class="sc">+</span></span>
<span id="cb52-2"><a href="data-viz.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">colour=</span>Product))<span class="sc">+</span></span>
<span id="cb52-3"><a href="data-viz.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">label=</span>Judge), <span class="at">nudge_y=</span><span class="dv">1</span>)</span></code></pre></div>
<p>One interesting remark is that some information required in <code>aes()</code> is being repeated across the different <code>geom_*()</code> used. Such writing can be simplified by providing the <code>aes()</code> information that applies to all <code>geom_*()</code> to the original <code>ggplot()</code> call. The previous code hence can be simplified into:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-viz.html#cb53-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory, <span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">label=</span>Judge))<span class="sc">+</span></span>
<span id="cb53-2"><a href="data-viz.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>Product))<span class="sc">+</span></span>
<span id="cb53-3"><a href="data-viz.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_y=</span><span class="dv">1</span>)</span></code></pre></div>
<p>With this new code, you’ll notice that:</p>
<ul>
<li>although <code>label</code> is only relevant for <code>geom_text()</code>, it can still be provided at the beginning, as it will be ignored by <code>geom_point()</code> which does not require it;</li>
<li><code>colour</code> should only be provided within <code>geom_point()</code> else the text would also be colored according to <code>Product</code> (which we do not want here);</li>
<li><code>nudge_y</code> is defined outside <code>aes()</code> as it applies to all the text.</li>
</ul>
<p>To the previous graph, let’s add another layer as following:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-viz.html#cb54-1" aria-hidden="true" tabindex="-1"></a>line_p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">formula=</span><span class="st">&quot;y~x&quot;</span>, <span class="at">se=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p>This code adds a regression line to the graphic (here, we specified that the regression line should be defined using <code>lm</code> and by considering the simple linear regression <code>y~x</code>). This result is somewhat surprising since we have not run any regression yet, meaning that <code>geom_smooth()</code> is actually performing the required analysis in the background.</p>
<p>In fact, most <code>geom_*()</code> function comes with a statistical process to it. This means that we can provide raw data, and the <code>geom_*()</code> function calls its <code>stat_*()</code> function that runs the corresponding analysis. In the previous example, <code>geom_smooth()</code> calls <code>stat_smooth()</code>.</p>
<p>Let’s illustrate this concept again using another example: bar-charts that we apply on the data stored in <code>Nbiscuit</code>.
Here, we want to see the distribution (through bar-charts) of number of biscuits eaten per consumer. A quick look at the data shows that some respondents ate portions of the cookies. To simplify the analysis, let’s consider the total number of entire cookies eaten: if a respondent has eaten 3.5 biscuits, we will consider that they ate 3 full cookies.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-viz.html#cb55-1" aria-hidden="true" tabindex="-1"></a>Nbiscuit <span class="ot">&lt;-</span> Nbiscuit <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="data-viz.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">N =</span> <span class="fu">floor</span>(N))</span></code></pre></div>
<p>To create such distribution, a first solution consists in counting for each product how many respondents ate 0 biscuit, 1 biscuit, 2 biscuits, etc. This is automatically done using <code>geom_bar</code> and <code>stat="count"</code>. Here, we set the parameter <code>position="dodge"</code> to get the results per biscuit side by side rather than stacked up (value by default):</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-viz.html#cb56-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Nbiscuit, <span class="fu">aes</span>(<span class="at">x=</span>N, <span class="at">fill=</span>Product))<span class="sc">+</span></span>
<span id="cb56-2"><a href="data-viz.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;count&quot;</span>, <span class="at">position=</span><span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p>In the background, this corresponds to grouping the data by <code>Product</code>, summarizing the results by counting <code>N</code>, and then performing <code>geom_bar()</code> in which no transformation is required (we set <code>stat="identity"</code>)<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-viz.html#cb57-1" aria-hidden="true" tabindex="-1"></a>Nbiscuit <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="data-viz.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Product, N) <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="data-viz.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>N, <span class="at">y=</span>n, <span class="at">fill=</span>Product))<span class="sc">+</span></span>
<span id="cb57-4"><a href="data-viz.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">position=</span><span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p>As can be seen, the two graphics are identical.</p>
</div>
<div id="making-graphs-pretty" class="section level4" number="5.3.2.3">
<h4><span class="header-section-number">5.3.2.3</span> Making graphs pretty</h4>
<p>In the two previous graphs generated (stored in <code>line_p</code> and <code>bar_p</code>), we can notice some features that we may want to change to produce a clearer graph. Currently, the background is grey with vertical and horizontal white lines, the legend is positioned on the right side, the axis is defined based on the data itself (and so are the axis titles), there are not graph title, etc.<br />
These are the points that we are going to improve in this section.</p>
<p>Let’s start with a quick win by completely changing the overall appearance of the graph. To do so, we can use predefined <em>themes</em> which then automatically set a different background (with or without lines), axis lines, etc. The two themes that we like to use are <code>theme_minimal()</code> and <code>theme_bw()</code> (please visit <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="uri">https://ggplot2.tidyverse.org/reference/ggtheme.html</a><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">link</a> for the complete list of pre-defined themes.)</p>
<p>Let’s start with improving <code>bar_p</code> using <code>theme_minimal()</code>:</p>
<!-- The functions below are using = instead of <- -->
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-viz.html#cb58-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">=</span> bar_p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p>Rather than using pre-defined themes (or to complement pre-defined themes), we can manually control every parameters of the graph using <code>theme()</code>.</p>
<p>Next, let’s modify the axes by changing their names and by applying more logical breaks. We are extending here the limits of the x-axis to -1 and 11 to ensure that all the histograms are visible, else R removes some and returns a warning: <code>Removed 10 rows containing missing values</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data-viz.html#cb59-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">=</span> bar_p <span class="sc">+</span></span>
<span id="cb59-2"><a href="data-viz.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name=</span><span class="st">&quot;Number of Biscuits eaten&quot;</span>, </span>
<span id="cb59-3"><a href="data-viz.html#cb59-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">1</span>), </span>
<span id="cb59-4"><a href="data-viz.html#cb59-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="st">&quot;All of them&quot;</span>), </span>
<span id="cb59-5"><a href="data-viz.html#cb59-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb59-6"><a href="data-viz.html#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of Respondents&quot;</span>)</span></code></pre></div>
<p>Last but not least, we can provide a title to the graph using <code>ggtitle()</code>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-viz.html#cb60-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">=</span> bar_p <span class="sc">+</span></span>
<span id="cb60-2"><a href="data-viz.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Distribution of the number of biscuits eaten&quot;</span>,<span class="st">&quot;(Results are split per biscuit type)&quot;</span>)</span></code></pre></div>
<p>Let’s apply a similar transformation to <code>line_p</code>. Here, we are aiming in having a more <em>realistic</em> plot using cartesian coordinates, a nice theme, no legend, and a title to the graph.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-viz.html#cb61-1" aria-hidden="true" tabindex="-1"></a>line_p <span class="ot">=</span> line_p <span class="sc">+</span></span>
<span id="cb61-2"><a href="data-viz.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb61-3"><a href="data-viz.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">50</span>,<span class="dv">10</span>), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">60</span>))<span class="sc">+</span></span>
<span id="cb61-4"><a href="data-viz.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">50</span>,<span class="dv">10</span>), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">60</span>))<span class="sc">+</span></span>
<span id="cb61-5"><a href="data-viz.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()<span class="sc">+</span></span>
<span id="cb61-6"><a href="data-viz.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Relationship between Melting and Sticky&quot;</span>, <span class="st">&quot;Biscuits perceived as more sticky tend to be less melting.&quot;</span>)<span class="sc">+</span></span>
<span id="cb61-7"><a href="data-viz.html#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="common-charts" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Common Charts</h3>
<p>You have now an overview of the basics of <code>{ggplot2}</code> and its philosophy. You’ll find plenty of other examples throughout this book to help you develop your skills in building graphics in R.</p>
<p>Since making an exhaustive list of plots that are relevant in sensory and consumer science is out of the scope for this book, it is not going to be further developed here. Yet, here is a summary of the <code>geom_*()</code> that you could be of interest for you:</p>
<ul>
<li>Scatter points:
<ul>
<li><code>geom_point()</code> (see example…)</li>
</ul></li>
<li>Line charts:
<ul>
<li><code>geom_line()</code> to create connect points (see example…);</li>
<li><code>geom_smooth()</code> to add a regression line (see …);</li>
<li><code>geom_hline()</code> (resp. <code>geom_vline()</code>) add a horizontal (resp. vertical) line using <code>yintercept</code> (resp. <code>xintercept</code>);</li>
<li><code>geom_segment()</code>draws a segment going from (<code>x</code>;<code>y</code>) to (<code>xend</code>;<code>yend</code>)<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a>.</li>
</ul></li>
<li>Bar charts:
<ul>
<li><code>geom_col()</code> and <code>geom_bar()</code> (see example…);</li>
<li><code>geom_histogram()</code> and <code>geom_freqpoly()</code> work in a similar way as <code>geom_bar()</code> except that it divides the x axis into bins before counting the number of observation in each bin and either represent it as bars (<code>geom_histogram</code>) or lines (<code>geom_freqpoly()</code>).</li>
</ul></li>
<li>Distribution:
<ul>
<li><code>geom_density()</code> creates the density plot;</li>
<li><code>geom_boxplot()</code> creates the well-known boxplot;</li>
<li><code>geom_violin()</code> is an application of <code>geom_density()</code> displayed in <code>geom_boxplot()</code> fashion.</li>
</ul></li>
<li>Text and Labels:
<ul>
<li><code>geom_text</code> and <code>geom_label</code> (see example…);</li>
<li>the package <code>{ggrepel}</code> provides alternative functions (<code>geom_text_repel()</code> and <code>geom_label_repel()</code>) that re-position labels to avoid overlapping (<em>repel</em> stands for <em>repulsive</em>).</li>
</ul></li>
<li>Rectangles<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a>:
<ul>
<li><code>geom_tile()</code>, <code>geom_rect</code> creates area either using its center point (<code>geom_tile()</code>) or its four corner (<code>geom_rect()</code>) defined by <code>xmin</code>, <code>xmax</code>, <code>ymin</code>, and <code>ymax</code> (see example…);</li>
<li><code>geom_raster()</code> is a high performance special case of <code>geom_tile()</code>/<code>geom_rect</code> where all the tiles have the same size.</li>
</ul></li>
</ul>
<p>Besides <code>geom*()</code>, a lot of graphical parameters can further be controlled. This includes of course the <code>theme()</code> and the <code>aes()</code>:</p>
<ul>
<li>For pre-defined themes, see example;</li>
<li><code>axis</code> parameters including its title (<code>axis.title</code>), text (<code>axis.text</code>), ticks (<code>axis.ticks</code>), line (<code>axis.line</code>), and all their sub-levels.</li>
<li><code>legend</code> parameters including its position (<code>legend.position</code>), direction (<code>legend.direction</code>), its text (<code>legend.text</code>, <code>legend.title</code>), the design of the box (<code>legend.box</code>, <code>legend.background</code>) etc.</li>
<li><code>panel</code> parameters including its background (<code>panel.background</code>), the grid lines (<code>panel.grid</code>), the border (<code>panel.border</code>), etc.</li>
<li><code>plot</code> parameters including the different titles (<code>plot.title</code>, <code>plot.subtitle</code>, <code>plot.caption</code>), the background (<code>plot.backgorund</code>), etc.</li>
</ul>
<p>Most of these parameters can be controlled at different levels of granularity:</p>
<ul>
<li>overall, e.g. <code>panel.grid</code>;</li>
<li>more detailed, e.g. <code>panel.grid.major</code> and <code>panel.grid.minor</code>;</li>
<li>most detailed, e.g. <code>panel.grid.major.x</code>, <code>panel.grid.major.y</code>, etc.</li>
</ul>
<p>Depending whether the option to modify is some text, a line, or a rectangle, <code>element_text()</code>, <code>element_line()</code>, or <code>element_rect()</code> is used to control them. These functions provide general (e.g. <code>color</code>) as well as specific options (e.g. <code>family</code> and <code>face</code> for text, <code>linetype</code> for lines etc.) to each type.</p>
<p>Note that if some elements should be left blank, <code>element_blank()</code> can be used regardless of the nature of the element.</p>
<p>Let’s illustrate these concepts using our previous graph stored in <code>line_p</code>. Here, the goal is to remove the grid line, to replace the x and y axis lines by arrows, and to re-position the axis titles to the far end of the axis so that it is next to the arrow head.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-viz.html#cb62-1" aria-hidden="true" tabindex="-1"></a>line_p <span class="sc">+</span></span>
<span id="cb62-2"><a href="data-viz.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid=</span><span class="fu">element_blank</span>(), </span>
<span id="cb62-3"><a href="data-viz.html#cb62-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border=</span><span class="fu">element_blank</span>(),</span>
<span id="cb62-4"><a href="data-viz.html#cb62-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line=</span><span class="fu">element_line</span>(<span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">ends =</span> <span class="st">&quot;last&quot;</span>, <span class="at">type =</span> <span class="st">&quot;closed&quot;</span>)),</span>
<span id="cb62-5"><a href="data-viz.html#cb62-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">1</span>))</span></code></pre></div>
<p>Similarly to the theme, aesthetics can also be adjusted. In previous examples, we controlled the x-axis in <code>bar_p</code> by setting limits, providing breaks and replacing the values by certain labels using <code>scale_x_continuous()</code>.
Most aesthetics parameters can be controlled by equivalent functions, named using the following structure <code>scale_*nameaes*_*typescale*</code>, and where:</p>
<ul>
<li><em>nameaes</em> corresponds to any aesthetics including <code>x</code>, <code>y</code>, <code>colour</code> or <code>fill</code>, <code>alpha</code>, etc.</li>
<li><em>typescale</em> corresponds to the type of scale, where it is <code>continuous</code>, <code>discrete</code>, or <code>manual</code> amongst others.</li>
</ul>
<p>Such function fully controls how the corresponding aesthetic should behave, by providing the correspondence between a variable level and its color for instance. In the graph saved in <code>bar_p</code>, remember that we filled in the bar chart using the product information. Let’s imagine that we are particularly interested in biscuit P3, and want to compare it to the rest of the biscuits. We propose to make P3 stand out by filling it in orange, and by setting all the other biscuits in the same gray tone.
Such procedure can be done using <code>scale_fill_manual()</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-viz.html#cb63-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="sc">+</span> </span>
<span id="cb63-2"><a href="data-viz.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P1&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>, <span class="st">&quot;P2&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>, <span class="st">&quot;P3&quot;</span><span class="ot">=</span><span class="st">&quot;darkorange&quot;</span>, <span class="st">&quot;P4&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>, <span class="st">&quot;P5&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>,</span>
<span id="cb63-3"><a href="data-viz.html#cb63-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;P6&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>, <span class="st">&quot;P7&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>, <span class="st">&quot;P8&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>, <span class="st">&quot;P9&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>, <span class="st">&quot;P10&quot;</span><span class="ot">=</span><span class="st">&quot;gray50&quot;</span>))</span></code></pre></div>
<p>When multiple aesthetics are being used, the legend might become overwhelming or redundant. It is possible to turn off some of these visuals within the <code>scale_*()</code> functions, or by using <code>guides()</code> and by setting <code>nameaes='none'</code> as shown in the <code>line_p</code> example.</p>
</div>
<div id="miscealleneous" class="section level3" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Miscealleneous</h3>
<div id="structuring-the-axis" class="section level4" number="5.3.4.1">
<h4><span class="header-section-number">5.3.4.1</span> Structuring the axis</h4>
<p>By default, <code>ggplot()</code> generates plot that fits the data and that fits within the output screen. This means that some graphics might not be perfectly representing the data due to some distortion. In a previous example (<code>line_p</code>), we showed how to ensure that the dimensions are directly comparable through <code>coord_fixed()</code>.</p>
<p>Other transformation can also be performed. For instance, the graphic can be transposed using <code>coord_flip()</code> as in the following example:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-viz.html#cb64-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<p>To conclude this section, and summarize most concepts that we presented in this chapter, let’s introduce the well-known spider plots. We are aware that such plots are quite polarizing amongst analysts. The decision of presenting such plots here is purely educational, as 1. there are no pre-defined options <code>{ggplot2}</code> that provides such charts, and 2. they present some interesting challenges.</p>
<p>Let’s start with deconstructing a spider-plot: a splider plot is a line chart presented in a circular way. So let’s start with building a line chart that suits us of sensory profiles (we consider the means here). For more clarity, we only represent two of the samples (<code>P1</code> and <code>POpt</code>).</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-viz.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Constructing the Mean Table</span></span>
<span id="cb65-2"><a href="data-viz.html#cb65-2" aria-hidden="true" tabindex="-1"></a>sensory_mean <span class="ot">&lt;-</span> sensory <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="data-viz.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(Shiny<span class="sc">:</span>Melting, <span class="at">names_to=</span><span class="st">&quot;Variables&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;Scores&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-4"><a href="data-viz.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Variables =</span> <span class="fu">fct_inorder</span>(Variables)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-5"><a href="data-viz.html#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Product, Variables) <span class="sc">%&gt;%</span> </span>
<span id="cb65-6"><a href="data-viz.html#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Scores)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-7"><a href="data-viz.html#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-8"><a href="data-viz.html#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Product <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;P03&quot;</span>, <span class="st">&quot;POpt&quot;</span>))</span>
<span id="cb65-9"><a href="data-viz.html#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="data-viz.html#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Building the Line Chart</span></span>
<span id="cb65-11"><a href="data-viz.html#cb65-11" aria-hidden="true" tabindex="-1"></a>spider_line <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory_mean, <span class="fu">aes</span>(<span class="at">x=</span>Variables, <span class="at">y=</span>Mean, <span class="at">colour=</span>Product, <span class="at">linetype=</span>Product))<span class="sc">+</span></span>
<span id="cb65-12"><a href="data-viz.html#cb65-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">pch=</span><span class="dv">20</span>, <span class="at">cex=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb65-13"><a href="data-viz.html#cb65-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group=</span>Product), <span class="at">lwd=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb65-14"><a href="data-viz.html#cb65-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb65-15"><a href="data-viz.html#cb65-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb65-16"><a href="data-viz.html#cb65-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;&quot;</span>, <span class="at">labels=</span><span class="cn">NULL</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb65-17"><a href="data-viz.html#cb65-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;darkorange&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;grey50&quot;</span>))<span class="sc">+</span></span>
<span id="cb65-18"><a href="data-viz.html#cb65-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;solid&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;dashed&quot;</span>))</span></code></pre></div>
<p>Next step is to represent this line chart in a circular way. This can be done using <code>coord_polar()</code>:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-viz.html#cb66-1" aria-hidden="true" tabindex="-1"></a>spider_line <span class="sc">+</span> <span class="fu">coord_polar</span>()</span></code></pre></div>
<p>This already looks like a spider plot! However, a closer look at it highlights a point that needs improvement: there is no connection between the last attribute (<code>Melting</code>) and the first one (<code>Shiny</code>).</p>
<p>To counter this, the following twofold solution is proposed:
1. Associated each attribute to its position (e.g. <code>Shiny</code> is 1, <code>External color intensity</code> is 2, until <code>Melting</code> which would be 32 here);
2. Duplicate the last attribute (<code>Melting</code>) and associate it to position 0.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-viz.html#cb67-1" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> <span class="fu">levels</span>(sensory_mean<span class="sc">$</span>Variables)</span>
<span id="cb67-2"><a href="data-viz.html#cb67-2" aria-hidden="true" tabindex="-1"></a>sensory_mean_pos <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Variables =</span> <span class="fu">c</span>(var[<span class="fu">length</span>(var)], var),</span>
<span id="cb67-3"><a href="data-viz.html#cb67-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Position =</span> <span class="dv">0</span><span class="sc">:</span><span class="fu">length</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb67-4"><a href="data-viz.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(sensory_mean, var_pos, <span class="at">by=</span><span class="st">&quot;Variables&quot;</span>)</span></code></pre></div>
<p>We rebuild the previous graph except that the x-axis is now defined by <code>Position</code> (we use <code>Variables</code> as labels). Although position 0 is not being included, we only show labels going from 1 to the last variable.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-viz.html#cb68-1" aria-hidden="true" tabindex="-1"></a>spiderplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory_mean_pos, <span class="fu">aes</span>(<span class="at">x=</span>Position, <span class="at">y=</span>Mean, <span class="at">colour=</span>Product, <span class="at">linetype=</span>Product))<span class="sc">+</span></span>
<span id="cb68-2"><a href="data-viz.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">pch=</span><span class="dv">20</span>, <span class="at">cex=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb68-3"><a href="data-viz.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group=</span>Product), <span class="at">lwd=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb68-4"><a href="data-viz.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb68-5"><a href="data-viz.html#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name=</span><span class="st">&quot;&quot;</span>, <span class="at">breaks=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(var), <span class="at">labels=</span>var, <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">length</span>(var)))<span class="sc">+</span></span>
<span id="cb68-6"><a href="data-viz.html#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;&quot;</span>, <span class="at">labels=</span><span class="cn">NULL</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb68-7"><a href="data-viz.html#cb68-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;darkorange&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;grey50&quot;</span>))<span class="sc">+</span></span>
<span id="cb68-8"><a href="data-viz.html#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;solid&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;dashed&quot;</span>))<span class="sc">+</span></span>
<span id="cb68-9"><a href="data-viz.html#cb68-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>()</span></code></pre></div>
</div>
<div id="combining-plots" class="section level4" number="5.3.4.2">
<h4><span class="header-section-number">5.3.4.2</span> Combining plots</h4>
<p>When multiple plots should be generated using the same pattern on subset of data, it is possible to generate them automatically using <code>facet_wrap()</code> or <code>facet_grid()</code>. The difference between these two functions rely in the number of variables to use for the split: in <code>facet_wrap()</code>, the graphics are <em>vectorized</em>, meaning that each element of the split is represented independently. For <code>facet_grid()</code> however, the graphics is represented in a matrix, meaning that two blocks of split variables are required, one defining the columns and one the rows.</p>
<p>An example of <code>facet_wrap()</code> is provided in (ref data analysis).</p>
<p>For these two functions, the parameter <code>scales</code> is particularly interesting as it allows each separate graph to use its own axis scales (<code>free</code> or individually using <code>free_x</code>/<code>free_y</code>) or not (<code>fixed</code>).</p>
<p>Such procedure is very handy to produce multiple graphs all at once…when the data allow it.
When multiple plot are being generated separately (using different data set, or producing different types of plots), it can still be relevant to combine them all in one. To perform such collage, the package <code>{patchwork}</code> becomes very handy thanks to its ease of use and its power.</p>
<p>Indeed, <code>{patchwork}</code> is a package that allows combining easily <code>ggplot()</code> graphs using mathematical operations.
To add two elements next to each others, they should simply be separated by <code>+</code>. To add two elements on top of each others, just separate them using <code>/</code>. This operation can be combined with <code>()</code> to generate fancy collage.</p>
<p>Let’s illustrate this by creating a plot with one the left side <code>spiderplot</code>, and on the right side <code>bar_p</code> on top of <code>line_p</code>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-viz.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb69-2"><a href="data-viz.html#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="data-viz.html#cb69-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">=</span> spiderplot <span class="sc">+</span> (bar_p <span class="sc">/</span> line_p)</span>
<span id="cb69-4"><a href="data-viz.html#cb69-4" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p>We could then add a title as well as tag levels (handy for publications!) to the results using <code>plot_annotation()</code>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-viz.html#cb70-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">&quot;Example of &#39;ggplots&#39; I&#39;ve learned today&quot;</span>, <span class="at">tag_levels=</span><span class="st">&#39;a&#39;</span>)</span></code></pre></div>
</div>
</div>
<div id="few-tips-and-tricks" class="section level3" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Few Tips and Tricks</h3>
<div id="combining-data-transformation-and-ggplot2-grammar" class="section level4" number="5.3.5.1">
<h4><span class="header-section-number">5.3.5.1</span> Combining data transformation and <code>{ggplot2}</code> grammar</h4>
<!-- Is there anything missing in this sentence: 'It is however to combine'? Maybe would that be: It is however possible to combine... -->
<p>Both the <code>{tidyverse}</code> and <code>{ggplot2}</code> are using pipes to combine lines of code or layers.
However, the pipes themselves are defined differently since <code>{maggritr}</code> uses <code>%&gt;%</code> whereas <code>{ggplot2}</code> uses <code>+</code>.
It is however to combine both systems one after each other, just remember to switch from <code>%&gt;%</code> to <code>+</code> as you transition from data transformation/tidying to building your graph (see example…).</p>
</div>
<div id="ordering-elements-in-a-plot" class="section level4" number="5.3.5.2">
<h4><span class="header-section-number">5.3.5.2</span> Ordering elements in a plot</h4>
<p>When building a graph using a categorical variables, <code>{ggplot2}</code> tends to represent the different levels in alphabetical order, especially if the variable is defined as character. Such situation can make the graph more difficult to read, as the categories may not be presented in a logical order (e.g. fall, spring, summer, winter instead of spring, summer, fall, winter).</p>
<p>To ensure that the elements are in the order that are relevant for you, either consider transforming the variables into factor (using <code>factor()</code> and by indicating the levels order of your choice, or using <code>fct_inorder()</code> if you want to keep the order as is in the file, see example…) or by using a position variable as in the <code>spiderplot</code> example. The former option also works for ordering elements in the legend.</p>
<p>If the order of the elements to change are <em>within the charts</em>, they may be reverted within the <code>geom_*()</code> function directly. This is for instance the case with stacked bar chart, in which the order may be reverted using the parameter <code>position = position_fill(reverse = TRUE)</code> for instance (suggesting here that the split was defined through <code>fill</code> in <code>aes()</code>).</p>
</div>
<div id="fixing-overlapping-axis-text" class="section level4" number="5.3.5.3">
<h4><span class="header-section-number">5.3.5.3</span> Fixing overlapping axis text</h4>
<p>When <code>ggplot()</code> are being built using categorical variables, the labels used on the x-axis are often overlapping making some (or all) of them unreadable. If it is possible to reduce the size of the label, and/or to shorten them without losing clarity, then this can be first good step. However, this might not always possible or sufficient. In these latter instances, we need to adjust them. Let’s use <code>spider_line</code> as illustration to show three possible solutions.</p>
<p>The first option consists in using <code>theme()</code> and rotating the labels (here at 45 degrees, but use 90 degrees to get the names vertically). Note that by default, <code>ggplot()</code> center the labels: to avoid having them crossing the x-axis line, we need to left-center them using <code>hadj=1</code>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-viz.html#cb71-1" aria-hidden="true" tabindex="-1"></a>spider_line <span class="sc">+</span> </span>
<span id="cb71-2"><a href="data-viz.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">45</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code></pre></div>
<p>A second option consists in dodging one every two labels along the x-axis. This option works if the labels are not too long, as can be seen in the example below. Note that this option is accessible within <code>scale_x_discrete()</code>, not within <code>theme()</code> as we would expect:</p>
<!-- When reading the sentence above I would expect to have an example where the labels are not loo long, but when we run the code, this is not the case. The labels are long and overlap between them -->
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-viz.html#cb72-1" aria-hidden="true" tabindex="-1"></a>spider_line <span class="sc">+</span> </span>
<span id="cb72-2"><a href="data-viz.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">n.dodge =</span> <span class="dv">2</span>))</span></code></pre></div>
<p>Last option consists in transposing the graph using <code>coord_flip()</code>. This solution works well since labels on the y-axis are written horizontally. However, this option is not always suitable due to conventions: we would definitely recommend it for bar charts, but not for line charts for instance.</p>
</div>
<div id="exporting-graphs" class="section level4" number="5.3.5.4">
<h4><span class="header-section-number">5.3.5.4</span> Exporting graphs</h4>
<p>There are various ways to save or export <code>ggplot()</code> charts. To save these plots to your computer in various formats (e.g. png, pdf, etc.), we recommend the use of <code>ggsave()</code>. By default, <code>ggsave()</code> exports the last plot build and saves it in the location defined by <code>filename</code>, in the format defined by <code>device</code> (additional information regarding the width, height, dpi etc. can also be configured).</p>
<p>For instance, we can save <code>spiderplot</code><a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a> as following:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-viz.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;spiderplot.png&quot;</span>, <span class="at">plot=</span>spiderplot, <span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span></code></pre></div>
<p>As an alternative, <code>ggplot()</code> graphs can also be exported in PowerPoint or Word through the <code>{rvg}</code> package (see example).</p>
</div>
<div id="additional-libraries" class="section level4" number="5.3.5.5">
<h4><span class="header-section-number">5.3.5.5</span> Additional libraries</h4>
<p><code>{ggplot2}</code> is a very powerful tool for data visualization. By default, it offers a very large variety of possibilities, which should cover most situations that you would encounter. If not, please search as you will most likely find ggplot extensions in alternative packages. Here is a non-exhaustive list of specific packages that we find relevant:</p>
<ul>
<li><code>ggcharts</code>: This package provides nice and clear alternatives to some <code>{ggplot2}</code> options through simple functions in one line of code, including <code>bar_chart()</code>, <code>line_chart()</code>, <code>lollipop_chart()</code> and <code>dumbbell_chart()</code> just to name a few.</li>
<li><code>{factoextra}</code>: Although the latest version of <code>{FactoMineR}</code> also proposes generating graphs in <code>{ggplot2}</code>, <code>{factoextra}</code> is a great extension as it is easy to use and provides a wide variety of options to customize your plots.</li>
<li><code>{ggcorrplot}</code>: There are many packages that propose to visualize graphically tables of correlations, however we particularly like this one for its simplicity and its flexibility.</li>
<li><code>{ggwordcloud}</code>: It is a great package for building word-clouds as it provides a large degree of control. With this package, the words can either be positioned totally randomly, but can also be positioned in a given shape, or words can be positioned semi-randomly, hence giving more interpretation power to the final results (for more information, please visit <a href="https://lepennec.github.io/ggwordcloud/" class="uri">https://lepennec.github.io/ggwordcloud/</a><a href="https://lepennec.github.io/ggwordcloud/">link</a>).</li>
<li><code>{ggraph}</code>: This package provides neat solutions to build network visualization in <code>{ggplot2}</code>.</li>
</ul>
<p>To learn more about <code>{ggplot2}</code> basics, we recommend two additional source of information:</p>
<ul>
<li><code>{esquisse}</code>: After loading the package, run the function <code>esquisser()</code>. This command opens a window in which you can select your data set (the data set should be available within you R environment), the type of plot to build, which variable to be used as x-axis, y-axis, etc. Not only this tool provides with an easy way to build your graph, it is also educational as the code thus generated is visible (so you can re-use it and/or try to understand to apply it in other situations).</li>
<li><a href="https://www.data-to-viz.com/" class="uri">https://www.data-to-viz.com/</a><a href="https://www.data-to-viz.com/">link</a> provides a wide gallery of graphics sorted by the type of data that you have. Each graphic proposed is illustrated with an example provided in R (<code>{ggplot2}</code>) and in Python. This website is hence inspirational and educational both at the same time!</li>
</ul>

</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="13">
<li id="fn13"><p>You can also use <code>alpha</code> to control for the transparency of the elements by defining values between 0 (completely transparent) to 1 (no transparency)<a href="data-viz.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>Try using <code>geom_label()</code> instead of <code>geom_text()</code> to see the difference between these two<a href="data-viz.html#fnref14" class="footnote-back">↩︎</a></p></li>
<li id="fn15"><p>This code could even be simplified by using <code>geom_col()</code> since <code>geom_col()</code> corresponds to <code>geom_bar()</code> with <code>stat="identity"</code> as default.<a href="data-viz.html#fnref15" class="footnote-back">↩︎</a></p></li>
<li id="fn16"><p>This function can also be used to draw arrows through the parameter <code>arrow</code> and the function of that same name <code>arrow()</code>.<a href="data-viz.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p>In Sensory and Consumer science, this will often be used for building surface plot responses (e.g. external preference map), and hence is associated to <code>geom_contour()</code> to show the different lines.<a href="data-viz.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>Since <code>spiderplot</code> is not the last plot generated, we need to define it in <code>plot</code>.<a href="data-viz.html#fnref18" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-manip.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="auto-report.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["i2ds4scc_bookdown.pdf", "i2ds4scc_bookdown.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
