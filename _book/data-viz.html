<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Data Visualization | Data Science for Sensory and Consumer Scientists</title>
  <meta name="description" content="Open development of data science book for sensory and consumer scientists." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Data Visualization | Data Science for Sensory and Consumer Scientists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Open development of data science book for sensory and consumer scientists." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Data Visualization | Data Science for Sensory and Consumer Scientists" />
  
  <meta name="twitter:description" content="Open development of data science book for sensory and consumer scientists." />
  

<meta name="author" content="Thierry Worch, Julien Delarue, Vanessa Rios de Souza, and John Ennis" />


<meta name="date" content="2022-11-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-manip.html"/>
<link rel="next" href="auto-report.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<link href="libs/tabwid-1.0.0/scrool.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science for Sensory and Consumer Scientists</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-should-read-this-book"><i class="fa fa-check"></i>Who Should Read This Book?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-is-this-book-structured"><i class="fa fa-check"></i>How Is This Book Structured</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i>How To Use This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface-1.html"><a href="preface-1.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="bienvenue.html"><a href="bienvenue.html"><i class="fa fa-check"></i><b>1</b> Bienvenue!</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#why-data-science-for-sensory-and-consumer-science"><i class="fa fa-check"></i>Why Data Science for Sensory and Consumer Science?</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#core-principles-in-sensory-and-consumer-science"><i class="fa fa-check"></i>Core principles in Sensory and Consumer Science</a></li>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#computational-sensory-science"><i class="fa fa-check"></i>Computational Sensory Science</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Apéritifs</b></span></li>
<li class="chapter" data-level="2" data-path="start-R.html"><a href="start-R.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="start-R.html"><a href="start-R.html#introduction-to-r"><i class="fa fa-check"></i><b>2.1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="start-R.html"><a href="start-R.html#what-is-r"><i class="fa fa-check"></i><b>2.1.1</b> What is R?</a></li>
<li class="chapter" data-level="2.1.2" data-path="start-R.html"><a href="start-R.html#why-learning-r-or-any-programming-language"><i class="fa fa-check"></i><b>2.1.2</b> Why Learning R (or any Programming Language)?</a></li>
<li class="chapter" data-level="2.1.3" data-path="start-R.html"><a href="start-R.html#why-r"><i class="fa fa-check"></i><b>2.1.3</b> Why R?</a></li>
<li class="chapter" data-level="2.1.4" data-path="start-R.html"><a href="start-R.html#rstudio"><i class="fa fa-check"></i><b>2.1.4</b> Why RStudio/Posit?</a></li>
<li class="chapter" data-level="2.1.5" data-path="start-R.html"><a href="start-R.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.1.5</b> Installing R and RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="start-R.html"><a href="start-R.html#getting-started-in-r"><i class="fa fa-check"></i><b>2.2</b> Getting Started in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="start-R.html"><a href="start-R.html#packages"><i class="fa fa-check"></i><b>2.2.1</b> Conventions</a></li>
<li class="chapter" data-level="2.2.2" data-path="start-R.html"><a href="start-R.html#install-and-load-packages"><i class="fa fa-check"></i><b>2.2.2</b> Install and Load Packages</a></li>
<li class="chapter" data-level="2.2.3" data-path="start-R.html"><a href="start-R.html#first-analysis-in-r"><i class="fa fa-check"></i><b>2.2.3</b> First Analysis in R</a></li>
<li class="chapter" data-level="2.2.4" data-path="start-R.html"><a href="start-R.html#scripts"><i class="fa fa-check"></i><b>2.2.4</b> R Scripts</a></li>
<li class="chapter" data-level="2.2.5" data-path="start-R.html"><a href="start-R.html#rprojects"><i class="fa fa-check"></i><b>2.2.5</b> Create a Local Project</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="start-R.html"><a href="start-R.html#further-tips-on-how-to-read-this-book"><i class="fa fa-check"></i><b>2.3</b> Further tips on <em>how to read this book?</em></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="start-R.html"><a href="start-R.html#pipes"><i class="fa fa-check"></i><b>2.3.1</b> Introduction to the <code>{magrittr}</code> and the notion of <em>pipes</em></a></li>
<li class="chapter" data-level="2.3.2" data-path="start-R.html"><a href="start-R.html#calling-variables"><i class="fa fa-check"></i><b>2.3.2</b> Calling Variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="start-R.html"><a href="start-R.html#print-save"><i class="fa fa-check"></i><b>2.3.3</b> Printing vs. Saving results</a></li>
<li class="chapter" data-level="2.3.4" data-path="start-R.html"><a href="start-R.html#running-code-and-handling-errors"><i class="fa fa-check"></i><b>2.3.4</b> Running code and handling errors</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="start-R.html"><a href="start-R.html#git-and-github"><i class="fa fa-check"></i><b>2.4</b> Version Control / Git and GitHub</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="start-R.html"><a href="start-R.html#git"><i class="fa fa-check"></i><b>2.4.1</b> Git</a></li>
<li class="chapter" data-level="2.4.2" data-path="start-R.html"><a href="start-R.html#github"><i class="fa fa-check"></i><b>2.4.2</b> GitHub</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Hors d’Oeuvres</b></span></li>
<li class="chapter" data-level="3" data-path="data_science.html"><a href="data_science.html"><i class="fa fa-check"></i><b>3</b> Why Data Science?</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data_science.html"><a href="data_science.html#history-and-definition"><i class="fa fa-check"></i><b>3.1</b> History and Definition</a></li>
<li class="chapter" data-level="3.2" data-path="data_science.html"><a href="data_science.html#benefits-of-data-science"><i class="fa fa-check"></i><b>3.2</b> Benefits of Data Science</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data_science.html"><a href="data_science.html#reproducible-research"><i class="fa fa-check"></i><b>3.2.1</b> Reproducible Research</a></li>
<li class="chapter" data-level="3.2.2" data-path="data_science.html"><a href="data_science.html#standardized-reporting"><i class="fa fa-check"></i><b>3.2.2</b> Standardized Reporting</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data_science.html"><a href="data_science.html#data-scientific-workflow"><i class="fa fa-check"></i><b>3.3</b> Data Scientific Workflow</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data_science.html"><a href="data_science.html#data-collection2"><i class="fa fa-check"></i><b>3.3.1</b> Data Collection</a></li>
<li class="chapter" data-level="3.3.2" data-path="data_science.html"><a href="data_science.html#data-preparation"><i class="fa fa-check"></i><b>3.3.2</b> Data Preparation</a></li>
<li class="chapter" data-level="3.3.3" data-path="data_science.html"><a href="data_science.html#data-analysis2"><i class="fa fa-check"></i><b>3.3.3</b> Data Analysis</a></li>
<li class="chapter" data-level="3.3.4" data-path="data_science.html"><a href="data_science.html#value-delivery2"><i class="fa fa-check"></i><b>3.3.4</b> Value Delivery</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data_science.html"><a href="data_science.html#how-to-learn-data-science"><i class="fa fa-check"></i><b>3.4</b> How to Learn Data Science</a></li>
<li class="chapter" data-level="3.5" data-path="data_science.html"><a href="data_science.html#cautions-dont-that-everybody-does"><i class="fa fa-check"></i><b>3.5</b> Cautions: Don’t that Everybody Does</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manip.html"><a href="data-manip.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manip.html"><a href="data-manip.html#why-manipulating-data"><i class="fa fa-check"></i><b>4.1</b> Why Manipulating Data?</a></li>
<li class="chapter" data-level="4.2" data-path="data-manip.html"><a href="data-manip.html#tidy-data"><i class="fa fa-check"></i><b>4.2</b> Tidying Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-manip.html"><a href="data-manip.html#simple-manipulations"><i class="fa fa-check"></i><b>4.2.1</b> Simple Manipulations</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manip.html"><a href="data-manip.html#pivots"><i class="fa fa-check"></i><b>4.2.2</b> Reshaping Data</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-manip.html"><a href="data-manip.html#transformation-that-alters-the-data"><i class="fa fa-check"></i><b>4.2.3</b> Transformation that Alters the Data</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-manip.html"><a href="data-manip.html#combining-data-from-different-sources"><i class="fa fa-check"></i><b>4.2.4</b> Combining Data from Different Sources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-viz.html"><a href="data-viz.html"><i class="fa fa-check"></i><b>5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-viz.html"><a href="data-viz.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="data-viz.html"><a href="data-viz.html#design-principles"><i class="fa fa-check"></i><b>5.2</b> Design Principles</a></li>
<li class="chapter" data-level="5.3" data-path="data-viz.html"><a href="data-viz.html#table_making"><i class="fa fa-check"></i><b>5.3</b> Table Making</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-viz.html"><a href="data-viz.html#flextable"><i class="fa fa-check"></i><b>5.3.1</b> Introduction to <code>{flextable}</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="data-viz.html"><a href="data-viz.html#introdution-to-gt"><i class="fa fa-check"></i><b>5.3.2</b> Introdution to <code>{gt}</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-viz.html"><a href="data-viz.html#chart-making"><i class="fa fa-check"></i><b>5.4</b> Chart Making</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-viz.html"><a href="data-viz.html#philosophy-of-ggplot2"><i class="fa fa-check"></i><b>5.4.1</b> Philosophy of <code>{ggplot2}</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="data-viz.html"><a href="data-viz.html#getting-started-with-ggplot2"><i class="fa fa-check"></i><b>5.4.2</b> Getting started with <code>{ggplot2}</code></a></li>
<li class="chapter" data-level="5.4.3" data-path="data-viz.html"><a href="data-viz.html#common-charts"><i class="fa fa-check"></i><b>5.4.3</b> Common Charts</a></li>
<li class="chapter" data-level="5.4.4" data-path="data-viz.html"><a href="data-viz.html#miscealleneous"><i class="fa fa-check"></i><b>5.4.4</b> Miscealleneous</a></li>
<li class="chapter" data-level="5.4.5" data-path="data-viz.html"><a href="data-viz.html#few-additional-tips-and-tricks"><i class="fa fa-check"></i><b>5.4.5</b> Few Additional Tips and Tricks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="auto-report.html"><a href="auto-report.html"><i class="fa fa-check"></i><b>6</b> Automated Reporting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="auto-report.html"><a href="auto-report.html#what-and-why-automated-reporting"><i class="fa fa-check"></i><b>6.1</b> What and why Automated Reporting?</a></li>
<li class="chapter" data-level="6.2" data-path="auto-report.html"><a href="auto-report.html#integrating-reports-within-analyses-scripts"><i class="fa fa-check"></i><b>6.2</b> Integrating reports within analyses scripts</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="auto-report.html"><a href="auto-report.html#excel"><i class="fa fa-check"></i><b>6.2.1</b> Excel</a></li>
<li class="chapter" data-level="6.2.2" data-path="auto-report.html"><a href="auto-report.html#powerpoint"><i class="fa fa-check"></i><b>6.2.2</b> PowerPoint</a></li>
<li class="chapter" data-level="6.2.3" data-path="auto-report.html"><a href="auto-report.html#word"><i class="fa fa-check"></i><b>6.2.3</b> Word</a></li>
<li class="chapter" data-level="6.2.4" data-path="auto-report.html"><a href="auto-report.html#notes-on-applying-corporate-branding"><i class="fa fa-check"></i><b>6.2.4</b> Notes on applying corporate branding</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="auto-report.html"><a href="auto-report.html#integrating-analyses-scripts-within-your-reporting-tool"><i class="fa fa-check"></i><b>6.3</b> Integrating analyses scripts within your reporting tool</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="auto-report.html"><a href="auto-report.html#what-is-rmarkdown"><i class="fa fa-check"></i><b>6.3.1</b> What is <code>{rmarkdown}</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="auto-report.html"><a href="auto-report.html#starting-with-rmarkdown"><i class="fa fa-check"></i><b>6.3.2</b> Starting with {rmarkdown}</a></li>
<li class="chapter" data-level="6.3.3" data-path="auto-report.html"><a href="auto-report.html#rmarkdown-through-a-simple-example"><i class="fa fa-check"></i><b>6.3.3</b> <code>{rmarkdown}</code> through a Simple Example</a></li>
<li class="chapter" data-level="6.3.4" data-path="auto-report.html"><a href="auto-report.html#creating-a-document-using-knitr"><i class="fa fa-check"></i><b>6.3.4</b> Creating a document using <code>{knitr}</code></a></li>
<li class="chapter" data-level="6.3.5" data-path="auto-report.html"><a href="auto-report.html#example-of-applications"><i class="fa fa-check"></i><b>6.3.5</b> Example of applications</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="auto-report.html"><a href="auto-report.html#to-go-further"><i class="fa fa-check"></i><b>6.4</b> To go further…</a></li>
</ul></li>
<li class="part"><span><b>Bon Appétit</b></span></li>
<li class="chapter" data-level="7" data-path="example-projects.html"><a href="example-projects.html"><i class="fa fa-check"></i><b>7</b> Example Project: The Biscuit Study</a>
<ul>
<li class="chapter" data-level="7.1" data-path="example-projects.html"><a href="example-projects.html#objective-of-the-test"><i class="fa fa-check"></i><b>7.1</b> Objective of the Test</a></li>
<li class="chapter" data-level="7.2" data-path="example-projects.html"><a href="example-projects.html#products"><i class="fa fa-check"></i><b>7.2</b> Products</a></li>
<li class="chapter" data-level="7.3" data-path="example-projects.html"><a href="example-projects.html#consumer-test"><i class="fa fa-check"></i><b>7.3</b> Consumer test</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="example-projects.html"><a href="example-projects.html#participants"><i class="fa fa-check"></i><b>7.3.1</b> Participants</a></li>
<li class="chapter" data-level="7.3.2" data-path="example-projects.html"><a href="example-projects.html#test-design"><i class="fa fa-check"></i><b>7.3.2</b> Test design</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="example-projects.html"><a href="example-projects.html#sensory-descriptive-analysis-data"><i class="fa fa-check"></i><b>7.4</b> Sensory descriptive analysis data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-collection.html"><a href="data-collection.html"><i class="fa fa-check"></i><b>8</b> Data Collection</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-collection.html"><a href="data-collection.html#designs-of-sensory-doe-experiments"><i class="fa fa-check"></i><b>8.1</b> Designs of sensory (DoE) experiments</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="data-collection.html"><a href="data-collection.html#general-approach"><i class="fa fa-check"></i><b>8.1.1</b> General approach</a></li>
<li class="chapter" data-level="8.1.2" data-path="data-collection.html"><a href="data-collection.html#Crossover"><i class="fa fa-check"></i><b>8.1.2</b> Crossover designs</a></li>
<li class="chapter" data-level="8.1.3" data-path="data-collection.html"><a href="data-collection.html#BIBD"><i class="fa fa-check"></i><b>8.1.3</b> Balanced incomplete block designs (BIBD)</a></li>
<li class="chapter" data-level="8.1.4" data-path="data-collection.html"><a href="data-collection.html#incomplete-designs-for-hedonic-tests-sensory-informed-designs"><i class="fa fa-check"></i><b>8.1.4</b> Incomplete designs for hedonic tests: Sensory informed designs</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="data-collection.html"><a href="data-collection.html#product-related-designs"><i class="fa fa-check"></i><b>8.2</b> Product-related designs</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="data-collection.html"><a href="data-collection.html#factorial-designs"><i class="fa fa-check"></i><b>8.2.1</b> Factorial designs</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-collection.html"><a href="data-collection.html#mixture-designs"><i class="fa fa-check"></i><b>8.2.2</b> Mixture designs</a></li>
<li class="chapter" data-level="8.2.3" data-path="data-collection.html"><a href="data-collection.html#screening-designs"><i class="fa fa-check"></i><b>8.2.3</b> Screening designs</a></li>
<li class="chapter" data-level="8.2.4" data-path="data-collection.html"><a href="data-collection.html#sensory-informed-designs"><i class="fa fa-check"></i><b>8.2.4</b> Sensory informed designs</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-collection.html"><a href="data-collection.html#execute-1"><i class="fa fa-check"></i><b>8.3</b> Execute</a></li>
<li class="chapter" data-level="8.4" data-path="data-collection.html"><a href="data-collection.html#data-import"><i class="fa fa-check"></i><b>8.4</b> Import</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="data-collection.html"><a href="data-collection.html#importing-structured-excel-file"><i class="fa fa-check"></i><b>8.4.1</b> Importing Structured Excel File</a></li>
<li class="chapter" data-level="8.4.2" data-path="data-collection.html"><a href="data-collection.html#importing-unstructured-excel-file"><i class="fa fa-check"></i><b>8.4.2</b> Importing Unstructured Excel File</a></li>
<li class="chapter" data-level="8.4.3" data-path="data-collection.html"><a href="data-collection.html#import-mult-sheet"><i class="fa fa-check"></i><b>8.4.3</b> Importing Data Stored in Multiple Sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-prep.html"><a href="data-prep.html"><i class="fa fa-check"></i><b>9</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data-prep.html"><a href="data-prep.html#introduction-1"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="data-prep.html"><a href="data-prep.html#inspect"><i class="fa fa-check"></i><b>9.2</b> Inspect</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="data-prep.html"><a href="data-prep.html#data-inspection"><i class="fa fa-check"></i><b>9.2.1</b> Data Inspection</a></li>
<li class="chapter" data-level="9.2.2" data-path="data-prep.html"><a href="data-prep.html#missing-data"><i class="fa fa-check"></i><b>9.2.2</b> Missing Data</a></li>
<li class="chapter" data-level="9.2.3" data-path="data-prep.html"><a href="data-prep.html#design-inspection"><i class="fa fa-check"></i><b>9.2.3</b> Design Inspection</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="data-prep.html"><a href="data-prep.html#clean"><i class="fa fa-check"></i><b>9.3</b> Clean</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="data-prep.html"><a href="data-prep.html#handling-data-type"><i class="fa fa-check"></i><b>9.3.1</b> Handling Data Type</a></li>
<li class="chapter" data-level="9.3.2" data-path="data-prep.html"><a href="data-prep.html#converting-between-types"><i class="fa fa-check"></i><b>9.3.2</b> Converting between Types</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>10</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-analysis.html"><a href="data-analysis.html#sensory-data"><i class="fa fa-check"></i><b>10.1</b> Sensory Data</a></li>
<li class="chapter" data-level="10.2" data-path="data-analysis.html"><a href="data-analysis.html#demographic-and-questionnaire-data"><i class="fa fa-check"></i><b>10.2</b> Demographic and Questionnaire Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-analysis.html"><a href="data-analysis.html#demographic-data-frequency-and-proportion"><i class="fa fa-check"></i><b>10.2.1</b> Demographic Data: Frequency and Proportion</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-analysis.html"><a href="data-analysis.html#eating-behavior-traits-tfeq-data"><i class="fa fa-check"></i><b>10.2.2</b> Eating behavior traits: TFEQ data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-analysis.html"><a href="data-analysis.html#consumer-data"><i class="fa fa-check"></i><b>10.3</b> Consumer Data</a></li>
<li class="chapter" data-level="10.4" data-path="data-analysis.html"><a href="data-analysis.html#combining-sensory-and-consumer-data"><i class="fa fa-check"></i><b>10.4</b> Combining Sensory and Consumer Data</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="data-analysis.html"><a href="data-analysis.html#internal-preference-mapping"><i class="fa fa-check"></i><b>10.4.1</b> Internal Preference Mapping</a></li>
<li class="chapter" data-level="10.4.2" data-path="data-analysis.html"><a href="data-analysis.html#consumers-clustering"><i class="fa fa-check"></i><b>10.4.2</b> Consumers Clustering</a></li>
<li class="chapter" data-level="10.4.3" data-path="data-analysis.html"><a href="data-analysis.html#drivers-of-liking"><i class="fa fa-check"></i><b>10.4.3</b> Drivers of Liking</a></li>
<li class="chapter" data-level="10.4.4" data-path="data-analysis.html"><a href="data-analysis.html#external-preference-mapping"><i class="fa fa-check"></i><b>10.4.4</b> External Preference Mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="value-delivery.html"><a href="value-delivery.html"><i class="fa fa-check"></i><b>11</b> Value Delivery</a>
<ul>
<li class="chapter" data-level="11.1" data-path="value-delivery.html"><a href="value-delivery.html#how-to-communicate"><i class="fa fa-check"></i><b>11.1</b> How to Communicate?</a></li>
<li class="chapter" data-level="11.2" data-path="value-delivery.html"><a href="value-delivery.html#exploratory-explanatory-and-predictive-analysis"><i class="fa fa-check"></i><b>11.2</b> Exploratory, Explanatory and Predictive Analysis</a></li>
<li class="chapter" data-level="11.3" data-path="value-delivery.html"><a href="value-delivery.html#audience-awareness"><i class="fa fa-check"></i><b>11.3</b> Audience Awareness</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="value-delivery.html"><a href="value-delivery.html#technical-audience"><i class="fa fa-check"></i><b>11.3.1</b> Technical Audience</a></li>
<li class="chapter" data-level="11.3.2" data-path="value-delivery.html"><a href="value-delivery.html#management"><i class="fa fa-check"></i><b>11.3.2</b> Management</a></li>
<li class="chapter" data-level="11.3.3" data-path="value-delivery.html"><a href="value-delivery.html#general-interest"><i class="fa fa-check"></i><b>11.3.3</b> General Interest</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="value-delivery.html"><a href="value-delivery.html#methods-to-communicate"><i class="fa fa-check"></i><b>11.4</b> Methods to Communicate</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="value-delivery.html"><a href="value-delivery.html#consider-the-mechanism"><i class="fa fa-check"></i><b>11.4.1</b> Consider the Mechanism</a></li>
<li class="chapter" data-level="11.4.2" data-path="value-delivery.html"><a href="value-delivery.html#pick-the-correct-format"><i class="fa fa-check"></i><b>11.4.2</b> Pick the Correct Format</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="value-delivery.html"><a href="value-delivery.html#storytelling"><i class="fa fa-check"></i><b>11.5</b> Storytelling</a></li>
<li class="chapter" data-level="11.6" data-path="value-delivery.html"><a href="value-delivery.html#reformulate2"><i class="fa fa-check"></i><b>11.6</b> Reformulate</a></li>
</ul></li>
<li class="part"><span><b>Haute Cuisine</b></span></li>
<li class="chapter" data-level="12" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>12</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="machine-learning.html"><a href="machine-learning.html#introduction-2"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="machine-learning.html"><a href="machine-learning.html#machine-learning-methods"><i class="fa fa-check"></i><b>12.2</b> Machine Learning Methods</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="machine-learning.html"><a href="machine-learning.html#unsupervised-learning"><i class="fa fa-check"></i><b>12.2.1</b> Unsupervised learning</a></li>
<li class="chapter" data-level="12.2.2" data-path="machine-learning.html"><a href="machine-learning.html#supervised-learning"><i class="fa fa-check"></i><b>12.2.2</b> Supervised learning</a></li>
<li class="chapter" data-level="12.2.3" data-path="machine-learning.html"><a href="machine-learning.html#practical-guide-to-machine-learning"><i class="fa fa-check"></i><b>12.2.3</b> Practical Guide to Machine Learning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>13</b> Text Analysis</a>
<ul>
<li class="chapter" data-level="13.1" data-path="text-analysis.html"><a href="text-analysis.html#introduction-to-natural-language-processing"><i class="fa fa-check"></i><b>13.1</b> Introduction to Natural Language Processing</a></li>
<li class="chapter" data-level="13.2" data-path="text-analysis.html"><a href="text-analysis.html#application-of-text-analysis-in-sensory-and-consumer-science"><i class="fa fa-check"></i><b>13.2</b> Application of Text Analysis in Sensory and Consumer Science</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="text-analysis.html"><a href="text-analysis.html#text-analysis-as-way-to-describe-products"><i class="fa fa-check"></i><b>13.2.1</b> Text analysis as way to describe products</a></li>
<li class="chapter" data-level="13.2.2" data-path="text-analysis.html"><a href="text-analysis.html#objectives-of-text-analysis"><i class="fa fa-check"></i><b>13.2.2</b> Objectives of Text Analysis</a></li>
<li class="chapter" data-level="13.2.3" data-path="text-analysis.html"><a href="text-analysis.html#classical-text-analysis-workflow"><i class="fa fa-check"></i><b>13.2.3</b> Classical <em>text analysis</em> workflow</a></li>
<li class="chapter" data-level="13.2.4" data-path="text-analysis.html"><a href="text-analysis.html#warnings"><i class="fa fa-check"></i><b>13.2.4</b> Warnings</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="text-analysis.html"><a href="text-analysis.html#illustration-using-sorting-task-data"><i class="fa fa-check"></i><b>13.3</b> Illustration using Sorting Task Data</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="text-analysis.html"><a href="text-analysis.html#data-pre-processing"><i class="fa fa-check"></i><b>13.3.1</b> Data Pre-processing</a></li>
<li class="chapter" data-level="13.3.2" data-path="text-analysis.html"><a href="text-analysis.html#introduction-to-working-with-strings-stringr"><i class="fa fa-check"></i><b>13.3.2</b> Introduction to working with strings (<code>{stringr}</code>)</a></li>
<li class="chapter" data-level="13.3.3" data-path="text-analysis.html"><a href="text-analysis.html#tokenization"><i class="fa fa-check"></i><b>13.3.3</b> Tokenization</a></li>
<li class="chapter" data-level="13.3.4" data-path="text-analysis.html"><a href="text-analysis.html#simple-transformations"><i class="fa fa-check"></i><b>13.3.4</b> Simple Transformations</a></li>
<li class="chapter" data-level="13.3.5" data-path="text-analysis.html"><a href="text-analysis.html#splitting-further-the-tokens"><i class="fa fa-check"></i><b>13.3.5</b> Splitting further the tokens</a></li>
<li class="chapter" data-level="13.3.6" data-path="text-analysis.html"><a href="text-analysis.html#stopwords"><i class="fa fa-check"></i><b>13.3.6</b> Stopwords</a></li>
<li class="chapter" data-level="13.3.7" data-path="text-analysis.html"><a href="text-analysis.html#stemming-and-lemmatization"><i class="fa fa-check"></i><b>13.3.7</b> Stemming and Lemmatization</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="text-analysis.html"><a href="text-analysis.html#text-analysis-1"><i class="fa fa-check"></i><b>13.4</b> Text Analysis</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="text-analysis.html"><a href="text-analysis.html#raw-frequencies-and-visualization"><i class="fa fa-check"></i><b>13.4.1</b> Raw Frequencies and Visualization</a></li>
<li class="chapter" data-level="13.4.2" data-path="text-analysis.html"><a href="text-analysis.html#bigrams-n-grams"><i class="fa fa-check"></i><b>13.4.2</b> Bigrams, <em>n</em>-grams</a></li>
<li class="chapter" data-level="13.4.3" data-path="text-analysis.html"><a href="text-analysis.html#word-embedding"><i class="fa fa-check"></i><b>13.4.3</b> Word Embedding</a></li>
<li class="chapter" data-level="13.4.4" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis"><i class="fa fa-check"></i><b>13.4.4</b> Sentiment Analysis</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="text-analysis.html"><a href="text-analysis.html#to-go-further-1"><i class="fa fa-check"></i><b>13.5</b> To go further…</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i><b>14</b> Dashboards</a>
<ul>
<li class="chapter" data-level="14.1" data-path="dashboards.html"><a href="dashboards.html#objectives"><i class="fa fa-check"></i><b>14.1</b> Objectives</a></li>
<li class="chapter" data-level="14.2" data-path="dashboards.html"><a href="dashboards.html#introduction-to-shiny-through-an-example"><i class="fa fa-check"></i><b>14.2</b> Introduction to Shiny through an Example</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="dashboards.html"><a href="dashboards.html#what-is-a-shiny-application"><i class="fa fa-check"></i><b>14.2.1</b> What is a Shiny application?</a></li>
<li class="chapter" data-level="14.2.2" data-path="dashboards.html"><a href="dashboards.html#starting-with-shiny"><i class="fa fa-check"></i><b>14.2.2</b> Starting with Shiny</a></li>
<li class="chapter" data-level="14.2.3" data-path="dashboards.html"><a href="dashboards.html#illustration"><i class="fa fa-check"></i><b>14.2.3</b> Illustration</a></li>
<li class="chapter" data-level="14.2.4" data-path="dashboards.html"><a href="dashboards.html#deploying-the-application"><i class="fa fa-check"></i><b>14.2.4</b> Deploying the Application</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="dashboards.html"><a href="dashboards.html#to-go-further-2"><i class="fa fa-check"></i><b>14.3</b> To go further…</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="dashboards.html"><a href="dashboards.html#personalizing-and-tuning-your-application"><i class="fa fa-check"></i><b>14.3.1</b> Personalizing and Tuning your application</a></li>
<li class="chapter" data-level="14.3.2" data-path="dashboards.html"><a href="dashboards.html#upgrading-tables"><i class="fa fa-check"></i><b>14.3.2</b> Upgrading Tables</a></li>
<li class="chapter" data-level="14.3.3" data-path="dashboards.html"><a href="dashboards.html#building-dashboard"><i class="fa fa-check"></i><b>14.3.3</b> Building Dashboard</a></li>
<li class="chapter" data-level="14.3.4" data-path="dashboards.html"><a href="dashboards.html#interactive-graphics"><i class="fa fa-check"></i><b>14.3.4</b> Interactive Graphics</a></li>
<li class="chapter" data-level="14.3.5" data-path="dashboards.html"><a href="dashboards.html#interactive-documents"><i class="fa fa-check"></i><b>14.3.5</b> Interactive Documents</a></li>
<li class="chapter" data-level="14.3.6" data-path="dashboards.html"><a href="dashboards.html#documentation-and-books"><i class="fa fa-check"></i><b>14.3.6</b> Documentation and Books</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Digestifs</b></span></li>
<li class="chapter" data-level="15" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>15</b> Conclusion and Next Steps</a>
<ul>
<li class="chapter" data-level="15.1" data-path="next-steps.html"><a href="next-steps.html#other-recommended-resources"><i class="fa fa-check"></i><b>15.1</b> Other Recommended Resources</a></li>
<li class="chapter" data-level="15.2" data-path="next-steps.html"><a href="next-steps.html#useful-r-packages"><i class="fa fa-check"></i><b>15.2</b> Useful R Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for Sensory and Consumer Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-viz" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Data Visualization<a href="data-viz.html#data-viz" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>One of the main goal of data analysis is to produce results. Although informative, such results are only impactful if they can be well-communicated. It is hence of utmost importance to present them in a neat way, often through visuals.
In this chapter, two forms of visuals (namely tables and graphs) are being generated using R. Although some design principles are being tackled, the aim of this chapter is to mainly focus on the <em>how to?</em> rather than on the design itself.
Although R already comes with tools for building and printing tables and graphs, we opt for using additional packages (<code>{flextable}</code> and <code>{gt}</code> for tables, <code>{ggplot2}</code> for graphs) as they provide more flexibility and possibilities.</p>
</blockquote>
<div id="introduction" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction<a href="data-viz.html#introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Tables and graphs are the two fundamental vehicles to communicate information clearly and effectively. They are useful visual elements to summarize and organize information to show patterns and relationships. Tables and graphs allow the audience/reader to easily and quickly get a clear idea of the data findings, make comparisons, get insights from it and ultimately, draft conclusions without much effort.</p>
<p>The best medium of communication, whether a table, a bar chart, a line chart, or a radar plot, will highly depend on the type of data, the amount of data to be displayed (e.g. number of attributes or samples), and the purpose of the analysis.</p>
<p>Usually, tables are meant to be read, so they are ideal when you have data that cannot easily be presented by other communication elements, or when the data requires more specific attention. However, if you encounter a situation where you have a very long and/or wide table, (which is common in sensory and consumer studies), other vehicle of communication should be considered. The same remark also applies to a graphical visualization, and if you have very little data to display, tables might be best suited.</p>
<p>Sometimes (if not often) you have to play with your data, and test displaying it as a table or different types of graphs, before deciding which one suit best. As practical advice, do not hesitate to ask colleagues for feedback as having an external point of view often helps. Remember, to select the best way to communicate your data, you must understand the needs of your audience, the purpose for which various forms of display can be effectively used, but also the strengths and weaknesses of each type of data representation considered.</p>
</div>
<div id="design-principles" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Design Principles<a href="data-viz.html#design-principles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Regardless of the way you decide to display your data, you must understand visual perception and its application to graphical communication. It is important to spend some time with the design and aesthetic aspects of your visualization. You should be able to recognize smart design by becoming familiar with some aspects and examples of great design. Inattention to the visual design such as tables with improper alignment of numbers, excessive use of lines and fill colors, can greatly diminish their effectiveness. In other words, when used adequately, design should help you communicate your results by <em>clarifying</em> it, and not distract your audience from it.</p>
<p>Some important pre-attentive aspects that you should be aware of will be presented in this section, but to read more about visual perception and graphical communication, as well as some examples of great design, we strongly recommend <em>Storytelling with Data</em> by Cole Nussbaumer Knaflic and <em>Show me the Number: Designing Table and Graphs to Enlighten</em> by Stephen Few. (REF)</p>
<p>Since a <em>picture is worth a thousand words</em>, let’s demonstrate the difference between pre-attentive and attentive processing using an example provided by Stephen Few in his book <em>Show me the Number: Designing Table and Graphs to Enlighten</em>. First, take a look at the numbers below and determine, as quickly as you can, how many times the number 5 appears:</p>
<p>98734979027513649782316497802316487415113697412369846321
12346879231648791300023665698774646821397486248797964312
12369874474578962341680021364789613469174312679812439612
12332146987412361789461230502135467980213648126498731203</p>
<p>This appears to be a tedious task and it most likely took you a few minutes because it involved <strong>attentive processing</strong>. The list of numbers did not have any hint (also called pre-attentive attributes) that could help you to easily distinguish the number five from the other numbers. Hence, you are forced to perform a sequential search throughout the whole list.</p>
<p>Let’s do it again, but now using the list of numbers below:</p>
<p>98734979027<strong>5</strong>1364978231649780231648741<strong>5</strong>113697412369846321
1234687923164879130002366<strong>5</strong>698774646821397486248797964312
12369874474<strong>5</strong>78962341680021364789613469174312679812439612
12332146987412361789461230<strong>5</strong>0213<strong>5</strong>467980213648126498731203</p>
<p>This time the task is much easier and you can count the number of times the number 5 appears much faster. This is because we used the <strong>pre-attentive attribute</strong> of color intensity to distinguish the number five, standing it out in contrast to the rest. This example shows in an easy way the power of pre-attentive attributes for effective visual communication. As stated by Cole Nussbaumer Knaflic in her book <em>Storytelling with Data</em>, when we use pre-attentive attributes strategically, we enable our audience to see what we want them to see before they even know they are seeing it!</p>
<p>The various pre-attentive attributes that can be used to draw your audience’s attention quickly and create a visual hierarchy of information include <strong>attributes of form</strong> such as line length, line width, orientation, shape, size, added marks, and enclosure, <strong>attributes of color</strong> which would be hue and intensity, also spatial position and motion. Some of the strategies for a smart design for graphical communication described by Cole Nussbaumer include:</p>
<ul>
<li><strong>Highlight the important stuff</strong> - use tools such as bold, italics, underlining, uppercase text, color, and different sizes to draw your audience’s attention to what you want them to focus on.</li>
<li><strong>Eliminate Distractions</strong> - while some elements should be highlighted, unnecessary or irrelevant items or information should be identified to be cut or de-emphasized to minimize your audience’s distraction. Get rid of noncritical data or components, things that wouldn’t change the main message, and summarize when details are not needed. When a piece of information is necessary to come along with your visualization but is not really a message-impacting, you should de-emphasize it - light gray usually works well for that purpose.</li>
</ul>
<p>Now the main stage is set, let’s focus on how to build nice tables and graphs in R.</p>
</div>
<div id="table_making" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Table Making<a href="data-viz.html#table_making" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>By default, R allows printing matrices or data frames as tables. However, these tables cannot be customized and are only informative. An example of table can be shown here:</p>
<pre><code>##            Name col 1 Name col 2 Name col 3
## Name row 1          1          3          5
## Name row 2          2          4          6</code></pre>
<p>To extend table customization, dedicated packages are required. For illustration, the sensory data (stored in <em>biscuits_sensory_profile.xlsx</em>) is used.
Before starting, let’s first load the usual libraries.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="data-viz.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb106-2"><a href="data-viz.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb106-3"><a href="data-viz.html#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
<p>Let’s imagine we want to communicate the sensory profiles of the 11 biscuits on the attributes related to appearance, a first step consists in transforming the data to create such results (see @ref(“means”) for more details).</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-viz.html#cb107-1" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;biscuits_sensory_profile.xlsx&quot;</span>) </span>
<span id="cb107-2"><a href="data-viz.html#cb107-2" aria-hidden="true" tabindex="-1"></a>mean_sensory <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Data&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="data-viz.html#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Product, Shiny<span class="sc">:</span><span class="st">`</span><span class="at">Color contrast</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb107-4"><a href="data-viz.html#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Product) <span class="sc">%&gt;%</span></span>
<span id="cb107-5"><a href="data-viz.html#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric),<span class="at">.fns =</span> mean))</span></code></pre></div>
<div id="flextable" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Introduction to <code>{flextable}</code><a href="data-viz.html#flextable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now the correct table has been created, let’s represent it in a neater way using our first dedicated package called <code>{flextable}</code>. Before going too deep in designing the table, let’s simply apply the <code>flextable()</code> function to <code>mean_sensory</code> (after loading <code>{flextable}</code> first):</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-viz.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)  </span>
<span id="cb108-2"><a href="data-viz.html#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="data-viz.html#cb108-3" aria-hidden="true" tabindex="-1"></a>flex_table <span class="ot">&lt;-</span> mean_sensory <span class="sc">%&gt;%</span> </span>
<span id="cb108-4"><a href="data-viz.html#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>()</span></code></pre></div>
<template id="09c01b53-fc88-46c0-8679-0d145a0c9cad"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style><div class="tabwid"><style>.cl-7fe399a6{}.cl-7fd37c24{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7fd3a5f0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7fd3a5f1{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7fd41be8{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7fd41be9{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7fd41bea{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7fd41beb{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7fd41bec{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7fd41bed{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-7fe399a6'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-7fd41bed"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">Product</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">Shiny</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">External color intensity</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">Color evenness</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">Qty of inclusions</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">Surface defects</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">Print quality</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">Thickness</span></p></td><td class="cl-7fd41bec"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">Color contrast</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P01</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">41.933333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">26.20000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">15.83333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">15.53333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">27.73333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">37.70000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">26.33333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">33.26667</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P02</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">39.133333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">29.53333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">20.33333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">14.00000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">20.53333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">39.46667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">25.73333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">34.13333</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P03</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">30.533333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">43.60000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">30.66667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">17.60000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">18.60000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">43.26667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">24.86667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">32.00000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P04</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">42.600000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">43.26667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">37.73333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">15.06667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">32.80000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">30.33333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">42.26667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">45.60000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P05</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">13.933333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">17.33333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">36.06667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">26.66667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">19.53333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">41.66667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">21.86667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">15.80000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P06</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">6.866667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">40.66667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">25.53333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">28.00000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">26.86667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">44.13333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">20.53333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">26.13333</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P07</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">32.466667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">24.13333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">22.86667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">17.93333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">21.86667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">43.66667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">21.46667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">28.00000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P08</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">8.933333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">45.06667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">42.26667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">23.46667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">25.06667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">39.66667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">27.46667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">23.33333</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P09</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">3.533333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">39.93333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">27.66667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">22.26667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">22.60000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">46.73333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">19.93333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">33.06667</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41be9"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">P10</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">26.133333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">24.73333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">23.06667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">21.86667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">15.73333</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">39.46667</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">23.00000</span></p></td><td class="cl-7fd41be8"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">27.00000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7fd41beb"><p class="cl-7fd3a5f0"><span class="cl-7fd37c24">POpt</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">16.866667</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">36.06667</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">28.06667</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">24.53333</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">25.46667</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">41.86667</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">26.80000</span></p></td><td class="cl-7fd41bea"><p class="cl-7fd3a5f1"><span class="cl-7fd37c24">31.93333</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="9e756035-bf4f-4cf0-8381-70378a940bf4"></div>
<script>
var dest = document.getElementById("9e756035-bf4f-4cf0-8381-70378a940bf4");
var template = document.getElementById("09c01b53-fc88-46c0-8679-0d145a0c9cad");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>As you can see, the table is being printed in the <em>Viewer</em> section of RStudio. This table is already better designed, although it is still quite overcrowded that could benefit from some additional design work to look nicer.</p>
<p>A first simple improvement consists in reducing the number of decimals (<code>colformat_double()</code>), changing the font size (<code>fontsize()</code>) and type (<code>bold()</code> or <code>italic()</code>), and aligning the text (<code>align()</code>) for instance.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="data-viz.html#cb109-1" aria-hidden="true" tabindex="-1"></a>flex_table_design <span class="ot">&lt;-</span> flex_table <span class="sc">%&gt;%</span></span>
<span id="cb109-2"><a href="data-viz.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colformat_double</span>(<span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb109-3"><a href="data-viz.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fontsize</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">part =</span> <span class="st">&quot;all&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb109-4"><a href="data-viz.html#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold</span>(<span class="at">bold =</span> <span class="cn">TRUE</span>, <span class="at">part =</span> <span class="st">&quot;header&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb109-5"><a href="data-viz.html#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">italic</span>(<span class="at">j =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">italic =</span> <span class="cn">TRUE</span>, <span class="at">part =</span> <span class="st">&quot;body&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb109-6"><a href="data-viz.html#cb109-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>, <span class="at">part =</span> <span class="st">&quot;all&quot;</span>)</span></code></pre></div>
<template id="839bd000-3674-4cd8-b7f5-57243d568e8e"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style><div class="tabwid"><style>.cl-801e8b7e{}.cl-800d6a60{font-family:'Arial';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-800d6a61{font-family:'Arial';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-800d6a62{font-family:'Arial';font-size:10pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-800d9166{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-800e336e{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-800e336f{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-800e3370{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-801e8b7e'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Product</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Shiny</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">External color intensity</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Color evenness</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Qty of inclusions</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Surface defects</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Print quality</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Thickness</span></p></td><td class="cl-800e3370"><p class="cl-800d9166"><span class="cl-800d6a60">Color contrast</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P01</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">41.93</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">26.20</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">15.83</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">15.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">27.73</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">37.70</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">26.33</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">33.27</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P02</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">39.13</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">29.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">20.33</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">14.00</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">20.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">39.47</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">25.73</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">34.13</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P03</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">30.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">43.60</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">30.67</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">17.60</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">18.60</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">43.27</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">24.87</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">32.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P04</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">42.60</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">43.27</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">37.73</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">15.07</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">32.80</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">30.33</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">42.27</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">45.60</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P05</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">13.93</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">17.33</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">36.07</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">26.67</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">19.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">41.67</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">21.87</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">15.80</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P06</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">6.87</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">40.67</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">25.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">28.00</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">26.87</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">44.13</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">20.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">26.13</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P07</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">32.47</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">24.13</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">22.87</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">17.93</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">21.87</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">43.67</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">21.47</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">28.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P08</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">8.93</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">45.07</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">42.27</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">23.47</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">25.07</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">39.67</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">27.47</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">23.33</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P09</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">3.53</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">39.93</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">27.67</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">22.27</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">22.60</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">46.73</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">19.93</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">33.07</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a61">P10</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">26.13</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">24.73</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">23.07</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">21.87</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">15.73</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">39.47</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">23.00</span></p></td><td class="cl-800e336e"><p class="cl-800d9166"><span class="cl-800d6a62">27.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a61">POpt</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">16.87</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">36.07</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">28.07</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">24.53</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">25.47</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">41.87</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">26.80</span></p></td><td class="cl-800e336f"><p class="cl-800d9166"><span class="cl-800d6a62">31.93</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="f4743791-09c0-40d0-b7f5-bf45d2f8e902"></div>
<script>
var dest = document.getElementById("f4743791-09c0-40d0-b7f5-bf45d2f8e902");
var template = document.getElementById("839bd000-3674-4cd8-b7f5-57243d568e8e");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>As can be seen, the function names are very intuitive, and so are the options. In particular, it is interesting to see that most functions allows applying changes to the entire table (<code>part = "all"</code>), the header only (<code>part = "header"</code>) or the body only (<code>part = "body"</code>). And even within a part, it is possible to make a sub-selection by selecting the rows (<code>i</code>) or columns (<code>j</code>) to include or exclude: Here, all the text in the body is set in italic except for the product names, hence the option <code>j=-1</code> (read exclude the first column).</p>
<p>After presenting some of the basic aesthetic options, let’s go once step further and play around with coloring. For instance, let’s imagine we would change the header background and text color, and would want to call the audience’s attention by highlighting the optimized formulation. The following code could be used to do this (results are not being saved):</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-viz.html#cb110-1" aria-hidden="true" tabindex="-1"></a>flex_table_design <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href="data-viz.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bg</span>(<span class="at">bg =</span> <span class="st">&quot;black&quot;</span>, <span class="at">part =</span> <span class="st">&quot;header&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="data-viz.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">color</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">part =</span> <span class="st">&quot;header&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-4"><a href="data-viz.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fontsize</span>(<span class="at">size =</span> <span class="dv">13</span>, <span class="at">part =</span> <span class="st">&quot;header&quot;</span>, <span class="at">i =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-5"><a href="data-viz.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">color</span>(<span class="at">i =</span> <span class="dv">11</span>, <span class="at">color =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">part =</span> <span class="st">&quot;body&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-6"><a href="data-viz.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">color</span>(<span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">color =</span> <span class="st">&quot;grey70&quot;</span>, <span class="at">part =</span> <span class="st">&quot;body&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-7"><a href="data-viz.html#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_lines</span>(<span class="at">values =</span> <span class="st">&quot;Appearance Profile of 11 biscuits&quot;</span>)</span></code></pre></div>
<template id="198cc6a5-1a18-4e4e-8d8b-ecd03e589a63"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style><div class="tabwid"><style>.cl-80497244{}.cl-803b3846{font-family:'Arial';font-size:13pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 255, 255, 1.00);background-color:transparent;}.cl-803b3847{font-family:'Arial';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(179, 179, 179, 1.00);background-color:transparent;}.cl-803b3848{font-family:'Arial';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(255, 165, 0, 1.00);background-color:transparent;}.cl-803b3849{font-family:'Arial';font-size:10pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(179, 179, 179, 1.00);background-color:transparent;}.cl-803b384a{font-family:'Arial';font-size:10pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(255, 165, 0, 1.00);background-color:transparent;}.cl-803b754a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-803c10ae{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-803c10af{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-803c10b0{width:54pt;background-color:rgba(0, 0, 0, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-80497244'>
<caption class>
<p><span id="tab:flextabledesigned">Table 5.1: </span>Appearance Attributes Mean (Improved Flextable)</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td  colspan="9"class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Appearance Profile of 11 biscuits</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Product</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Shiny</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">External color intensity</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Color evenness</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Qty of inclusions</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Surface defects</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Print quality</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Thickness</span></p></td><td class="cl-803c10b0"><p class="cl-803b754a"><span class="cl-803b3846">Color contrast</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P01</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">41.93</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">26.20</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">15.83</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">15.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">27.73</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">37.70</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">26.33</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">33.27</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P02</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">39.13</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">29.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">20.33</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">14.00</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">20.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">39.47</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">25.73</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">34.13</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P03</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">30.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">43.60</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">30.67</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">17.60</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">18.60</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">43.27</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">24.87</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">32.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P04</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">42.60</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">43.27</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">37.73</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">15.07</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">32.80</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">30.33</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">42.27</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">45.60</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P05</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">13.93</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">17.33</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">36.07</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">26.67</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">19.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">41.67</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">21.87</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">15.80</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P06</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">6.87</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">40.67</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">25.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">28.00</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">26.87</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">44.13</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">20.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">26.13</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P07</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">32.47</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">24.13</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">22.87</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">17.93</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">21.87</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">43.67</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">21.47</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">28.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P08</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">8.93</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">45.07</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">42.27</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">23.47</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">25.07</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">39.67</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">27.47</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">23.33</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P09</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">3.53</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">39.93</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">27.67</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">22.27</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">22.60</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">46.73</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">19.93</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">33.07</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3847">P10</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">26.13</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">24.73</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">23.07</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">21.87</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">15.73</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">39.47</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">23.00</span></p></td><td class="cl-803c10ae"><p class="cl-803b754a"><span class="cl-803b3849">27.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b3848">POpt</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">16.87</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">36.07</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">28.07</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">24.53</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">25.47</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">41.87</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">26.80</span></p></td><td class="cl-803c10af"><p class="cl-803b754a"><span class="cl-803b384a">31.93</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="d35c1987-6213-4269-ae86-a2131007c0d5"></div>
<script>
var dest = document.getElementById("d35c1987-6213-4269-ae86-a2131007c0d5");
var template = document.getElementById("198cc6a5-1a18-4e4e-8d8b-ecd03e589a63");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Alternatively, we could decide to be more sober by applying other pre-attentive attributes. For instance, the size of the table can be adjusted, and an horizontal line can be added to delimit the optimal sample from the other. For the latter part, the customization of the line can be made using the function <code>fp_border()</code> from the <code>{officer}</code> package<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a>.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="data-viz.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(officer)</span>
<span id="cb111-2"><a href="data-viz.html#cb111-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-3"><a href="data-viz.html#cb111-3" aria-hidden="true" tabindex="-1"></a>flex_table_design <span class="sc">%&gt;%</span></span>
<span id="cb111-4"><a href="data-viz.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hline</span>(<span class="at">i=</span><span class="dv">10</span>, <span class="at">border=</span><span class="fu">fp_border</span>(<span class="at">color=</span><span class="st">&quot;grey70&quot;</span>, <span class="at">style=</span><span class="st">&quot;dashed&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb111-5"><a href="data-viz.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>()</span></code></pre></div>
<p>In some situations, applying some designing options might <em>destroy</em> the appearance of your table, in particular the border lines. If that should happen to you, just apply the function <code>fix_border_issues()</code> at the end of your code to solve it.</p>
<p>Lastly, if the message should not be focused on <code>POpt</code>, but on some specific values (e.g. values for <code>Thickness</code> that are below 20 should be colored in blue, and above 40 in red), conditional formatting can be used:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data-viz.html#cb112-1" aria-hidden="true" tabindex="-1"></a>color_code <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(mean_sensory<span class="sc">$</span>Thickness <span class="sc">&lt;=</span> <span class="dv">20</span>, <span class="st">&quot;blue&quot;</span>, </span>
<span id="cb112-2"><a href="data-viz.html#cb112-2" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">ifelse</span>(mean_sensory<span class="sc">$</span>Thickness <span class="sc">&gt;=</span> <span class="dv">40</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;black&quot;</span>))</span>
<span id="cb112-3"><a href="data-viz.html#cb112-3" aria-hidden="true" tabindex="-1"></a>flex_table_design <span class="sc">%&gt;%</span> </span>
<span id="cb112-4"><a href="data-viz.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">color</span>(<span class="at">j=</span><span class="sc">~</span>Thickness, <span class="at">color=</span>color_code)</span></code></pre></div>
<p>Other illustrations of the use of <code>{flextable}</code> are provided in section <a href="auto-report.html#powerpoint">6.2.2</a>.</p>
<p>For curious readers who want to get a deeper look into all the possibilities provided by this package, we refer them to the book <a href="https://ardata-fr.github.io/flextable-book/index.html"><em>Using the flextable R package</em></a> by David Gohel and to its <a href="https://ardata.fr/en/flextable-gallery/">gallery of tables</a> for inspiration.</p>
</div>
<div id="introdution-to-gt" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Introdution to <code>{gt}</code><a href="data-viz.html#introdution-to-gt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As an alternative to <code>{flextable}</code>, the <code>{gt}</code> package can also be considered as it also produces nice-looking tables for reports or presentations.
Let’s first install (if needed) and load the <code>{gt}</code> package.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="data-viz.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span></code></pre></div>
<p>Focusing now on the consumer study (<em>biscuits_consumer_test.xlsx</em>), let’s display a table with the average number of biscuits (for each variant) consumers ate, and their corresponding eating time. To do so, we first need to transform the time columns (expressed as min and s) to a double format and express them in minutes. Then, we can group them by product to get the average for the time spent and the number of biscuits eaten.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-viz.html#cb114-1" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;biscuits_consumer_test.xlsx&quot;</span>) </span>
<span id="cb114-2"><a href="data-viz.html#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="data-viz.html#cb114-3" aria-hidden="true" tabindex="-1"></a>mean_consumer <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Time Consumption&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="data-viz.html#cb114-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Product, <span class="st">`</span><span class="at">Time (min)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Nb biscuits</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-5"><a href="data-viz.html#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="st">`</span><span class="at">Time (min)</span><span class="st">`</span>, <span class="fu">c</span>(<span class="st">&quot;Min&quot;</span>, <span class="st">&quot;Sec&quot;</span>), <span class="at">sep=</span><span class="st">&quot;min&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-6"><a href="data-viz.html#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">&quot;Min&quot;</span>,<span class="st">&quot;Sec&quot;</span>), as.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-7"><a href="data-viz.html#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Time =</span> Min<span class="sc">+</span>Sec<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb114-8"><a href="data-viz.html#cb114-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Product) <span class="sc">%&gt;%</span> </span>
<span id="cb114-9"><a href="data-viz.html#cb114-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">&quot;Time&quot;</span>, <span class="st">&quot;Nb biscuits&quot;</span>), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-10"><a href="data-viz.html#cb114-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>Now that the data is ready, we can display it with some basics adjustments to make it look nicer.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="data-viz.html#cb115-1" aria-hidden="true" tabindex="-1"></a>mean_consumer <span class="sc">%&gt;%</span></span>
<span id="cb115-2"><a href="data-viz.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span> () <span class="sc">%&gt;%</span></span>
<span id="cb115-3"><a href="data-viz.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb115-4"><a href="data-viz.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">&quot;Time&quot;</span>, <span class="st">&quot;Nb biscuits&quot;</span>) , <span class="at">decimals =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb115-5"><a href="data-viz.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="fu">md</span> (<span class="st">&quot;**Consumption time and number of biscuits eaten**&quot;</span>), </span>
<span id="cb115-6"><a href="data-viz.html#cb115-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="fu">md</span> (<span class="st">&quot;*Average taken from 99 consumers*&quot;</span>))</span></code></pre></div>
<div id="mlgqueldss" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#mlgqueldss .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mlgqueldss .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mlgqueldss .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mlgqueldss .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mlgqueldss .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mlgqueldss .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mlgqueldss .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mlgqueldss .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mlgqueldss .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mlgqueldss .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mlgqueldss .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mlgqueldss .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#mlgqueldss .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mlgqueldss .gt_from_md > :first-child {
  margin-top: 0;
}

#mlgqueldss .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mlgqueldss .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mlgqueldss .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mlgqueldss .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mlgqueldss .gt_row_group_first td {
  border-top-width: 2px;
}

#mlgqueldss .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mlgqueldss .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mlgqueldss .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mlgqueldss .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mlgqueldss .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mlgqueldss .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mlgqueldss .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mlgqueldss .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mlgqueldss .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mlgqueldss .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mlgqueldss .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mlgqueldss .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mlgqueldss .gt_left {
  text-align: left;
}

#mlgqueldss .gt_center {
  text-align: center;
}

#mlgqueldss .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mlgqueldss .gt_font_normal {
  font-weight: normal;
}

#mlgqueldss .gt_font_bold {
  font-weight: bold;
}

#mlgqueldss .gt_font_italic {
  font-style: italic;
}

#mlgqueldss .gt_super {
  font-size: 65%;
}

#mlgqueldss .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#mlgqueldss .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#mlgqueldss .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mlgqueldss .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#mlgqueldss .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#mlgqueldss .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style><strong>Consumption time and number of biscuits eaten</strong></th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style><em>Average taken from 99 consumers</em></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Product</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Nb biscuits</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">6.47</td>
<td class="gt_row gt_center">3.94</td></tr>
    <tr><td class="gt_row gt_center">2</td>
<td class="gt_row gt_center">6.74</td>
<td class="gt_row gt_center">4.00</td></tr>
    <tr><td class="gt_row gt_center">3</td>
<td class="gt_row gt_center">6.46</td>
<td class="gt_row gt_center">2.91</td></tr>
    <tr><td class="gt_row gt_center">4</td>
<td class="gt_row gt_center">6.48</td>
<td class="gt_row gt_center">2.61</td></tr>
    <tr><td class="gt_row gt_center">5</td>
<td class="gt_row gt_center">6.57</td>
<td class="gt_row gt_center">4.06</td></tr>
    <tr><td class="gt_row gt_center">6</td>
<td class="gt_row gt_center">6.45</td>
<td class="gt_row gt_center">3.42</td></tr>
    <tr><td class="gt_row gt_center">7</td>
<td class="gt_row gt_center">6.55</td>
<td class="gt_row gt_center">3.58</td></tr>
    <tr><td class="gt_row gt_center">8</td>
<td class="gt_row gt_center">6.23</td>
<td class="gt_row gt_center">2.77</td></tr>
    <tr><td class="gt_row gt_center">9</td>
<td class="gt_row gt_center">6.24</td>
<td class="gt_row gt_center">3.01</td></tr>
    <tr><td class="gt_row gt_center">10</td>
<td class="gt_row gt_center">6.95</td>
<td class="gt_row gt_center">4.41</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Note that we used <em>Markdown</em> to style the title and subtitle by wrapping the values passed to the title or subtitle with the <code>md()</code> function. In Markdown, <code>**text**</code> writes the text in bold, and <code>*text*</code> in italic.</p>
<p>The <code>{gt}</code> package offers several resources to make beautiful tables. Let’s illustrate this by focusing on the average number of biscuits eaten only since the average consumption time is very similar across products. The idea is to use pre-attentive attributes for the audience to clearly see which samples were the most popular (i.e. the most eaten) and which one were not. Let’s first prepare the data and calculate the overall time consumption considering all products.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-viz.html#cb116-1" aria-hidden="true" tabindex="-1"></a>mean_consumer_2 <span class="ot">&lt;-</span> mean_consumer <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="data-viz.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span> <span class="st">&quot;Time&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="data-viz.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span> (<span class="st">`</span><span class="at">Nb biscuits</span><span class="st">`</span>))</span></code></pre></div>
<p>Now that the data is ready, we can display using a similar style as before in which we add some color-code to accentuate products’ consumption. We will also add a <code>note</code> to the table that expresses the average time used to consumer the biscuits. So let’s start with creating the table:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="data-viz.html#cb117-1" aria-hidden="true" tabindex="-1"></a>note <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">&quot;Avg. consumption time: &quot;</span>, <span class="fu">round</span>(<span class="fu">mean</span>(mean_consumer<span class="sc">$</span>Time),<span class="dv">2</span>), <span class="st">&quot; min&quot;</span>)</span>
<span id="cb117-2"><a href="data-viz.html#cb117-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-3"><a href="data-viz.html#cb117-3" aria-hidden="true" tabindex="-1"></a>consumption <span class="ot">&lt;-</span> mean_consumer_2 <span class="sc">%&gt;%</span></span>
<span id="cb117-4"><a href="data-viz.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span> () <span class="sc">%&gt;%</span></span>
<span id="cb117-5"><a href="data-viz.html#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb117-6"><a href="data-viz.html#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="st">&quot;Nb biscuits&quot;</span> , <span class="at">decimals =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb117-7"><a href="data-viz.html#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="fu">md</span> (<span class="st">&quot;**Number of biscuits eaten**&quot;</span>), </span>
<span id="cb117-8"><a href="data-viz.html#cb117-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="fu">md</span> (<span class="st">&quot;*Average taken from 99 consumers*&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb117-9"><a href="data-viz.html#cb117-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="at">source_note =</span> note)</span></code></pre></div>
<p>Now, let’s color code the cells based on the average number of biscuits eaten. To color code, the range of average number of biscuits eaten is required. Then, we can use the <code>col_numeric()</code> function from the <code>{scales}</code> package to generate the colors of interest (in practice, we provide the colour for the minimum, maximum, and the function generates automatically all the colors in between to create the gradient).</p>
<!-- Table cap doesn't appear -->
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-viz.html#cb118-1" aria-hidden="true" tabindex="-1"></a>nb_range <span class="ot">&lt;-</span> <span class="fu">range</span>(mean_consumer_2<span class="sc">$</span><span class="st">`</span><span class="at">Nb biscuits</span><span class="st">`</span>)</span>
<span id="cb118-2"><a href="data-viz.html#cb118-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-3"><a href="data-viz.html#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb118-4"><a href="data-viz.html#cb118-4" aria-hidden="true" tabindex="-1"></a>consumption <span class="sc">%&gt;%</span> </span>
<span id="cb118-5"><a href="data-viz.html#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data_color</span>(<span class="at">columns=</span><span class="st">`</span><span class="at">Nb biscuits</span><span class="st">`</span>, <span class="at">colors=</span><span class="fu">col_numeric</span>(<span class="fu">c</span>(<span class="st">&quot;#FEF0D9&quot;</span>,<span class="st">&quot;#990000&quot;</span>), <span class="at">domain=</span>nb_range, <span class="at">alpha=</span><span class="fl">0.75</span>))</span></code></pre></div>
<div id="itgtfqgizj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#itgtfqgizj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#itgtfqgizj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itgtfqgizj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#itgtfqgizj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#itgtfqgizj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itgtfqgizj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itgtfqgizj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#itgtfqgizj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#itgtfqgizj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#itgtfqgizj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#itgtfqgizj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#itgtfqgizj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#itgtfqgizj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#itgtfqgizj .gt_from_md > :first-child {
  margin-top: 0;
}

#itgtfqgizj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#itgtfqgizj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#itgtfqgizj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#itgtfqgizj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#itgtfqgizj .gt_row_group_first td {
  border-top-width: 2px;
}

#itgtfqgizj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itgtfqgizj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#itgtfqgizj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#itgtfqgizj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itgtfqgizj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itgtfqgizj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#itgtfqgizj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#itgtfqgizj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itgtfqgizj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itgtfqgizj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#itgtfqgizj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itgtfqgizj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#itgtfqgizj .gt_left {
  text-align: left;
}

#itgtfqgizj .gt_center {
  text-align: center;
}

#itgtfqgizj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#itgtfqgizj .gt_font_normal {
  font-weight: normal;
}

#itgtfqgizj .gt_font_bold {
  font-weight: bold;
}

#itgtfqgizj .gt_font_italic {
  font-style: italic;
}

#itgtfqgizj .gt_super {
  font-size: 65%;
}

#itgtfqgizj .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#itgtfqgizj .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#itgtfqgizj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#itgtfqgizj .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#itgtfqgizj .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#itgtfqgizj .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="2" class="gt_heading gt_title gt_font_normal" style><strong>Number of biscuits eaten</strong></th>
    </tr>
    <tr>
      <th colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style><em>Average taken from 99 consumers</em></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Product</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Nb biscuits</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">10</td>
<td class="gt_row gt_center" style="background-color: #990000; color: #FFFFFF;">4.41</td></tr>
    <tr><td class="gt_row gt_center">5</td>
<td class="gt_row gt_center" style="background-color: #B34329; color: #FFFFFF;">4.06</td></tr>
    <tr><td class="gt_row gt_center">2</td>
<td class="gt_row gt_center" style="background-color: #B74B30; color: #FFFFFF;">4.00</td></tr>
    <tr><td class="gt_row gt_center">1</td>
<td class="gt_row gt_center" style="background-color: #BB5236; color: #FFFFFF;">3.94</td></tr>
    <tr><td class="gt_row gt_center">7</td>
<td class="gt_row gt_center" style="background-color: #D17C5F; color: #000000;">3.58</td></tr>
    <tr><td class="gt_row gt_center">6</td>
<td class="gt_row gt_center" style="background-color: #DB9072; color: #000000;">3.42</td></tr>
    <tr><td class="gt_row gt_center">9</td>
<td class="gt_row gt_center" style="background-color: #EFC0A5; color: #000000;">3.01</td></tr>
    <tr><td class="gt_row gt_center">3</td>
<td class="gt_row gt_center" style="background-color: #F3CCB2; color: #000000;">2.91</td></tr>
    <tr><td class="gt_row gt_center">8</td>
<td class="gt_row gt_center" style="background-color: #F8DDC4; color: #000000;">2.77</td></tr>
    <tr><td class="gt_row gt_center">4</td>
<td class="gt_row gt_center" style="background-color: #FEF0D9; color: #000000;">2.61</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="2">Avg. consumption time: 6.52 min</td>
    </tr>
  </tfoot>
  
</table>
</div>
<p>Applying this strategy of coloring the number of biscuits eaten according to their range makes the table nicer and easier to get insights from. In our case, we can quickly see that groups of products based on their average consumption: Product 10 is the most eaten, followed by a group that include products 5, 2, and 1. At last, samples 8 and 4 are the least consumed samples.</p>
<p>Although the package <code>{gt}</code> proposed some nice feature, additional options are provided by its extension package called <code>{gtExtras}</code> which provides additional themes, formatting capabilities, opinionated diverging color palette, extra tools for highlighting values, possibility of embed bar plots in the table etc. For more information, please check <a href="https://jthomasmock.github.io/gtExtras/">https://jthomasmock.github.io/gtExtras/</a>.</p>
<p>To illustrate one of the possible use of <code>{gtExtras}</code> let’s twist the previous table as following: Since each consumer was provided with a maximum of 10 biscuits, let’s transform the average consumption into percentages. We can then re-create the previous table in which we also add a bar-chart based on the percentages:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data-viz.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtExtras)</span></code></pre></div>
<pre><code>## Warning: package &#39;gtExtras&#39; was built under R version 4.1.3</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="data-viz.html#cb121-1" aria-hidden="true" tabindex="-1"></a>mean_consumer_2 <span class="sc">%&gt;%</span></span>
<span id="cb121-2"><a href="data-viz.html#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Nb biscuits (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">100</span><span class="sc">*</span>(<span class="st">`</span><span class="at">Nb biscuits</span><span class="st">`</span><span class="sc">/</span><span class="dv">10</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb121-3"><a href="data-viz.html#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span> () <span class="sc">%&gt;%</span></span>
<span id="cb121-4"><a href="data-viz.html#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>, <span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb121-5"><a href="data-viz.html#cb121-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="st">&quot;Nb biscuits&quot;</span> , <span class="at">decimals=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb121-6"><a href="data-viz.html#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="fu">md</span> (<span class="st">&quot;**Number of biscuits eaten**&quot;</span>), </span>
<span id="cb121-7"><a href="data-viz.html#cb121-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="fu">md</span> (<span class="st">&quot;*Average taken from 99 consumers*&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb121-8"><a href="data-viz.html#cb121-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(<span class="at">source_note =</span> note) <span class="sc">%&gt;%</span> </span>
<span id="cb121-9"><a href="data-viz.html#cb121-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_plt_bar_pct</span>(<span class="st">`</span><span class="at">Nb biscuits (%)</span><span class="st">`</span>, <span class="at">scaled=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div id="ujqtgjirob" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ujqtgjirob .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ujqtgjirob .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ujqtgjirob .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ujqtgjirob .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ujqtgjirob .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ujqtgjirob .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ujqtgjirob .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ujqtgjirob .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ujqtgjirob .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ujqtgjirob .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ujqtgjirob .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ujqtgjirob .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ujqtgjirob .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ujqtgjirob .gt_from_md > :first-child {
  margin-top: 0;
}

#ujqtgjirob .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ujqtgjirob .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ujqtgjirob .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ujqtgjirob .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ujqtgjirob .gt_row_group_first td {
  border-top-width: 2px;
}

#ujqtgjirob .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujqtgjirob .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ujqtgjirob .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ujqtgjirob .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ujqtgjirob .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujqtgjirob .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ujqtgjirob .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ujqtgjirob .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ujqtgjirob .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ujqtgjirob .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujqtgjirob .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ujqtgjirob .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujqtgjirob .gt_left {
  text-align: left;
}

#ujqtgjirob .gt_center {
  text-align: center;
}

#ujqtgjirob .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ujqtgjirob .gt_font_normal {
  font-weight: normal;
}

#ujqtgjirob .gt_font_bold {
  font-weight: bold;
}

#ujqtgjirob .gt_font_italic {
  font-style: italic;
}

#ujqtgjirob .gt_super {
  font-size: 65%;
}

#ujqtgjirob .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#ujqtgjirob .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ujqtgjirob .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ujqtgjirob .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#ujqtgjirob .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#ujqtgjirob .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style><strong>Number of biscuits eaten</strong></th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style><em>Average taken from 99 consumers</em></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Product</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Nb biscuits</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Nb biscuits (%)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">10</td>
<td class="gt_row gt_center">4.41</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:44.1121495327103%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">5</td>
<td class="gt_row gt_center">4.06</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:40.5607476635514%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">2</td>
<td class="gt_row gt_center">4.00</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:39.9532710280374%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">3.94</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:39.407476635514%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">7</td>
<td class="gt_row gt_center">3.58</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:35.8411214953271%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">6</td>
<td class="gt_row gt_center">3.42</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:34.2056074766355%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">9</td>
<td class="gt_row gt_center">3.01</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:30.1%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">3</td>
<td class="gt_row gt_center">2.91</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:29.0654205607477%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">8</td>
<td class="gt_row gt_center">2.77</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:27.7102803738318%;height:16px;'></div></div></td></tr>
    <tr><td class="gt_row gt_center">4</td>
<td class="gt_row gt_center">2.61</td>
<td class="gt_row gt_left"><div style='flex-grow:1;margin-left:8px;background:#e1e1e1;'><div style='background:purple;width:26.1214953271028%;height:16px;'></div></div></td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="3">Avg. consumption time: 6.52 min</td>
    </tr>
  </tfoot>
  
</table>
</div>
<p>In this section, due to their simplicity and flexibility, we emphasized the use of <code>{flextable}</code> and <code>{gt}</code> to build beautiful tables for your reports. However, there are other alternatives including (amongst others) <code>{kable}</code> and <code>{kableExtra}</code>, or <code>{huxtable}</code> for readers that are not fully satisfied.</p>
</div>
</div>
<div id="chart-making" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Chart Making<a href="data-viz.html#chart-making" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>“A picture is worth 1000 words.” This saying definitely applies to Statistics as well, since visual representation of data often appears clearer than the values themselves stored in a table. It is hence no surprise that R is also a powerful tool for building graphics.</p>
<p>In practice, there are various ways to build graphics in R. In fact, R itself comes with an engine for building graphs through the <code>plot()</code> function. An extensive description can be found in (<em>R Graphics 2nd edition Paul Murrell CRC Press</em>). Due to its philosophy, its simplicity, and the point of view adopted in this book, we will limit ourselves to graphics built using the <code>{ggplot2}</code> package.</p>
<div id="philosophy-of-ggplot2" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Philosophy of <code>{ggplot2}</code><a href="data-viz.html#philosophy-of-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>{ggplot2}</code> belongs to the <code>{tidyverse}</code>, and was developed by H. Wickham and colleagues at RStudio. It is hence no surprise that a lot of the procedures that we are learning throughout this book also applies to <code>{ggplot2}</code>. More generally, building graphics with <code>{ggplot2}</code> fits very well within the pipes (<code>%&gt;%</code>) system from <code>{magrittr}</code>. In fact, <code>{ggplot2}</code> works with its own piping system that uses the <code>+</code> symbol instead of <code>%&gt;%</code>.</p>
<p>In practice, <code>{ggplot2}</code> is a multi-layer graphical tools, and graphics are built by adding layers to existing graphs. The advantage of such procedure is that <code>ggplot</code> objects are not fixed: They can be printed at any time, and can still be improved by adding other layers if needed. To read more about <code>{gglot2}</code> and its philosophy, please refer to <a href="http://vita.had.co.nz/papers/layered-grammar.pdf" class="uri">http://vita.had.co.nz/papers/layered-grammar.pdf</a><a href="http://vita.had.co.nz/papers/layered-grammar.pdf">link</a>.</p>
<p>Note that since building graphics is limited to one’s imagination, it is not possible to tackle each and every possibilities offered by <code>{ggplot2}</code> (and its extensions). For that reason, we prefer to focus on how <code>{ggplot2}</code>works, and by using as illustration throughout the book examples of graphics that are useful in Sensory and Consumer research. This should be more than sufficient to get you started, and should cover 90% of your daily needs. Still, if that should not be sufficient, we invite you to look into the online documentation or to references such as [REFS].</p>
</div>
<div id="getting-started-with-ggplot2" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Getting started with <code>{ggplot2}</code><a href="data-viz.html#getting-started-with-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To use <code>{ggplot2}</code>, it needs to be loaded. This can either be done directly using:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data-viz.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>However, as said before, this step is not always needed since it is part of <code>{tidyverse}</code>: At the start of this chapter, when we loaded the <code>{tidyverse}</code> package, we also loaded <code>{ggplot2}</code>.</p>
<p>To illustrate the use of <code>{ggplot2}</code>, both the sensory data (<em>biscuits_sensory_profile.xlsx</em>) and the number of biscuit eaten by each respondents (<em>biscuits_consumer_test.xlsx</em>) are used. Although these files have already been loaded in Section @ref(table_making), let’s re-load them:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="data-viz.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sensory Profiles Data</span></span>
<span id="cb123-2"><a href="data-viz.html#cb123-2" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;biscuits_sensory_profile.xlsx&quot;</span>) </span>
<span id="cb123-3"><a href="data-viz.html#cb123-3" aria-hidden="true" tabindex="-1"></a>p_info <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Product Info&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-4"><a href="data-viz.html#cb123-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Type)</span>
<span id="cb123-5"><a href="data-viz.html#cb123-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-6"><a href="data-viz.html#cb123-6" aria-hidden="true" tabindex="-1"></a>sensory <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Data&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-7"><a href="data-viz.html#cb123-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(p_info, <span class="at">by=</span><span class="st">&quot;Product&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-8"><a href="data-viz.html#cb123-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Protein<span class="sc">:</span>Fiber, <span class="at">.after=</span>Product)</span>
<span id="cb123-9"><a href="data-viz.html#cb123-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-10"><a href="data-viz.html#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Biscuits Eaten Data</span></span>
<span id="cb123-11"><a href="data-viz.html#cb123-11" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>,<span class="st">&quot;biscuits_consumer_test.xlsx&quot;</span>)</span>
<span id="cb123-12"><a href="data-viz.html#cb123-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-13"><a href="data-viz.html#cb123-13" aria-hidden="true" tabindex="-1"></a>Nbiscuits <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(file_path, <span class="at">sheet=</span><span class="st">&quot;Time Consumption&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-14"><a href="data-viz.html#cb123-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Product =</span> <span class="fu">str_c</span>(<span class="st">&quot;P&quot;</span>, Product)) <span class="sc">%&gt;%</span> </span>
<span id="cb123-15"><a href="data-viz.html#cb123-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">N =</span> <span class="st">`</span><span class="at">Nb biscuits</span><span class="st">`</span>)</span></code></pre></div>
<p>To initiate a graph, the function <code>ggplot()</code> is called.
Since the data to be used are stored in <code>sensory</code>, <code>ggplot()</code> is applied on <code>sensory</code>:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data-viz.html#cb124-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory)</span></code></pre></div>
<p>Running this line of code generates an empty graphic stored in <code>p</code>. This is logical since no layers have been added yet.
So let’s imagine we want to look at the overall relationship between <code>Sticky</code> and <code>Melting</code>. To evaluate this relationship, a scatter plot with <code>Sticky</code> in the X-axis and <code>Melting</code> in the Y-axis is created. To do so, two types of information are required:</p>
<ul>
<li>the type of visual (here a scatter point);</li>
<li>the information regarding the data to plot (what should be represented).</li>
</ul>
<p>Such information can be provided as such:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-viz.html#cb125-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting))</span></code></pre></div>
<p>This code adds a layer that consists of points (defined by <code>geom_point()</code>) in which the X-axis coordinates are defined by <code>Sticky</code> and the Y-axis coordinates by <code>Melting</code>, as defined through aesthetics (or <code>aes()</code>). This layer is added to the already existing graph <code>p</code>.</p>
<div id="scatter" class="section level4 hasAnchor" number="5.4.2.1">
<h4><span class="header-section-number">5.4.2.1</span> Introduction to Aesthetics<a href="data-viz.html#scatter" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the previous example, one can notice that many points are being printed. This surprising result is logical since <code>sensory</code> contains the raw sensory data, meaning that there are as many points as there are assessors evaluating products.</p>
<p>Let’s color the points per products to see if we can see any patterns. Since the color code is specific to the data (more precisely to <code>Product</code>), it should be informed within the aesthetics by adding <code>colour=Product</code> within <code>aes()</code>:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data-viz.html#cb126-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">colour=</span>Product))</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-103-1.png" width="672" /></p>
<p>As you can see, any parameters provided within <code>aes()</code> may depend on a variable (e.g. <code>colour</code> in the previous example).
If for any reasons, a specific setting should uniformly be applied to all the elements of the graph, then it should be defined outside <code>aes()</code>.</p>
<p>Let’s illustrate this by providing a simple example in which we change the type of the dots from circle to square using <code>pch</code>, and by increasing their size using <code>cex</code>:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="data-viz.html#cb127-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">colour=</span>Product), <span class="at">pch=</span><span class="dv">15</span>, <span class="at">cex=</span><span class="dv">5</span>)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>
<p>Regardless of the products, all the points are now shown as large squares.</p>
<p>Depending on the <code>geom_*()</code> function considered, different parameters should be informed within <code>aes()</code>. Here is a list of the most common <code>aes()</code> you would use:</p>
<ul>
<li><code>x</code>, <code>y</code>, <code>z</code>, provides the coordinates on the X, Y, Z dimensions respectively;</li>
<li><code>colour</code>/<code>color</code>, <code>fill</code> controls for the color code<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a> that is being applied to the different elements of a graph;</li>
<li><code>group</code> makes the distinction between points that belong to different groups<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a>;</li>
<li><code>text</code>, <code>label</code> prints text/labels on the graph;</li>
<li><code>size</code> controls the size of the element (this should preferably be used with numerical variables).</li>
</ul>
<p>It may not be clear yet on how those aesthetics work, but don’t worry, many examples illustrating the use of these various types of aesthetics are provided throughout the book.</p>
</div>
<div id="linechart" class="section level4 hasAnchor" number="5.4.2.2">
<h4><span class="header-section-number">5.4.2.2</span> Introduction to <code>geom_*()</code> functions<a href="data-viz.html#linechart" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Since <code>{ggplot2}</code> is a multi-layer graph, let’s add another layer. For example, the name/code of the panelists associated to each point can be printed.</p>
<p>Such procedure is done through the use of another <code>geom_*()</code> function in <code>geom_text()</code><a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a> which requires in <code>aes()</code> the position of the labels (<code>x</code> and <code>y</code>) as well as the <code>label</code> itself.</p>
<p>To avoid having the label overlapping with the point, the text is slightly shifted vertically using <code>nudge_y</code>. For simplicity, let’s rebuild the graph from the start:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="data-viz.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sensory)<span class="sc">+</span></span>
<span id="cb128-2"><a href="data-viz.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">colour=</span>Product))<span class="sc">+</span></span>
<span id="cb128-3"><a href="data-viz.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">label=</span>Judge), <span class="at">nudge_y=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-105-1.png" width="672" /></p>
<p>One interesting remark is that some information required in <code>aes()</code> is being repeated across the different <code>geom_*()</code> used. Such writing can be simplified by providing the <code>aes()</code> information that applies to all <code>geom_*()</code> to the original <code>ggplot()</code> call<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>. The previous code hence can be simplified to:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="data-viz.html#cb129-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory, <span class="fu">aes</span>(<span class="at">x=</span>Sticky, <span class="at">y=</span>Melting, <span class="at">label=</span>Judge))<span class="sc">+</span></span>
<span id="cb129-2"><a href="data-viz.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>Product))<span class="sc">+</span></span>
<span id="cb129-3"><a href="data-viz.html#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_y=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<p>With this new code, you’ll notice that:</p>
<ul>
<li><code>x</code> and <code>y</code> are automatically applied to both <code>geom_point()</code> and <code>geom_text()</code>;</li>
<li>although <code>label</code> is only relevant for <code>geom_text()</code>, it can still be provided at the beginning as it will be ignored by <code>geom_point()</code>;</li>
<li><code>colour</code> should only be provided within <code>geom_point()</code> else the text would also be colored according to <code>Product</code> (which we do not want here);</li>
<li><code>nudge_y</code> is defined outside <code>aes()</code> as it applies to all the text.</li>
</ul>
<p>Since the graphics look at the relationship between two quantitative variables, let’s add another layer to the previous graph that shows the regression line:</p>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-109-1.png" width="672" /></p>
<p>This code adds a regression line to the graphic. It is built using the <code>lm()</code> engine in which the simple linear regression model <code>y~x</code> is fitted. This result is somewhat surprising since we have not run any regression yet, meaning that <code>geom_smooth()</code> is performing this analysis in the background by itself.</p>
<p>In practice, most <code>geom_*()</code> function comes with a statistical procedure attached to it. This means that on the raw data, the <code>geom_*()</code> function calls its <code>stat_*()</code> function that runs the corresponding analysis. In the previous example, <code>geom_smooth()</code> calls <code>stat_smooth()</code>.</p>
<p>Let’s illustrate this concept again using another example: bar-charts that is applied on the data stored in <code>Nbiscuits</code>.
Here, we want to see the distribution (through bar-charts) of the number of biscuits eaten per consumer. A quick look at the data shows that some respondents ate portions of the cookies. To simplify the analysis, let’s consider the total number of entire cookies eaten: if a respondent has eaten say 3.5 biscuits, it will be rounded down to 3 full cookies.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data-viz.html#cb130-1" aria-hidden="true" tabindex="-1"></a>Nbiscuits <span class="ot">&lt;-</span> Nbiscuits <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="data-viz.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">N =</span> <span class="fu">floor</span>(N))</span></code></pre></div>
<p>To create such distribution, a first solution consists in counting for each product how many respondents ate 0 biscuit, 1 biscuit, 2 biscuits, etc. This is automatically done using <code>geom_bar</code> and <code>stat="count"</code>. The parameter <code>position="dodge"</code> is used to get the results per biscuit side by side rather than stacked up vertically (value by default):</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="data-viz.html#cb131-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Nbiscuits, <span class="fu">aes</span>(<span class="at">x=</span>N, <span class="at">fill=</span>Product))<span class="sc">+</span></span>
<span id="cb131-2"><a href="data-viz.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;count&quot;</span>, <span class="at">position=</span><span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-112-1.png" width="672" /></p>
<p>In the background, this corresponds to grouping the data by <code>Product</code>, summarizing the results by counting <code>N</code>, and then performing <code>geom_bar()</code> in which no transformation is required (we set <code>stat="identity"</code>)<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a>:</p>
<p>As can be seen, these two graphics are identical.</p>
</div>
<div id="making-graphs-pretty" class="section level4 hasAnchor" number="5.4.2.3">
<h4><span class="header-section-number">5.4.2.3</span> Making graphs pretty<a href="data-viz.html#making-graphs-pretty" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the two previous graphs generated (stored in <code>line_p</code> and <code>bar_p</code>), some features can be changed to produce clearer visualizations. Currently, the background is grey with vertical and horizontal white lines, the legend is positioned on the right side, the axis is defined based on the data itself (and so are the axis titles), there is no title, etc. All these points (and many more) can be modified, as it will be shown in this section.</p>
<p>Let’s start with a quick win by completely changing the overall appearance of the graphic. To do so, predefined <em>themes</em> with pre-set background (with or without lines, axis lines, etc.) can be applied. The two themes we use the most are <code>theme_minimal()</code> and <code>theme_bw()</code> (see <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="uri">https://ggplot2.tidyverse.org/reference/ggtheme.html</a><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">link</a> for a complete list of pre-defined themes.)</p>
<p>Let’s start with improving <code>bar_p</code> using <code>theme_minimal()</code>:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data-viz.html#cb132-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">&lt;-</span> bar_p<span class="sc">+</span></span>
<span id="cb132-2"><a href="data-viz.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-115-1.png" width="672" /></p>
<p>Rather than using pre-defined themes (or to complement pre-defined themes), the different parameters of the graph can be controlled through <code>theme()</code>.</p>
<p>Let’s modify the axes by changing their names and by applying more logical breaks. For instance, the limits of the x-axis can be extended to -1 and 11 to ensure that all the histograms are visible, else R removes some and returns a warning: <code>Removed 10 rows containing missing values</code>.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="data-viz.html#cb133-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">&lt;-</span> bar_p <span class="sc">+</span></span>
<span id="cb133-2"><a href="data-viz.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name=</span><span class="st">&quot;Number of Biscuits eaten&quot;</span>, </span>
<span id="cb133-3"><a href="data-viz.html#cb133-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">1</span>), </span>
<span id="cb133-4"><a href="data-viz.html#cb133-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="st">&quot;All of them&quot;</span>), </span>
<span id="cb133-5"><a href="data-viz.html#cb133-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb133-6"><a href="data-viz.html#cb133-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of Respondents&quot;</span>)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-117-1.png" width="672" /></p>
<p>Last but not least, a title is being added to the graph using <code>ggtitle()</code>:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="data-viz.html#cb134-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="ot">&lt;-</span> bar_p <span class="sc">+</span></span>
<span id="cb134-2"><a href="data-viz.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Distribution of the number of biscuits eaten&quot;</span>,<span class="st">&quot;(Results are split per biscuit type)&quot;</span>)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-119-1.png" width="672" /></p>
<p>Let’s apply a similar transformation to <code>line_p</code>. Here, we are aiming in having a more <em>realistic</em> plot using cartesian coordinates, a nice theme, no legend, and a title to the graph.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="data-viz.html#cb135-1" aria-hidden="true" tabindex="-1"></a>line_p <span class="ot">&lt;-</span> line_p <span class="sc">+</span></span>
<span id="cb135-2"><a href="data-viz.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb135-3"><a href="data-viz.html#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">50</span>,<span class="dv">10</span>), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">60</span>))<span class="sc">+</span></span>
<span id="cb135-4"><a href="data-viz.html#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">50</span>,<span class="dv">10</span>), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">60</span>))<span class="sc">+</span></span>
<span id="cb135-5"><a href="data-viz.html#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()<span class="sc">+</span></span>
<span id="cb135-6"><a href="data-viz.html#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Relationship between Melting and Sticky&quot;</span>, <span class="st">&quot;Biscuits perceived as more sticky tend to be less melting.&quot;</span>)<span class="sc">+</span></span>
<span id="cb135-7"><a href="data-viz.html#cb135-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-121-1.png" width="672" /></p>
</div>
</div>
<div id="common-charts" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Common Charts<a href="data-viz.html#common-charts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have now an overview of the basics of <code>{ggplot2}</code> and its philosophy. You’ll find plenty of other examples throughout this book to help you develop your skills in building graphics in R.</p>
<p>Since making an exhaustive list of plots that are relevant in sensory and consumer science is out of the scope of this book, it is not going to be further developed here. Yet, here is a summary of the <code>geom_*()</code> that are commonly used:</p>
<ul>
<li>Scatter points:
<ul>
<li><code>geom_point()</code>: create a scatter point (see example Section <a href="data-viz.html#scatter">5.4.2.1</a>)</li>
</ul></li>
<li>Line charts:
<ul>
<li><code>geom_line()</code>: create a line that connects points (see example Section <a href="#barchart"><strong>??</strong></a>);</li>
<li><code>geom_smooth()</code>: add a regression line (see …);</li>
<li><code>geom_hline()</code> (resp. <code>geom_vline()</code>): add a horizontal (resp. vertical) line using <code>yintercept</code> (resp. <code>xintercept</code>);</li>
<li><code>geom_segment()</code>: draw a segment going from (<code>x</code>;<code>y</code>) to (<code>xend</code>;<code>yend</code>)<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a>.</li>
</ul></li>
<li>Bar charts:
<ul>
<li><code>geom_col()</code> and <code>geom_bar()</code>: produce bar-charts by either using the raw values, or by computing the frequencies first (see example Section <a href="#barchart"><strong>??</strong></a>);</li>
<li><code>geom_histogram()</code> and <code>geom_freqpoly()</code>: work in a similar way as <code>geom_bar()</code> except that it divides the x axis into bins before counting the number of observation in each bin and either represent it as bars (<code>geom_histogram</code>) or lines (<code>geom_freqpoly()</code>).</li>
</ul></li>
<li>Distribution:
<ul>
<li><code>geom_density()</code>: build the density plot;</li>
<li><code>geom_boxplot()</code>: build the well-known boxplot;</li>
<li><code>geom_violin()</code>: application of <code>geom_density()</code> displayed in <code>geom_boxplot()</code> fashion.</li>
</ul></li>
<li>Text and Labels:
<ul>
<li><code>geom_text</code> and <code>geom_label</code>: add text to the graph (see example Section <a href="data-viz.html#linechart">5.4.2.2</a>);</li>
<li>the package <code>{ggrepel}</code> provides alternative functions (<code>geom_text_repel()</code> and <code>geom_label_repel()</code>) that re-position labels to avoid overlapping (<em>repel</em> stands for <em>repulsive</em>).</li>
</ul></li>
<li>Rectangles<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>:
<ul>
<li><code>geom_tile()</code>, <code>geom_rect</code>: create area either using its center point (<code>geom_tile()</code>) or its four corner (<code>geom_rect()</code>) defined by <code>xmin</code>, <code>xmax</code>, <code>ymin</code>, and <code>ymax</code> (see example…);</li>
<li><code>geom_raster()</code>: high performance alternative to <code>geom_tile()</code>/<code>geom_rect</code> where all the tiles have the same size.</li>
</ul></li>
</ul>
<p>Besides <code>geom*()</code>, a lot of graphical parameters can further be controlled. This includes of course the <code>theme()</code> and the <code>aes()</code>:</p>
<ul>
<li>For pre-defined themes, see example;</li>
<li><code>axis</code> parameters including its title (<code>axis.title</code>), text (<code>axis.text</code>), ticks (<code>axis.ticks</code>), line (<code>axis.line</code>), and all their sub-levels.</li>
<li><code>legend</code> parameters including its position (<code>legend.position</code>), direction (<code>legend.direction</code>), its text (<code>legend.text</code>, <code>legend.title</code>), the design of the box (<code>legend.box</code>, <code>legend.background</code>) etc.</li>
<li><code>panel</code> parameters including its background (<code>panel.background</code>), the grid lines (<code>panel.grid</code>), the border (<code>panel.border</code>), etc.</li>
<li><code>plot</code> parameters including the different titles (<code>plot.title</code>, <code>plot.subtitle</code>, <code>plot.caption</code>), the background (<code>plot.backgorund</code>), etc.</li>
</ul>
<p>Most of these parameters can be controlled at different levels of granularity:</p>
<ul>
<li>overall, e.g. <code>panel.grid</code>;</li>
<li>more detailed, e.g. <code>panel.grid.major</code> and <code>panel.grid.minor</code>;</li>
<li>most detailed, e.g. <code>panel.grid.major.x</code>, <code>panel.grid.major.y</code>, etc.</li>
</ul>
<p>Depending whether the option to modify is some text, a line, or a rectangle, <code>element_text()</code>, <code>element_line()</code>, or <code>element_rect()</code> would be respectively used to control them. These functions provide general (e.g. <code>color</code>) as well as specific options (e.g. <code>family</code> and <code>face</code> for text, <code>linetype</code> for lines etc.) to each type.</p>
<p>Note that if some elements should be left blank, <code>element_blank()</code> can be used regardless of the nature of the element.</p>
<p>Let’s illustrate these concepts using our previous graph stored in <code>line_p</code>. Here, the goal is to remove the grid line, to replace the x and y axis lines by arrows, and to re-position the axis titles to the far end of the axis so that it is next to the arrow head.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data-viz.html#cb136-1" aria-hidden="true" tabindex="-1"></a>line_p <span class="sc">+</span></span>
<span id="cb136-2"><a href="data-viz.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid=</span><span class="fu">element_blank</span>(), </span>
<span id="cb136-3"><a href="data-viz.html#cb136-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border=</span><span class="fu">element_blank</span>(),</span>
<span id="cb136-4"><a href="data-viz.html#cb136-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line=</span><span class="fu">element_line</span>(<span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">ends =</span> <span class="st">&quot;last&quot;</span>, <span class="at">type =</span> <span class="st">&quot;closed&quot;</span>)),</span>
<span id="cb136-5"><a href="data-viz.html#cb136-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-122-1.png" width="672" /></p>
<p>Similarly to the theme, aesthetics can also be adjusted. In previous examples, the x-axis in <code>bar_p</code> was adjusted by setting limits, providing breaks and replacing the values by certain labels using <code>scale_x_continuous()</code>.
Most aesthetics parameters can be controlled by equivalent functions for which the name is using the following structure <code>scale_*nameaes*_*typescale*</code>, and where:</p>
<ul>
<li><em>nameaes</em> corresponds to any aesthetics including <code>x</code>, <code>y</code>, <code>colour</code> or <code>fill</code>, <code>alpha</code>, etc.</li>
<li><em>typescale</em> corresponds to the type of scale, where it is <code>continuous</code>, <code>discrete</code>, or <code>manual</code> (amongst others).</li>
</ul>
<p>Such functions fully control how the corresponding aesthetic should behave, by providing the correspondence between a variable level and (say) its color.
In the graph saved in <code>bar_p</code>, remember that we filled in the bar chart using the product information. Let’s imagine that we are particularly interested in biscuit <code>P3</code>, and want to compare it to the rest of the biscuits. We propose to make <code>P3</code> stand out by filling it in orange, and by setting all the other biscuits in the same gray tone.</p>
<p>Such procedure can be done using <code>scale_fill_manual()</code>.</p>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-123-1.png" width="672" /></p>
<p>When multiple aesthetics are being used, the legend might become overwhelming or redundant. It is possible to turn off some of these visuals within the <code>scale_*()</code> functions, or by using <code>guides()</code> and by setting <code>nameaes='none'</code> as shown in the <code>line_p</code> example.</p>
</div>
<div id="miscealleneous" class="section level3 hasAnchor" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Miscealleneous<a href="data-viz.html#miscealleneous" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="structuring-the-axis" class="section level4 hasAnchor" number="5.4.4.1">
<h4><span class="header-section-number">5.4.4.1</span> Structuring the axis<a href="data-viz.html#structuring-the-axis" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>By default, <code>ggplot()</code> generates plot that fits the data and that fits within the output screen. This means that some graphics might not be perfectly representing the data due to some distortion. In a previous example (<code>line_p</code>), the dimensions were made comparable through <code>coord_fixed()</code>.</p>
<p>Other transformation can be performed. For instance, the graphic can be transposed using <code>coord_flip()</code> as in the following example:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="data-viz.html#cb137-1" aria-hidden="true" tabindex="-1"></a>bar_p <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-124-1.png" width="672" /></p>
</div>
<div id="summary-through-an-example-spider-plots" class="section level4 hasAnchor" number="5.4.4.2">
<h4><span class="header-section-number">5.4.4.2</span> Summary through an example: Spider Plots<a href="data-viz.html#summary-through-an-example-spider-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To conclude this section, and summarize most concepts presented in this chapter, let’s introduce the well-known spider plots. The use of such plots are quite polarizing amongst analysts and the reason of this choice here is purely educational, as 1. there are no pre-defined options in <code>{ggplot2}</code> that provides such charts, and 2. they present some interesting challenges.</p>
<p>Let’s start with deconstructing a spider-plot: a spider plot is a line chart presented in a circular way. So let’s start with building a line chart of our sensory profiles (the means are considered here). For more clarity, only two of the samples (<code>P03</code> and <code>POpt</code>) are represented.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="data-viz.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Constructing the Mean Table</span></span>
<span id="cb138-2"><a href="data-viz.html#cb138-2" aria-hidden="true" tabindex="-1"></a>sensory_mean <span class="ot">&lt;-</span> sensory <span class="sc">%&gt;%</span> </span>
<span id="cb138-3"><a href="data-viz.html#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(Shiny<span class="sc">:</span>Melting, <span class="at">names_to=</span><span class="st">&quot;Variables&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;Scores&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb138-4"><a href="data-viz.html#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Variables =</span> <span class="fu">fct_inorder</span>(Variables)) <span class="sc">%&gt;%</span> </span>
<span id="cb138-5"><a href="data-viz.html#cb138-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Product, Variables) <span class="sc">%&gt;%</span> </span>
<span id="cb138-6"><a href="data-viz.html#cb138-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Scores)) <span class="sc">%&gt;%</span> </span>
<span id="cb138-7"><a href="data-viz.html#cb138-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb138-8"><a href="data-viz.html#cb138-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Product <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;P03&quot;</span>, <span class="st">&quot;POpt&quot;</span>))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;Product&#39;. You can override using the
## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="data-viz.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Building the Line Chart</span></span>
<span id="cb140-2"><a href="data-viz.html#cb140-2" aria-hidden="true" tabindex="-1"></a>spider_line <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory_mean, <span class="fu">aes</span>(<span class="at">x=</span>Variables, <span class="at">y=</span>Mean, <span class="at">colour=</span>Product, <span class="at">linetype=</span>Product))<span class="sc">+</span></span>
<span id="cb140-3"><a href="data-viz.html#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">pch=</span><span class="dv">20</span>, <span class="at">cex=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb140-4"><a href="data-viz.html#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group=</span>Product), <span class="at">lwd=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb140-5"><a href="data-viz.html#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb140-6"><a href="data-viz.html#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb140-7"><a href="data-viz.html#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;&quot;</span>, <span class="at">labels=</span><span class="cn">NULL</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb140-8"><a href="data-viz.html#cb140-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;darkorange&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;grey50&quot;</span>))<span class="sc">+</span></span>
<span id="cb140-9"><a href="data-viz.html#cb140-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;solid&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;dashed&quot;</span>))</span></code></pre></div>
<p>Next step is to represent this line chart in a circular way. This can be done using <code>coord_polar()</code>:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="data-viz.html#cb141-1" aria-hidden="true" tabindex="-1"></a>spider_line <span class="sc">+</span> <span class="fu">coord_polar</span>()</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-126-1.png" width="672" /></p>
<p>This already looks like a spider plot! However, a closer look at it highlights a point that needs improvement: There is no connection between the last attribute (<code>Melting</code>) and the first one (<code>Shiny</code>).</p>
<p>To counter this, the following twofold solution is proposed:</p>
<ol style="list-style-type: decimal">
<li>Associate each attribute to its position (e.g. <code>Shiny</code> is 1, <code>External color intensity</code> is 2, until <code>Melting</code> which would be 32);</li>
<li>Duplicate the last attribute (<code>Melting</code>) and associate it to position 0.</li>
</ol>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="data-viz.html#cb142-1" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> <span class="fu">levels</span>(sensory_mean<span class="sc">$</span>Variables)</span>
<span id="cb142-2"><a href="data-viz.html#cb142-2" aria-hidden="true" tabindex="-1"></a>sensory_mean_pos <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Variables =</span> <span class="fu">c</span>(var[<span class="fu">length</span>(var)], var),</span>
<span id="cb142-3"><a href="data-viz.html#cb142-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Position =</span> <span class="dv">0</span><span class="sc">:</span><span class="fu">length</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb142-4"><a href="data-viz.html#cb142-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(sensory_mean, var_pos, <span class="at">by=</span><span class="st">&quot;Variables&quot;</span>)</span></code></pre></div>
<p>The previous graph is then rebuilt by forcing the position of the attributes on the x-axis using <code>Position</code> (<code>Variables</code> is used for the labels). Here position 0 is voluntarily omitted (<code>breaks = 1:length(var)</code> and <code>labels = var</code>), meaning that only the labels going from 1 to the last variable are being showed. However, the x-axis is forced to go from 0 to the number of attributes (<code>limits = c(0, length(var))</code>).</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="data-viz.html#cb143-1" aria-hidden="true" tabindex="-1"></a>spider_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sensory_mean_pos, <span class="fu">aes</span>(<span class="at">x=</span>Position, <span class="at">y=</span>Mean, <span class="at">colour=</span>Product, <span class="at">linetype=</span>Product))<span class="sc">+</span></span>
<span id="cb143-2"><a href="data-viz.html#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">pch=</span><span class="dv">20</span>, <span class="at">cex=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb143-3"><a href="data-viz.html#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group=</span>Product), <span class="at">lwd=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb143-4"><a href="data-viz.html#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb143-5"><a href="data-viz.html#cb143-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name=</span><span class="st">&quot;&quot;</span>, <span class="at">breaks=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(var), <span class="at">labels=</span>var, <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">length</span>(var)))<span class="sc">+</span></span>
<span id="cb143-6"><a href="data-viz.html#cb143-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;&quot;</span>, <span class="at">labels=</span><span class="cn">NULL</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb143-7"><a href="data-viz.html#cb143-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;darkorange&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;grey50&quot;</span>))<span class="sc">+</span></span>
<span id="cb143-8"><a href="data-viz.html#cb143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;P03&quot;</span><span class="ot">=</span><span class="st">&quot;solid&quot;</span>, <span class="st">&quot;POpt&quot;</span><span class="ot">=</span><span class="st">&quot;dashed&quot;</span>))<span class="sc">+</span></span>
<span id="cb143-9"><a href="data-viz.html#cb143-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>()<span class="sc">+</span></span>
<span id="cb143-10"><a href="data-viz.html#cb143-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>, <span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-129-1.png" width="672" /></p>
<p>By using this trick, the connection between the first and last attributes is established.</p>
<!-- >In this version of the spider plot, the lines appear as curved. This effect is due to the use of `coord_polar()`. In case you would want to have straight lines instead, the equivalent function `coord_str` -->
</div>
<div id="combining-plots" class="section level4 hasAnchor" number="5.4.4.3">
<h4><span class="header-section-number">5.4.4.3</span> Combining plots<a href="data-viz.html#combining-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When multiple plots should be generated using the same pattern on subset of data, it is possible to generate them automatically using <code>facet_wrap()</code> or <code>facet_grid()</code>. The difference between these two functions rely in the number of variables to use for the split: In <code>facet_wrap()</code>, the graphics are <em>vectorized</em>, meaning that each element of the split is represented independently. For <code>facet_grid()</code> however, the graphics is represented in a matrix, meaning that two blocks of split variables are required, one for the columns and one for the rows.</p>
<p>An example of <code>facet_wrap()</code> is provided in Section (REF DATA ANALYSIS).</p>
<p>For these two functions, the parameter <code>scales</code> is particularly interesting as it allows each separate graph to use its own axis scales (<code>free</code> or individually using <code>free_x</code>/<code>free_y</code>) or not (<code>fixed</code>).</p>
<p>To go further, consider also the function <code>facet_trelliscope()</code> from the <code>{trelliscopejs}</code> package. This function generates the same type of graphs as <code>facet_wrap()</code> or <code>facet_grid()</code> with some powerful twists. After generating the plots, they are still editable thanks to an interactive menu that controls for the <em>Grid</em>, <em>Labels</em>, <em>Filter</em>, and <em>Sort</em>. For example, the number of plots to show per row/column can be adjusted, tables with descriptive statistics (e.g. mean, minimum, maximum) can be added under each graph, etc. Moreover, readers that are familiar with the interactivity of <code>{plotly}</code> can make great use of it through the <code>as_plotly = TRUE</code> parameter, which is then applied to each individual graph!</p>
<p>Such procedure is very handy to produce multiple graphs all at once…when the data allow it.
When multiple plot are being generated separately (using different data set, or producing different types of plots), it can still be relevant to combine them all in one. To perform such collage, the package <code>{patchwork}</code> becomes handy.</p>
<p><code>{patchwork}</code> is a package that allows combining <code>ggplot()</code> graphs using <em>mathematical</em> operations. To add two elements next to each others, the <code>+</code> sign is used. To add two elements on top of each others, they should be separated using <code>/</code>. This operation can be combined with <code>()</code> to generate fancier collage.</p>
<p>Let’s illustrate this by creating a plot with on the left side <code>spider_plot</code>, and on the right side <code>bar_p</code> on top of <code>line_p</code>.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data-viz.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb144-2"><a href="data-viz.html#cb144-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> spider_plot <span class="sc">+</span> (bar_p <span class="sc">/</span> line_p)</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-131-1.png" width="672" /></p>
<p>A general title can be added, as well as tag levels (handy for publications!) using <code>plot_annotation()</code>.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="data-viz.html#cb145-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">&quot;Example of &#39;ggplots&#39; I&#39;ve learned today&quot;</span>, <span class="at">tag_levels=</span><span class="st">&#39;a&#39;</span>)</span></code></pre></div>
</div>
</div>
<div id="few-additional-tips-and-tricks" class="section level3 hasAnchor" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Few Additional Tips and Tricks<a href="data-viz.html#few-additional-tips-and-tricks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="combining-data-transformation-and-ggplot2-grammar" class="section level4 hasAnchor" number="5.4.5.1">
<h4><span class="header-section-number">5.4.5.1</span> Combining data transformation and <code>{ggplot2}</code> grammar<a href="data-viz.html#combining-data-transformation-and-ggplot2-grammar" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Both the <code>{tidyverse}</code> and <code>{ggplot2}</code> are using pipes to combine lines of code or layers.
However, the pipes themselves are defined differently since <code>{maggritr}</code> uses <code>%&gt;%</code> whereas <code>{ggplot2}</code> uses <code>+</code>.
It is however possible to combine both systems one after each other, just remember to switch from <code>%&gt;%</code> to <code>+</code> as you transition from data transformation/tidying to building your graph (see Section REF).</p>
</div>
<div id="ordering-elements-in-a-plot" class="section level4 hasAnchor" number="5.4.5.2">
<h4><span class="header-section-number">5.4.5.2</span> Ordering elements in a plot<a href="data-viz.html#ordering-elements-in-a-plot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When building a graph using a categorical variables, <code>{ggplot2}</code> tends to represent the different levels in alphabetical order, especially if the variable is defined as character. Such situation can make the graph more difficult to read, as the categories may not be presented in a logical order (e.g. fall, spring, summer, winter instead of spring, summer, fall, winter). To ensure that the elements are in the right order, either consider transforming the variables into factor (using <code>factor()</code> by indicating the levels order of your choice, or through <code>fct_inorder()</code> to keep the order from the file, see Section REF) or by using a position variable as in the <code>spider_plot</code> example. The former option also works for ordering elements in the legend.</p>
<p>If the order of the elements should be changed <em>within the charts</em> (simple changes such as reverting the order), it can be done directly within the <code>geom_*()</code> function. This is for instance the case with stacked bar chart, in which the order may be reverted using the parameter <code>position = position_fill(reverse = TRUE)</code> for instance (suggesting here that the split was defined through <code>fill</code> in <code>aes()</code>).</p>
</div>
<div id="fixing-overlapping-axis-text" class="section level4 hasAnchor" number="5.4.5.3">
<h4><span class="header-section-number">5.4.5.3</span> Fixing overlapping axis text<a href="data-viz.html#fixing-overlapping-axis-text" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When <code>ggplot()</code> are being built using categorical variables, the labels used on the x-axis are often overlapping (some of the labels being then unreadable). A first good/easy solution consists in reducing the size of the label, and/or to shortening them as long as it does not affect its readability. However, this might not always be possible or sufficient, and other adjustments are required. Let’s use <code>spider_line</code> as illustration to show three possible solutions.</p>
<p>The first option consists in using <code>theme()</code> and rotating the labels (here at 45 degrees, but use 90 degrees to get the names vertically). Note that by default, <code>ggplot()</code> center the labels: to avoid having them crossing the x-axis line, they are being left-centered using <code>hjust=1</code>:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="data-viz.html#cb146-1" aria-hidden="true" tabindex="-1"></a>spider_line <span class="sc">+</span> </span>
<span id="cb146-2"><a href="data-viz.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">45</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-133-1.png" width="672" /></p>
<p>A second option consists in dodging one every two labels along the X-axis. This option works fine, especially when the labels are not too long. In our example unfortunately, some overlap can still be seen. Note that this option is accessible within <code>scale_x_discrete()</code>, not within <code>theme()</code> as we would expect:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data-viz.html#cb147-1" aria-hidden="true" tabindex="-1"></a>spider_line <span class="sc">+</span> </span>
<span id="cb147-2"><a href="data-viz.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">n.dodge =</span> <span class="dv">2</span>))</span></code></pre></div>
<p><img src="i2ds4scc_bookdown_files/figure-html/unnamed-chunk-134-1.png" width="672" /></p>
<p>Last option consists in transposing the graph using <code>coord_flip()</code>. This solution works well since labels on the y-axis are written horizontally. However, this option is not always suitable due to conventions: if it is recommended for bar charts, it may not be for line charts for instance.</p>
</div>
<div id="exporting-graphs" class="section level4 hasAnchor" number="5.4.5.4">
<h4><span class="header-section-number">5.4.5.4</span> Exporting graphs<a href="data-viz.html#exporting-graphs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are various ways to save or export <code>ggplot()</code> charts. To save these plots to your computer in various formats (e.g. png, pdf, etc.), <code>ggsave()</code> is used. By default, <code>ggsave()</code> exports the last plot built and saves it in the location defined by <code>filename</code>, in the format defined by <code>device</code> (additional information regarding the width, height, dpi etc. can also be configured).</p>
<p>For instance, the <code>spiderplot</code> generated earlier<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a> can be saved as following:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="data-viz.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;spiderplot.png&quot;</span>, <span class="at">plot=</span>spiderplot, <span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span></code></pre></div>
<p>As an alternative, <code>ggplot()</code> graphs can also be exported in PowerPoint or Word through the <code>{rvg}</code> package (see Section REF).</p>
</div>
<div id="additional-libraries" class="section level4 hasAnchor" number="5.4.5.5">
<h4><span class="header-section-number">5.4.5.5</span> Additional libraries<a href="data-viz.html#additional-libraries" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>{ggplot2}</code> is a very powerful tool for data visualization. By default, it offers a very large variety of possibilities, which should cover most situations that you would encounter. If not, a quick internet search will most likely find extensions in alternative packages that wil provide you with solutions.</p>
<p>To help you further, here is a non-exhaustive list of relevant packages:</p>
<ul>
<li><code>{ggcharts}</code>: This package provides nice and clear alternatives to some <code>{ggplot2}</code> options through simple functions in one line of code, including <code>bar_chart()</code>, <code>line_chart()</code>, <code>lollipop_chart()</code> and <code>dumbbell_chart()</code> just to name a few.</li>
<li><code>{graffify}</code>: This package extends <code>{ggplot2}</code> by providing nice and easy functions to help data visualization and linear models for ANOVA. For example, it generates through one function bar chart with error bars through <code>plot_scatterbar_sd()</code>, or simultaneous box-plot and scatter plot through <code>plot_scatterbox()</code>.</li>
<li><code>{factoextra}</code>: Although <code>{FactoMineR}</code> generates its graphs in <code>{ggplot2}</code> and in base R, <code>{factoextra}</code> is a great extension as it is easy to use and provides a wide variety of options to customize your plots.</li>
<li><code>{ggcorrplot}</code>: There are many packages that propose to visualize graphically tables of correlations, however we particularly like this one for its simplicity.</li>
<li><code>{ggwordcloud}</code>: It is a great package for building word-clouds as it provides a large degree of control. With this package, the words can either be positioned randomly, by matching a pre-defined shape, etc. But more interestingly, words can also be positioned semi-randomly, hence giving more interpretation power to the final results (for more information, please visit <a href="https://lepennec.github.io/ggwordcloud/" class="uri">https://lepennec.github.io/ggwordcloud/</a><a href="https://lepennec.github.io/ggwordcloud/">link</a>).</li>
<li><code>{ggraph}</code>: This package provides neat solutions to build network visualization in <code>{ggplot2}</code>.</li>
<li><code>{performance}</code>: This package provides pre-defined graphs that allow you evaluating the quality of your models through the single <code>check_model()</code> function. See also <code>{ggside}</code> if you want to print on the margin of your regression plot the marginal distributions (or density plot) of your different categories.</li>
</ul>
<p>To learn more about <code>{ggplot2}</code> basics, we recommend two additional source of information:</p>
<ul>
<li><code>{esquisse}</code>: After loading the package, run the function <code>esquisser()</code>. This command opens a window in which you can select your data set (the data set should be available within you R environment), the type of plot to build, and all the relevant information to build your plot (which variable to be used as X-axis, Y-axis, etc.) through an user-friendly interface. Ultimately, the graph is being generated, but more importantly, the code used to generate the plot is provided. This is hence an educational tool to learn build graphs with <code>{ggplot2}</code>.</li>
<li><a href="https://www.data-to-viz.com/" class="uri">https://www.data-to-viz.com/</a><a href="https://www.data-to-viz.com/">link</a> provides a wide gallery of graphics sorted by the type of data that you have. Each graphic proposed is illustrated with an example provided in R (often in <code>{ggplot2}</code>) and in Python. This website is hence inspirational and educational both at the same time!</li>
</ul>

</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="19">
<li id="fn19"><p>More information regarding the <code>{officer}</code> package are provided in Section REF<a href="data-viz.html#fnref19" class="footnote-back">↩︎</a></p></li>
<li id="fn20"><p>You can also use <code>alpha</code> to control for the transparency of the elements by defining values between 0 (completely transparent) to 1 (no transparency).<a href="data-viz.html#fnref20" class="footnote-back">↩︎</a></p></li>
<li id="fn21"><p>Note that <code>colour</code> and <code>fill</code> are specific cases of groups as they additionally provide a visual cue on the groups through the color code<a href="data-viz.html#fnref21" class="footnote-back">↩︎</a></p></li>
<li id="fn22"><p>Try using <code>geom_label()</code> instead of <code>geom_text()</code> to see the difference between these two.<a href="data-viz.html#fnref22" class="footnote-back">↩︎</a></p></li>
<li id="fn23"><p>Intrinsically, this is what is done with <code>sensory</code> which is only mentioned within <code>ggplot()</code> and is not repeated across the different <code>geom_*()</code> functions.<a href="data-viz.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p>This code could even be simplified by using <code>geom_col()</code> which corresponds to <code>geom_bar()</code> with <code>stat="identity"</code> as default.<a href="data-viz.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p>This function can also be used to draw arrows through the parameter <code>arrow</code> and the function of that same name <code>arrow()</code>.<a href="data-viz.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p>In Sensory and Consumer science, this will often be used for building surface plot responses (e.g. external preference map), and hence is associated to <code>geom_contour()</code> to show the different lines.<a href="data-viz.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>Since <code>spiderplot</code> is not the last plot generated, it needs to be defined in <code>plot</code>.<a href="data-viz.html#fnref27" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-manip.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="auto-report.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["i2ds4scc_bookdown.pdf", "i2ds4scc_bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
