<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Data Preparation | Data Science for Sensory and Consumer Scientists</title>
  <meta name="description" content="Open development of data science book for sensory and consumer scientists." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Data Preparation | Data Science for Sensory and Consumer Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Open development of data science book for sensory and consumer scientists." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Data Preparation | Data Science for Sensory and Consumer Scientists" />
  
  <meta name="twitter:description" content="Open development of data science book for sensory and consumer scientists." />
  

<meta name="author" content="John Ennis, Julien Delarue, and Thierry Worch" />


<meta name="date" content="2021-02-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-collection.html"/>
<link rel="next" href="data-analysis.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science for Sensory and Consumer Scientists</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-should-read-this-book"><i class="fa fa-check"></i>Who Should Read This Book?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i>How to Use This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cautions-dont-that-everybody-does"><i class="fa fa-check"></i>Cautions: Don’t that Everybody Does</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contact-us"><i class="fa fa-check"></i>How to Contact Us</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="bienvenue.html"><a href="bienvenue.html"><i class="fa fa-check"></i><b>1</b> Bienvenue!</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#why-data-science-for-sensory-and-consumer-science"><i class="fa fa-check"></i>Why Data Science for Sensory and Consumer Science?</a>
<ul>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#core-principles-in-sensory-and-consumer-science"><i class="fa fa-check"></i>Core principles in Sensory and Consumer Science</a></li>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#measuring-and-analyzing-human-responses"><i class="fa fa-check"></i>Measuring and analyzing human responses</a></li>
<li class="chapter" data-level="" data-path="bienvenue.html"><a href="bienvenue.html#computational-sensory-science"><i class="fa fa-check"></i>Computational Sensory Science</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Hors d’Oeuvres</b></span></li>
<li class="chapter" data-level="2" data-path="data-science.html"><a href="data-science.html"><i class="fa fa-check"></i><b>2</b> What is Data Science?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-science.html"><a href="data-science.html#history-and-definition"><i class="fa fa-check"></i><b>2.1</b> History and Definition</a></li>
<li class="chapter" data-level="2.2" data-path="data-science.html"><a href="data-science.html#benefits-of-data-science"><i class="fa fa-check"></i><b>2.2</b> Benefits of Data Science</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-science.html"><a href="data-science.html#data-driven-decision-making"><i class="fa fa-check"></i><b>2.2.1</b> Data-Driven Decision Making</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-science.html"><a href="data-science.html#standardized-data-collection"><i class="fa fa-check"></i><b>2.2.2</b> Standardized Data Collection</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-science.html"><a href="data-science.html#standardized-reporting"><i class="fa fa-check"></i><b>2.2.3</b> Standardized Reporting</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-science.html"><a href="data-science.html#improved-business-impact"><i class="fa fa-check"></i><b>2.2.4</b> Improved Business Impact</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-science.html"><a href="data-science.html#data-scientific-workflow"><i class="fa fa-check"></i><b>2.3</b> Data Scientific Workflow</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-science.html"><a href="data-science.html#data-collection2"><i class="fa fa-check"></i><b>2.3.1</b> Data Collection</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-science.html"><a href="data-science.html#data-preparation"><i class="fa fa-check"></i><b>2.3.2</b> Data Preparation</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-science.html"><a href="data-science.html#data-analysis2"><i class="fa fa-check"></i><b>2.3.3</b> Data Analysis</a></li>
<li class="chapter" data-level="2.3.4" data-path="data-science.html"><a href="data-science.html#value-delivery2"><i class="fa fa-check"></i><b>2.3.4</b> Value Delivery</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-science.html"><a href="data-science.html#reproducible-research"><i class="fa fa-check"></i><b>2.4</b> Reproducible Research</a></li>
<li class="chapter" data-level="2.5" data-path="data-science.html"><a href="data-science.html#how-to-learn-data-science"><i class="fa fa-check"></i><b>2.5</b> How to Learn Data Science</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidy-thoughts.html"><a href="tidy-thoughts.html"><i class="fa fa-check"></i><b>3</b> Tidy Thinking</a></li>
<li class="chapter" data-level="4" data-path="data-manip.html"><a href="data-manip.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manip.html"><a href="data-manip.html#tidying-data"><i class="fa fa-check"></i><b>4.1</b> Tidying Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manip.html"><a href="data-manip.html#simple-manipulations"><i class="fa fa-check"></i><b>4.1.1</b> Simple Manipulations</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-manip.html"><a href="data-manip.html#reshaping-the-data"><i class="fa fa-check"></i><b>4.1.2</b> Reshaping the Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-manip.html"><a href="data-manip.html#transformation-that-alters-the-data"><i class="fa fa-check"></i><b>4.1.3</b> Transformation that Alters the Data</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-manip.html"><a href="data-manip.html#combining-data-from-different-sources"><i class="fa fa-check"></i><b>4.1.4</b> Combining Data from Different Sources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-viz.html"><a href="data-viz.html"><i class="fa fa-check"></i><b>5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-viz.html"><a href="data-viz.html#design-principles"><i class="fa fa-check"></i><b>5.1</b> Design Principles</a></li>
<li class="chapter" data-level="5.2" data-path="data-viz.html"><a href="data-viz.html#table-making"><i class="fa fa-check"></i><b>5.2</b> Table Making</a></li>
<li class="chapter" data-level="5.3" data-path="data-viz.html"><a href="data-viz.html#chart-making"><i class="fa fa-check"></i><b>5.3</b> Chart Making</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-viz.html"><a href="data-viz.html#philosophy-of-ggplot2"><i class="fa fa-check"></i><b>5.3.1</b> Philosophy of ggplot2</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-viz.html"><a href="data-viz.html#common-charts"><i class="fa fa-check"></i><b>5.3.2</b> Common Charts</a></li>
<li class="chapter" data-level="5.3.3" data-path="data-viz.html"><a href="data-viz.html#additional-topics"><i class="fa fa-check"></i><b>5.3.3</b> Additional Topics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="auto-report.html"><a href="auto-report.html"><i class="fa fa-check"></i><b>6</b> Automated Reporting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="auto-report.html"><a href="auto-report.html#what-is-automated-reporting"><i class="fa fa-check"></i><b>6.1</b> What is Automated Reporting?</a></li>
<li class="chapter" data-level="6.2" data-path="auto-report.html"><a href="auto-report.html#excel"><i class="fa fa-check"></i><b>6.2</b> Excel</a></li>
<li class="chapter" data-level="6.3" data-path="auto-report.html"><a href="auto-report.html#powerpoint"><i class="fa fa-check"></i><b>6.3</b> PowerPoint</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="auto-report.html"><a href="auto-report.html#powerpoint-formatting"><i class="fa fa-check"></i><b>6.3.1</b> PowerPoint Formatting</a></li>
<li class="chapter" data-level="6.3.2" data-path="auto-report.html"><a href="auto-report.html#placeholders"><i class="fa fa-check"></i><b>6.3.2</b> Placeholders</a></li>
<li class="chapter" data-level="6.3.3" data-path="auto-report.html"><a href="auto-report.html#text-1"><i class="fa fa-check"></i><b>6.3.3</b> Text</a></li>
<li class="chapter" data-level="6.3.4" data-path="auto-report.html"><a href="auto-report.html#tables"><i class="fa fa-check"></i><b>6.3.4</b> Tables</a></li>
<li class="chapter" data-level="6.3.5" data-path="auto-report.html"><a href="auto-report.html#charts"><i class="fa fa-check"></i><b>6.3.5</b> Charts</a></li>
<li class="chapter" data-level="6.3.6" data-path="auto-report.html"><a href="auto-report.html#mschart-package"><i class="fa fa-check"></i><b>6.3.6</b> mschart Package</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="auto-report.html"><a href="auto-report.html#word"><i class="fa fa-check"></i><b>6.4</b> Word</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="auto-report.html"><a href="auto-report.html#word-documents"><i class="fa fa-check"></i><b>6.4.1</b> Word documents</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Bon Appétit</b></span></li>
<li class="chapter" data-level="7" data-path="example-projects.html"><a href="example-projects.html"><i class="fa fa-check"></i><b>7</b> Example Projects</a></li>
<li class="chapter" data-level="8" data-path="data-collection.html"><a href="data-collection.html"><i class="fa fa-check"></i><b>8</b> Data Collection</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-collection.html"><a href="data-collection.html#design-1"><i class="fa fa-check"></i><b>8.1</b> Design</a></li>
<li class="chapter" data-level="8.2" data-path="data-collection.html"><a href="data-collection.html#execute-1"><i class="fa fa-check"></i><b>8.2</b> Execute</a></li>
<li class="chapter" data-level="8.3" data-path="data-collection.html"><a href="data-collection.html#import-1"><i class="fa fa-check"></i><b>8.3</b> Import</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-collection.html"><a href="data-collection.html#importing-structured-excel-file"><i class="fa fa-check"></i><b>8.3.1</b> Importing Structured Excel File</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-collection.html"><a href="data-collection.html#importing-unstructured-excel-file"><i class="fa fa-check"></i><b>8.3.2</b> Importing Unstructured Excel File</a></li>
<li class="chapter" data-level="8.3.3" data-path="data-collection.html"><a href="data-collection.html#import-mult-sheet"><i class="fa fa-check"></i><b>8.3.3</b> Importing Data Stored in Multiple Sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-prep.html"><a href="data-prep.html"><i class="fa fa-check"></i><b>9</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data-prep.html"><a href="data-prep.html#inspect-1"><i class="fa fa-check"></i><b>9.1</b> Inspect</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="data-prep.html"><a href="data-prep.html#data-inspection"><i class="fa fa-check"></i><b>9.1.1</b> Data Inspection</a></li>
<li class="chapter" data-level="9.1.2" data-path="data-prep.html"><a href="data-prep.html#design-inspection"><i class="fa fa-check"></i><b>9.1.2</b> Design Inspection</a></li>
<li class="chapter" data-level="9.1.3" data-path="data-prep.html"><a href="data-prep.html#missing-data-inspection"><i class="fa fa-check"></i><b>9.1.3</b> Missing Data Inspection</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="data-prep.html"><a href="data-prep.html#clean-1"><i class="fa fa-check"></i><b>9.2</b> Clean</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="data-prep.html"><a href="data-prep.html#renaming-variables-1"><i class="fa fa-check"></i><b>9.2.1</b> Renaming Variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="data-prep.html"><a href="data-prep.html#handling-data-type"><i class="fa fa-check"></i><b>9.2.2</b> Handling Data Type</a></li>
<li class="chapter" data-level="9.2.3" data-path="data-prep.html"><a href="data-prep.html#converting-between-types"><i class="fa fa-check"></i><b>9.2.3</b> Converting between Types</a></li>
<li class="chapter" data-level="9.2.4" data-path="data-prep.html"><a href="data-prep.html#handling-missing-values"><i class="fa fa-check"></i><b>9.2.4</b> Handling Missing Values</a></li>
<li class="chapter" data-level="9.2.5" data-path="data-prep.html"><a href="data-prep.html#restructuring-data"><i class="fa fa-check"></i><b>9.2.5</b> Restructuring Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>10</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-analysis.html"><a href="data-analysis.html#transform-1"><i class="fa fa-check"></i><b>10.1</b> Transform</a></li>
<li class="chapter" data-level="10.2" data-path="data-analysis.html"><a href="data-analysis.html#explore-1"><i class="fa fa-check"></i><b>10.2</b> Explore</a></li>
<li class="chapter" data-level="10.3" data-path="data-analysis.html"><a href="data-analysis.html#model-1"><i class="fa fa-check"></i><b>10.3</b> Model</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="value-delivery.html"><a href="value-delivery.html"><i class="fa fa-check"></i><b>11</b> Value Delivery</a>
<ul>
<li class="chapter" data-level="11.1" data-path="value-delivery.html"><a href="value-delivery.html#communicate-1"><i class="fa fa-check"></i><b>11.1</b> Communicate</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="value-delivery.html"><a href="value-delivery.html#know-your-audience"><i class="fa fa-check"></i><b>11.1.1</b> Know Your Audience</a></li>
<li class="chapter" data-level="11.1.2" data-path="value-delivery.html"><a href="value-delivery.html#pick-the-correct-format"><i class="fa fa-check"></i><b>11.1.2</b> Pick the Correct Format</a></li>
<li class="chapter" data-level="11.1.3" data-path="value-delivery.html"><a href="value-delivery.html#storytelling"><i class="fa fa-check"></i><b>11.1.3</b> Storytelling</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="value-delivery.html"><a href="value-delivery.html#reformulate-1"><i class="fa fa-check"></i><b>11.2</b> Reformulate</a></li>
</ul></li>
<li class="part"><span><b>Haute Cuisine</b></span></li>
<li class="chapter" data-level="12" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>12</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="machine-learning.html"><a href="machine-learning.html#overview"><i class="fa fa-check"></i><b>12.1</b> Overview</a></li>
<li class="chapter" data-level="12.2" data-path="machine-learning.html"><a href="machine-learning.html#key-topics"><i class="fa fa-check"></i><b>12.2</b> Key Topics</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="machine-learning.html"><a href="machine-learning.html#model-validation"><i class="fa fa-check"></i><b>12.2.1</b> Model Validation</a></li>
<li class="chapter" data-level="12.2.2" data-path="machine-learning.html"><a href="machine-learning.html#unsupervised-learning"><i class="fa fa-check"></i><b>12.2.2</b> Unsupervised learning</a></li>
<li class="chapter" data-level="12.2.3" data-path="machine-learning.html"><a href="machine-learning.html#semisupervised-learning"><i class="fa fa-check"></i><b>12.2.3</b> Semisupervised learning</a></li>
<li class="chapter" data-level="12.2.4" data-path="machine-learning.html"><a href="machine-learning.html#supervised-learning"><i class="fa fa-check"></i><b>12.2.4</b> Supervised learning</a></li>
<li class="chapter" data-level="12.2.5" data-path="machine-learning.html"><a href="machine-learning.html#interpretability"><i class="fa fa-check"></i><b>12.2.5</b> Interpretability</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="machine-learning.html"><a href="machine-learning.html#common-applications"><i class="fa fa-check"></i><b>12.3</b> Common Applications</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="machine-learning.html"><a href="machine-learning.html#predicting-sensory-profiles-from-instrumental-data"><i class="fa fa-check"></i><b>12.3.1</b> Predicting sensory profiles from instrumental data</a></li>
<li class="chapter" data-level="12.3.2" data-path="machine-learning.html"><a href="machine-learning.html#predicting-consumer-response-from-sensory-profiles"><i class="fa fa-check"></i><b>12.3.2</b> Predicting consumer response from sensory profiles</a></li>
<li class="chapter" data-level="12.3.3" data-path="machine-learning.html"><a href="machine-learning.html#characterizing-consumer-clusters"><i class="fa fa-check"></i><b>12.3.3</b> Characterizing consumer clusters</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="machine-learning.html"><a href="machine-learning.html#code-examples"><i class="fa fa-check"></i><b>12.4</b> Code Examples</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="machine-learning.html"><a href="machine-learning.html#data-prep-1"><i class="fa fa-check"></i><b>12.4.1</b> Data Prep</a></li>
<li class="chapter" data-level="12.4.2" data-path="machine-learning.html"><a href="machine-learning.html#classification-code"><i class="fa fa-check"></i><b>12.4.2</b> Classification Code</a></li>
<li class="chapter" data-level="12.4.3" data-path="machine-learning.html"><a href="machine-learning.html#regression-code"><i class="fa fa-check"></i><b>12.4.3</b> Regression Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>13</b> Text Analysis</a>
<ul>
<li class="chapter" data-level="13.1" data-path="text-analysis.html"><a href="text-analysis.html#overview-1"><i class="fa fa-check"></i><b>13.1</b> Overview</a></li>
<li class="chapter" data-level="13.2" data-path="text-analysis.html"><a href="text-analysis.html#key-topics-1"><i class="fa fa-check"></i><b>13.2</b> Key Topics</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="text-analysis.html"><a href="text-analysis.html#data-sources"><i class="fa fa-check"></i><b>13.2.1</b> Data Sources</a></li>
<li class="chapter" data-level="13.2.2" data-path="text-analysis.html"><a href="text-analysis.html#working-with-strings"><i class="fa fa-check"></i><b>13.2.2</b> Working with Strings</a></li>
<li class="chapter" data-level="13.2.3" data-path="text-analysis.html"><a href="text-analysis.html#tokenizing"><i class="fa fa-check"></i><b>13.2.3</b> Tokenizing</a></li>
<li class="chapter" data-level="13.2.4" data-path="text-analysis.html"><a href="text-analysis.html#lemmatization-stemming-and-stop-word-removal"><i class="fa fa-check"></i><b>13.2.4</b> Lemmatization, stemming, and stop word removal</a></li>
<li class="chapter" data-level="13.2.5" data-path="text-analysis.html"><a href="text-analysis.html#part-of-speech-tagging"><i class="fa fa-check"></i><b>13.2.5</b> Part of Speech Tagging</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="text-analysis.html"><a href="text-analysis.html#common-applications-1"><i class="fa fa-check"></i><b>13.3</b> Common Applications</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="text-analysis.html"><a href="text-analysis.html#frequency-counts-and-summary-statistics"><i class="fa fa-check"></i><b>13.3.1</b> Frequency counts and summary statistics</a></li>
<li class="chapter" data-level="13.3.2" data-path="text-analysis.html"><a href="text-analysis.html#word-clouds"><i class="fa fa-check"></i><b>13.3.2</b> Word clouds</a></li>
<li class="chapter" data-level="13.3.3" data-path="text-analysis.html"><a href="text-analysis.html#contrast-plots"><i class="fa fa-check"></i><b>13.3.3</b> Contrast plots</a></li>
<li class="chapter" data-level="13.3.4" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis"><i class="fa fa-check"></i><b>13.3.4</b> Sentiment analysis</a></li>
<li class="chapter" data-level="13.3.5" data-path="text-analysis.html"><a href="text-analysis.html#topic-modeling"><i class="fa fa-check"></i><b>13.3.5</b> Topic Modeling</a></li>
<li class="chapter" data-level="13.3.6" data-path="text-analysis.html"><a href="text-analysis.html#bigrams-and-word-graphs"><i class="fa fa-check"></i><b>13.3.6</b> Bigrams and word graphs</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="text-analysis.html"><a href="text-analysis.html#code-examples-1"><i class="fa fa-check"></i><b>13.4</b> Code Examples</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="text-analysis.html"><a href="text-analysis.html#statistical-entities"><i class="fa fa-check"></i><b>13.4.1</b> Statistical entities</a></li>
<li class="chapter" data-level="13.4.2" data-path="text-analysis.html"><a href="text-analysis.html#analysis-of-frequencies-and-term-frequency-document"><i class="fa fa-check"></i><b>13.4.2</b> Analysis of Frequencies and term-frequency document</a></li>
<li class="chapter" data-level="13.4.3" data-path="text-analysis.html"><a href="text-analysis.html#futher-analysis-of-the-words"><i class="fa fa-check"></i><b>13.4.3</b> Futher Analysis of the words</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="linear-programming.html"><a href="linear-programming.html"><i class="fa fa-check"></i><b>14</b> Linear Programming</a>
<ul>
<li class="chapter" data-level="14.1" data-path="linear-programming.html"><a href="linear-programming.html#overview-2"><i class="fa fa-check"></i><b>14.1</b> Overview</a></li>
<li class="chapter" data-level="14.2" data-path="linear-programming.html"><a href="linear-programming.html#common-applications-2"><i class="fa fa-check"></i><b>14.2</b> Common Applications</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="linear-programming.html"><a href="linear-programming.html#experimental-design"><i class="fa fa-check"></i><b>14.2.1</b> Experimental Design</a></li>
<li class="chapter" data-level="14.2.2" data-path="linear-programming.html"><a href="linear-programming.html#sample-selection"><i class="fa fa-check"></i><b>14.2.2</b> Sample Selection</a></li>
<li class="chapter" data-level="14.2.3" data-path="linear-programming.html"><a href="linear-programming.html#compact-letter-displays"><i class="fa fa-check"></i><b>14.2.3</b> Compact Letter Displays</a></li>
<li class="chapter" data-level="14.2.4" data-path="linear-programming.html"><a href="linear-programming.html#turf-analysis"><i class="fa fa-check"></i><b>14.2.4</b> TURF Analysis</a></li>
<li class="chapter" data-level="14.2.5" data-path="linear-programming.html"><a href="linear-programming.html#bundle-optimization"><i class="fa fa-check"></i><b>14.2.5</b> Bundle Optimization</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="linear-programming.html"><a href="linear-programming.html#code-examples-2"><i class="fa fa-check"></i><b>14.3</b> Code Examples</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="pipelines.html"><a href="pipelines.html"><i class="fa fa-check"></i><b>15</b> Pipelines</a></li>
<li class="chapter" data-level="16" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i><b>16</b> Dashboards</a></li>
<li class="chapter" data-level="17" data-path="graph-db.html"><a href="graph-db.html"><i class="fa fa-check"></i><b>17</b> Graph Databases</a></li>
<li class="appendix"><span><b>À la Carte</b></span></li>
<li class="chapter" data-level="A" data-path="start-R.html"><a href="start-R.html"><i class="fa fa-check"></i><b>A</b> Apéritifs (Getting Started)</a>
<ul>
<li class="chapter" data-level="A.1" data-path="start-R.html"><a href="start-R.html#r"><i class="fa fa-check"></i><b>A.1</b> R</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="start-R.html"><a href="start-R.html#why-learn-a-programming-language"><i class="fa fa-check"></i><b>A.1.1</b> Why Learn a Programming Language?</a></li>
<li class="chapter" data-level="A.1.2" data-path="start-R.html"><a href="start-R.html#why-r"><i class="fa fa-check"></i><b>A.1.2</b> Why R?</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="start-R.html"><a href="start-R.html#why-r-1"><i class="fa fa-check"></i><b>A.2</b> Why R?</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="start-R.html"><a href="start-R.html#steps-to-install-r"><i class="fa fa-check"></i><b>A.2.1</b> Steps to Install R</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="start-R.html"><a href="start-R.html#rstudio"><i class="fa fa-check"></i><b>A.3</b> RStudio</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="start-R.html"><a href="start-R.html#steps-to-install-rstudio"><i class="fa fa-check"></i><b>A.3.1</b> Steps to Install RStudio</a></li>
<li class="chapter" data-level="A.3.2" data-path="start-R.html"><a href="start-R.html#create-a-local-project"><i class="fa fa-check"></i><b>A.3.2</b> Create a Local Project</a></li>
<li class="chapter" data-level="A.3.3" data-path="start-R.html"><a href="start-R.html#install-and-load-packages"><i class="fa fa-check"></i><b>A.3.3</b> Install and Load Packages</a></li>
<li class="chapter" data-level="A.3.4" data-path="start-R.html"><a href="start-R.html#run-sample-code"><i class="fa fa-check"></i><b>A.3.4</b> Run Sample Code</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="start-R.html"><a href="start-R.html#git-and-github"><i class="fa fa-check"></i><b>A.4</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="start-R.html"><a href="start-R.html#git"><i class="fa fa-check"></i><b>A.4.1</b> Git</a></li>
<li class="chapter" data-level="A.4.2" data-path="start-R.html"><a href="start-R.html#github"><i class="fa fa-check"></i><b>A.4.2</b> GitHub</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="start-R.html"><a href="start-R.html#raw-material"><i class="fa fa-check"></i><b>A.5</b> RAW MATERIAL</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="start-R.html"><a href="start-R.html#principles"><i class="fa fa-check"></i><b>A.5.1</b> Principles</a></li>
<li class="chapter" data-level="A.5.2" data-path="start-R.html"><a href="start-R.html#tools"><i class="fa fa-check"></i><b>A.5.2</b> Tools</a></li>
<li class="chapter" data-level="A.5.3" data-path="start-R.html"><a href="start-R.html#documentation"><i class="fa fa-check"></i><b>A.5.3</b> Documentation</a></li>
<li class="chapter" data-level="A.5.4" data-path="start-R.html"><a href="start-R.html#version-control"><i class="fa fa-check"></i><b>A.5.4</b> Version control</a></li>
<li class="chapter" data-level="A.5.5" data-path="start-R.html"><a href="start-R.html#online-repositories-for-team-collaboration"><i class="fa fa-check"></i><b>A.5.5</b> Online repositories for team collaboration</a></li>
<li class="chapter" data-level="A.5.6" data-path="start-R.html"><a href="start-R.html#building-a-code-base"><i class="fa fa-check"></i><b>A.5.6</b> Building a code base</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>B</b> Digestifs (Next Steps)</a>
<ul>
<li class="chapter" data-level="B.1" data-path="next-steps.html"><a href="next-steps.html#sensory-analysis-in-r"><i class="fa fa-check"></i><b>B.1</b> Sensory Analysis in R</a></li>
<li class="chapter" data-level="B.2" data-path="next-steps.html"><a href="next-steps.html#other-recommended-resources"><i class="fa fa-check"></i><b>B.2</b> Other Recommended Resources</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="next-steps.html"><a href="next-steps.html#r-for-data-science"><i class="fa fa-check"></i><b>B.2.1</b> R for Data Science</a></li>
<li class="chapter" data-level="B.2.2" data-path="next-steps.html"><a href="next-steps.html#hands-on-machine-learning-with-r"><i class="fa fa-check"></i><b>B.2.2</b> Hands-On Machine Learning with R</a></li>
<li class="chapter" data-level="B.2.3" data-path="next-steps.html"><a href="next-steps.html#factoextra"><i class="fa fa-check"></i><b>B.2.3</b> FactoExtra</a></li>
<li class="chapter" data-level="B.2.4" data-path="next-steps.html"><a href="next-steps.html#r-graphics-cookbook"><i class="fa fa-check"></i><b>B.2.4</b> R Graphics Cookbook</a></li>
<li class="chapter" data-level="B.2.5" data-path="next-steps.html"><a href="next-steps.html#storytelling-with-data"><i class="fa fa-check"></i><b>B.2.5</b> Storytelling with Data</a></li>
<li class="chapter" data-level="B.2.6" data-path="next-steps.html"><a href="next-steps.html#text-mining-wtih-r"><i class="fa fa-check"></i><b>B.2.6</b> Text Mining wtih R</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="next-steps.html"><a href="next-steps.html#python-and-other-languages"><i class="fa fa-check"></i><b>B.3</b> Python and Other Languages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for Sensory and Consumer Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-prep" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Data Preparation</h1>
<p>The data we will be using in this chapter is the one that you imported in Section <a href="data-collection.html#data-collection">8</a>.</p>
<div id="inspect-1" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Inspect</h2>
<div id="data-inspection" class="section level3" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Data Inspection</h3>
<p>To inspect the data, different steps can be used.
First, since <code>read_xlsx()</code> returns a tibble, we can take advantage of its printing properties to get a fill of the data at hand,</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-prep.html#cb66-1" aria-hidden="true" tabindex="-1"></a>TFEQ_data</span></code></pre></div>
<p>Other informative solutions consists in printing a summary of the data through the <code>summary()</code> function, or looking at its type and first values using <code>str()</code>. However, due to its richness of the outputs, we prefer to use the <code>skim()</code> function from the <code>{skimr}</code> package.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-prep.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb67-2"><a href="data-prep.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(TFEQ_data)</span></code></pre></div>
</div>
<div id="design-inspection" class="section level3" number="9.1.2">
<h3><span class="header-section-number">9.1.2</span> Design Inspection</h3>
<p>Evaluate if the design is complete/incomplete
Frequencies and cross-frequencies (simple statistics and simple graphs)</p>
</div>
<div id="missing-data-inspection" class="section level3" number="9.1.3">
<h3><span class="header-section-number">9.1.3</span> Missing Data Inspection</h3>
<p>Are there NAs?
If yes, are they structured of random?</p>
</div>
</div>
<div id="clean-1" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Clean</h2>
<div id="renaming-variables-1" class="section level3" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Renaming Variables</h3>
<p>renaming columns using <code>rename()</code> or <code>select()</code></p>
</div>
<div id="handling-data-type" class="section level3" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Handling Data Type</h3>
<p>In R, the variables can be of different types, going from numerical to nominal to binary etc. This section aims in presenting the most common types (and their properties) used in sensory and consumer studies, and in showing how to transform a variable from one type to another.</p>
<p>Remember that when your dataset is a tibble (as is the case here), the type of each variable is provided as sub-header when printed on screen. This eases the work of the analyst as the variables’ type can be assessed at any moment.</p>
<p>In case the dataset is not in a tibble, the use of the <code>str()</code> function used previously becomes handy as it provides this information.</p>
<p>In sensory and consumer research, the four most common types are:</p>
<ul>
<li>Numerical (incl. integer or <code>int</code>, decimal or <code>dcl</code>, and double or <code>dbl</code>);</li>
<li>Logical or <code>lgl</code>;</li>
<li>Character or <code>char</code>;</li>
<li>Factor or <code>fct</code>.</li>
</ul>
<p>R still has plenty of other types, for more information please visit: <a href="https://tibble.tidyverse.org/articles/types.html" class="uri">https://tibble.tidyverse.org/articles/types.html</a></p>
<div id="numerical-data" class="section level4" number="9.2.2.1">
<h4><span class="header-section-number">9.2.2.1</span> Numerical Data</h4>
<p>Since a large proportion of the research done is quantitative, it is no surprise that our dataset are often dominated with numerical variables. In practice, numerical data includes integer (non-fractional number, e.g. 1, 2, -16, etc.), or decimal value (or double, e.g. 1.6, 2.333333, -3.2 etc.).
By default, when reading data from an external file, R converts any numerical variables to integer unless decimal points are detected, in which case it is converted into double.</p>
<p><strong>Do we want to show how to format R wrt the number of decimals? (e.g. options(digits=2))</strong></p>
</div>
<div id="binary-data" class="section level4" number="9.2.2.2">
<h4><span class="header-section-number">9.2.2.2</span> Binary Data</h4>
<p>Another common type that seem to be numerical in appearance, but that has additional properties is the binary type.
Binary data is data that takes two possible values (<code>TRUE</code> or <code>FALSE</code>), and are often the results of a <em>test</em> (e.g. is <code>x&gt;3</code>? Or is <code>MyVar</code> numerical?). A typical example of binary data in sensory and consumer research is data collected through Check-All-That-Apply (CATA) questionnaires.</p>
<p>Note: Intrinsically, binary data is <em>numerical</em>, TRUE being assimilated to 1, FALSE to 0. If multiple tests are being performed, it is possible to sum the number of tests that pass using the <code>sum()</code> function, as shown in the simple example below:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-prep.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb68-2"><a href="data-prep.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Generating 10 random values between 1 and 10 using the uniform distribution</span></span>
<span id="cb68-3"><a href="data-prep.html#cb68-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb68-4"><a href="data-prep.html#cb68-4" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb68-5"><a href="data-prep.html#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="data-prep.html#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Test whether the values generated are strictly larger than 5</span></span>
<span id="cb68-7"><a href="data-prep.html#cb68-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> x<span class="sc">&gt;</span><span class="dv">5</span></span>
<span id="cb68-8"><a href="data-prep.html#cb68-8" aria-hidden="true" tabindex="-1"></a>test</span>
<span id="cb68-9"><a href="data-prep.html#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="data-prep.html#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Counting the number of values strictly larger than 5</span></span>
<span id="cb68-11"><a href="data-prep.html#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(test)</span></code></pre></div>
</div>
<div id="nominal-data" class="section level4" number="9.2.2.3">
<h4><span class="header-section-number">9.2.2.3</span> Nominal Data</h4>
<p>Nominal data is any data that is not numerical. In most cases, nominal data are defined through text, or strings. It can appear in some situations that nominal variables are still defined with numbers although they do not have a numerical meaning. This is for instance the case when the respondents or samples are identified through numerical codes: In that case, it is clear that respondent 2 is not twice larger than respondent 1 for instance. But since the software cannot guess that those numbers are <em>identifiers</em> rather than <em>numbers</em>, the variables should be declared as nominal. The procedure explaining how to convert the type of the variables will be explained in the next section.</p>
<p>For nominal data, two particular types of data are of interest:</p>
<ul>
<li>Character or <code>char</code>;</li>
<li>Factor or <code>fct</code>.</li>
</ul>
<p>Variables defined as character or factor take strings as input. However, these two types differ in terms of structure of their levels:</p>
<ul>
<li>For <code>character</code>, there are no particular structure, and the variables can take any values (e.g. open-ended question);</li>
<li>For <code>factor</code>, the inputs of the variables are structured into <code>levels</code>.</li>
</ul>
<p>To evaluate the number of levels, different procedure are required:</p>
<ul>
<li>For <code>character</code>, one should count the number of unique element using <code>length()</code> and <code>unique()</code>;</li>
<li>For <code>factor</code>, the levels and the number of levels are direcly provided by <code>levels()</code> and <code>nlevels()</code>.</li>
</ul>
<p>Let’s compare a variable set as <code>factor</code> and <code>character</code> by using the <code>Judge</code> column from <code>TFEQ_data</code>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-prep.html#cb69-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> TFEQ_data <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="data-prep.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Judge) <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="data-prep.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Judge_fct =</span> <span class="fu">as.factor</span>(Judge))</span>
<span id="cb69-4"><a href="data-prep.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(example)</span>
<span id="cb69-5"><a href="data-prep.html#cb69-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-6"><a href="data-prep.html#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(example<span class="sc">$</span>Judge)</span>
<span id="cb69-7"><a href="data-prep.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(example<span class="sc">$</span>Judge))</span>
<span id="cb69-8"><a href="data-prep.html#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="data-prep.html#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(example<span class="sc">$</span>Judge_fct)</span>
<span id="cb69-10"><a href="data-prep.html#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(example<span class="sc">$</span>Judge_fct)</span></code></pre></div>
<p>Although <code>Judge</code> and <code>Judge_fct</code> look the same, they are structurally different, and those differences play an important role that one should consider when running certain analyses, or building tables and graphs.</p>
<p>When set as <code>character</code>, the number of levels of a variable is directly read from the data, and its levels’ order would either match the way they appear in the data, or are ordered alphabetically. This means that any data collected using a structured scale will lose its natural order.</p>
<p>When set as <code>factor</code>, the number and order of the factor levels are informed, and does not depend on the data itself: If a level has never been selected, or if certain groups have been filtered, this information is still present in the data.</p>
<p>To illustrate this, let’s re-arrange the levels from <code>Judge_fct</code> by ordering them numerically in such a way <code>J2</code> follows <code>J1</code> rather than <code>J10</code>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-prep.html#cb70-1" aria-hidden="true" tabindex="-1"></a>judge <span class="ot">&lt;-</span> <span class="fu">str_sort</span>(<span class="fu">levels</span>(example<span class="sc">$</span>Judge_fct),<span class="at">numeric=</span><span class="cn">TRUE</span>)</span>
<span id="cb70-2"><a href="data-prep.html#cb70-2" aria-hidden="true" tabindex="-1"></a>judge</span>
<span id="cb70-3"><a href="data-prep.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(example<span class="sc">$</span>Judge_fct) <span class="ot">&lt;-</span> judge</span></code></pre></div>
<p>Now the levels are sorted, let’s ‘remove’ some respondents by only keeping the 20 first ones (J1 to J20, as J18 does not exist), and re-run the previous code:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-prep.html#cb71-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> TFEQ_data <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="data-prep.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Judge) <span class="sc">%&gt;%</span> </span>
<span id="cb71-3"><a href="data-prep.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Judge_fct =</span> <span class="fu">as.factor</span>(Judge)) <span class="sc">%&gt;%</span> </span>
<span id="cb71-4"><a href="data-prep.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Judge <span class="sc">%in%</span> <span class="fu">paste0</span>(<span class="st">&quot;J&quot;</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>))</span>
<span id="cb71-5"><a href="data-prep.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(example)</span>
<span id="cb71-6"><a href="data-prep.html#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="data-prep.html#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(example<span class="sc">$</span>Judge)</span>
<span id="cb71-8"><a href="data-prep.html#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(example<span class="sc">$</span>Judge))</span>
<span id="cb71-9"><a href="data-prep.html#cb71-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-10"><a href="data-prep.html#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(example<span class="sc">$</span>Judge_fct)</span>
<span id="cb71-11"><a href="data-prep.html#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(example<span class="sc">$</span>Judge_fct)</span></code></pre></div>
<p>After filtering some respondents, it can be noticed that the variable set as character only contains 19 elements, whereas the column set as factor still contains the 107 respondents (most of them not having any recordings). This property can be seen as an advantage or a disadvantage depending on the situation:</p>
<ul>
<li>For frequencies, it may be relevant to remember all the options, including the ones that may never be selected, and to order the results logically (use of <code>factor</code>).</li>
<li>For hypothesis testing (e.g. ANOVA) on subset of data (e.g. the data being split by gender), the <code>Judge</code> variable set as <code>character</code> would have the correct number of degrees of freedom (18 in our example) whereas the variable set as factor would use 106 degrees of freedom in all cases!</li>
</ul>
<p>The latter point is particularly critical since the analysis is incorrect and will either return an error or worse return erroneous results!</p>
<p>Last but not least, variables defined as factor allow having their levels being renamed (and eventually combined) very easily.
Let’s consider the <code>Living area</code> variable from <code>TFEQ_data</code> as example. From the original excel file, it can be seen that it has three levels, <code>1</code> corresponding to <em>urban area</em>, <code>2</code> to <em>rurban area</em>, and <code>3</code> to <em>rural area</em>.
Let’s start by renaming this variable accordingly:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-prep.html#cb72-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">=</span> TFEQ_data <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="data-prep.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Area =</span> <span class="fu">factor</span>(<span class="st">`</span><span class="at">Living area</span><span class="st">`</span>, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Urban&quot;</span>, <span class="st">&quot;Rurban&quot;</span>, <span class="st">&quot;Rural&quot;</span>)))</span>
<span id="cb72-3"><a href="data-prep.html#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="data-prep.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(example<span class="sc">$</span>Area)</span>
<span id="cb72-5"><a href="data-prep.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(example<span class="sc">$</span>Area)</span>
<span id="cb72-6"><a href="data-prep.html#cb72-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-7"><a href="data-prep.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(example<span class="sc">$</span><span class="st">`</span><span class="at">Living area</span><span class="st">`</span>, example<span class="sc">$</span>Area)</span></code></pre></div>
<p>As can be seen, the variable <code>Area</code> is the factor version (including its labels) of <code>Living area</code>.
If we would also consider that <code>Rurban</code> should be combined with <code>Rural</code>, and that <code>Rural</code> should appear before <code>Urban</code>, we can simply modify the code as such:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-prep.html#cb73-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">=</span> TFEQ_data <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="data-prep.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Area =</span> <span class="fu">factor</span>(<span class="st">`</span><span class="at">Living area</span><span class="st">`</span>, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Rural&quot;</span>, <span class="st">&quot;Rural&quot;</span>, <span class="st">&quot;Urban&quot;</span>)))</span>
<span id="cb73-3"><a href="data-prep.html#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="data-prep.html#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(example<span class="sc">$</span>Area)</span>
<span id="cb73-5"><a href="data-prep.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(example<span class="sc">$</span>Area)</span>
<span id="cb73-6"><a href="data-prep.html#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="data-prep.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(example<span class="sc">$</span><span class="st">`</span><span class="at">Living area</span><span class="st">`</span>, example<span class="sc">$</span>Area)</span></code></pre></div>
<p>This approach of renaming and re-ordering factor levels is very important as it simplifies the readability of tables and figures.
Some other transformations can be applied to factors thanks to the <code>{forcats}</code> package. Particular attention can be given to the following functions:</p>
<ul>
<li><code>fct_reorder</code>/<code>fct_reorder2</code> and <code>fct_relevel</code> reorder the levels of a factor;</li>
<li><code>fct_recode</code> renames the factor levels (as an alternative to <code>factor</code> used in the previous example);</li>
<li><code>fct_collapse</code> and <code>fct_lump</code> aggregate different levels together (<code>fct_lump</code> regroups automatically all the rare levels).</li>
</ul>
<p>Although it hasn’t been done here, manipulating strings is also possible through the <code>{stringr}</code> package, which provides interesting functions such as:</p>
<ul>
<li><code>str_to_upper</code>/<code>str_to_lower</code> to convert strings to uppercase or lowercase;</li>
<li><code>str_c</code>, <code>str_sub</code> combine or subset strings;</li>
<li><code>str_trim</code> and <code>str_squish</code> remove white spaces;</li>
<li><code>str_extract</code>, <code>str_replace</code>, <code>str_split</code> extract, replace, or split strings or part of the strings.</li>
</ul>
</div>
</div>
<div id="converting-between-types" class="section level3" number="9.2.3">
<h3><span class="header-section-number">9.2.3</span> Converting between Types</h3>
<p>When importing data, variables may not always be associated to the right type. For instance, when respondents or products are numerically coded, they will be defined as integers rather than strings. Additionally, each variable type has its own property. To take full advantage of the different variable types, and to avoid wrong analyses (e.g considering a variable that is numerically coded as numeric when it is not), we need to convert them to other types.</p>
<p>In the following sections, we will <code>mutate()</code> a variable to create a new variable that corresponds to the original one after being converted to its new type (as in the previous example with <code>Area</code>). In case we want to overwrite a variable by only changing the type, the same name is used within <code>mutate()</code>.</p>
<p>Based on our variable types of interest, there are two main conversions to run:
- From numerical to character/factor;
- From character/factor to numerical.</p>
<p>The conversion from numerical to character or factor is simply done using <code>as.character()</code> and <code>as.factor()</code> respectively. Note however that <code>as.factor()</code> only converts into factors without allowing to chose the order of the levels, nor to rename them. Alternatively, the use of <code>factor()</code> allows specifying the <code>levels</code> (and hence the order of the levels) and their corresponding <code>labels</code>. An example in the use of <code>as.character()</code> and <code>as.factor()</code> was provided in the previous section when we converted the <code>Respondent</code> variables to character and factor. The use of <code>factor()</code> was also used earlier when the variable <code>Living area</code> was converted from numerical to factor (called <code>Area</code>) with labels.</p>
<p>To illustrate the following points, let’s start with creating a tibble with two variables, one containing strings made of numbers, and one containing strings made of text.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-prep.html#cb74-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Numbers =</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;9&quot;</span>,<span class="st">&quot;6&quot;</span>,<span class="st">&quot;8&quot;</span>,<span class="st">&quot;12&quot;</span>,<span class="st">&quot;10&quot;</span>),</span>
<span id="cb74-2"><a href="data-prep.html#cb74-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Text =</span> <span class="fu">c</span>(<span class="st">&quot;Data&quot;</span>,<span class="st">&quot;Science&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;Sensory&quot;</span>,<span class="st">&quot;and&quot;</span>,<span class="st">&quot;Consumer&quot;</span>,<span class="st">&quot;Research&quot;</span>))</span></code></pre></div>
<p>The conversion from character to numerical is straight forward and requires the use of the function <code>as.numeric()</code>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-prep.html#cb75-1" aria-hidden="true" tabindex="-1"></a>example <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="data-prep.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NumbersN =</span> <span class="fu">as.numeric</span>(Numbers), <span class="at">TextN =</span> <span class="fu">as.numeric</span>(Text))</span></code></pre></div>
<p>As can be seen, when strings are made of numbers, the conversion works fine. However, the text are not converted properly and returns NAs.</p>
<p>Now let’s apply the same principle to a variable of the type factor. To do so, we will take the same example but first convert the variables from character to factor:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-prep.html#cb76-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> example <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="data-prep.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Numbers =</span> <span class="fu">as.factor</span>(Numbers)) <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="data-prep.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Text =</span> <span class="fu">factor</span>(Text, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Data&quot;</span>,<span class="st">&quot;Science&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="st">&quot;Sensory&quot;</span>,<span class="st">&quot;and&quot;</span>,<span class="st">&quot;Consumer&quot;</span>,<span class="st">&quot;Research&quot;</span>)))</span></code></pre></div>
<p>Let’s apply as.numeric() to these variables:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-prep.html#cb77-1" aria-hidden="true" tabindex="-1"></a>example <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="data-prep.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NumbersN =</span> <span class="fu">as.numeric</span>(Numbers), <span class="at">TextN =</span> <span class="fu">as.numeric</span>(Text))</span></code></pre></div>
<p>We can notice here that the outcome is not really as expected as the numbers 2-4-9-6-8-12-10 becomes 3-4-7-5-6-2-1, and Data-Science-4-Sensory-and-Consumer-Research becomes 1-2-3-4-5-6-7. The rationale behind this conversion is that the numbers do not reflects the string itself, but the position of that level within the factor level structure.</p>
<p>To convert properly numerical factor levels to number, the variable should first be converted as character:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-prep.html#cb78-1" aria-hidden="true" tabindex="-1"></a>example <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="data-prep.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Numbers =</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(Numbers)))</span></code></pre></div>
<div id="conditional-renaming" class="section level4" number="9.2.3.1">
<h4><span class="header-section-number">9.2.3.1</span> Conditional Renaming?</h4>
<p><code>mutate()</code> and <code>ifelse()</code></p>
</div>
</div>
<div id="handling-missing-values" class="section level3" number="9.2.4">
<h3><span class="header-section-number">9.2.4</span> Handling Missing Values</h3>
<p>Ignoring, removing, imputing</p>
</div>
<div id="restructuring-data" class="section level3" number="9.2.5">
<h3><span class="header-section-number">9.2.5</span> Restructuring Data</h3>
<p>Presentation of the different shapes of the tables based on objectives</p>
<div id="variables-selection-and-repositioning" class="section level4" number="9.2.5.1">
<h4><span class="header-section-number">9.2.5.1</span> Variables Selection and Repositioning</h4>
<p><code>dplyr::select()</code> and <code>dplyr::arrange()</code></p>
</div>
<div id="data-filtering" class="section level4" number="9.2.5.2">
<h4><span class="header-section-number">9.2.5.2</span> Data Filtering</h4>
<p><code>dplyr::filter()</code></p>
</div>
<div id="data-reshaping" class="section level4" number="9.2.5.3">
<h4><span class="header-section-number">9.2.5.3</span> Data (Re)Shaping</h4>
<p><code>pivot_wider()</code> and <code>pivot_longer()</code>
<code>_join()</code></p>
</div>
<div id="preparing-data-for-factominer-and-sensominer" class="section level4" number="9.2.5.4">
<h4><span class="header-section-number">9.2.5.4</span> Preparing Data for FactoMineR and SensoMineR</h4>
<p>matrix, data frame, and tibble.</p>
<p>how to check the type? <code>class()</code>
how to test it? <code>is.data.frame()</code>, <code>is.matrix()</code>, <code>is_tibble()</code>
how to convert it to another format? (see below)</p>
<p>Note on <code>{FactoMineR}</code> and <code>{SensoMineR}</code> which require data frames or matrix (not tibble) so introduction to <code>column_to_rownames()</code> and <code>rownames_to_columns()</code> as well as <code>as.data.frame()</code> and <code>as_tibble()</code>.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-collection.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["i2ds4scc_bookdown.pdf", "i2ds4scc_bookdown.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
